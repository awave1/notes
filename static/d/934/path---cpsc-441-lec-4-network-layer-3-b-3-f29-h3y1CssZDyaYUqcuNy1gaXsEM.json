{"data":{"markdownRemark":{"html":"<p>Goals:</p>\n<ul>\n<li>\n<p>understand principles behind network layer services, focusing on data plane:</p>\n<ul>\n<li>forwarding vs. routing</li>\n<li>how a router works</li>\n<li>generalized forwarding</li>\n</ul>\n</li>\n<li>instantiation, implementation in the Internet</li>\n</ul>\n<p>Data layer &#x26; control plane functionality.</p>\n<p>Network layer is divided two sets of functionality <em>data plane</em> and <em>control plane</em>.</p>\n<p>Network layer provides single logical channel between two hosts. Responsibility of a network layer is to receive data packets, convert them to datagram and transport them to destination host.</p>\n<h2>Overview of a Network Layer</h2>\n<p>The role of the network layer is to move packets from sending host to receiving host. On <strong>sending side</strong>, it encapsulates segments into datagrams. On <strong>receiving side</strong>, it delivers segments to transport layer. Network layer protocols are implemented in <em>every</em> host, router. Router examines header fields in all IP datagrams that are passing through it.</p>\n<p><strong>Network-layer functions</strong>:</p>\n<ul>\n<li>\n<p><strong>Forwarding</strong>: When a packet arrives at a router's input link, the router must move thDetermine route taken by packets from source to destination.e packet to the appropriate output link. <em>Router-local</em> action of transferring a packet from an input link interface to the appropriate output link interface.</p>\n<ul>\n<li><em>Analogy</em>: process of getting through single interchange.</li>\n</ul>\n</li>\n<li>\n<p><strong>Routing</strong>: The network layer must determine the route or path taken by packets as they flow from a sender to a receiver. Routing refers to the <em>network-wide</em> process that determines the end-to-end paths that packets take from source to destination.</p>\n<ul>\n<li><em>Analogy</em>: process of planning a trip from source to destination.</li>\n</ul>\n</li>\n</ul>\n<p>Every router has a <strong>forwarding table</strong>. A router forwards a packet by examining the value of a field in the arriving packet's header, and then using this header value to index into the router's forwarding table. The value stored in the forwarding table entry for that header indicated the router's outgoing link interface to which that packet is to be forwarded.</p>\n<h3>Data Plane &#x26; Control Plane</h3>\n<p><strong>Data Plane</strong></p>\n<p>Data plane is in charge of local packets, per-router function, aka <em>local forwarding</em>. It determines how a datagram arriving on router's input port is forwarded to its output port. <strong>Forwarding function</strong> - the actual transfer of packets from a router's incoming links to the appropriate outgoing links at that router.</p>\n<p><strong>Control Plane</strong></p>\n<p>All about controlling the network, how to find the right path. Control plane implements network-wide logic. It determines how a datagram is routed among routers along end-end path from source to destination host.</p>\n<p>Two control plane approaches:</p>\n<ul>\n<li><em>Traditional routing algorithms</em>: implemented in routers (hardware).</li>\n<li><em>Software-defined network (SDN)</em>: implemented in (remote) servers.</li>\n</ul>\n<h4>Per-router control plane</h4>\n<p>Individual routing algorithm components in <strong>each and every router</strong> that interact in router plane. Every router configures routing (forwarding) table.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e3e466d2a433001a917d31a53943f48d/edf4b/lec4-per-router-control-plane.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 56.390977443609025%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACWklEQVQoz12TWVMTQRSF88P8K75YPohvii9q4ZNVWlKFRfGiwgsSA+ICQgIhVAQhUCSyZd8m+yRkmcQQk5Bt5rMzIQicqq7bfXr69O1z7xgQ0DRNH32c12pkskUazYa+1i4Ht+JwPsRQwzBc9NHrqczP7fFq7Asry0f9DbRuT987dXjZMNmh2wFVHXzfauFzR6j+qV0JXxPUUEV4O7rAyJ1Rpp8Y6SWTVCMSnXKB9XkPE49WUTMpzsMRKqEwVU+Q8QdGfCdn4myber1xM8OuyHB/Ky0O+3BtJ6Ba5tjm4tfMMrENJy7TLi3PCaef17AbbVyUK7gPsihKk1A4QD6fvynYbreR/DkC7gJSuECr0yKbUIgLrpCrkIgUaHfbyLG84M5otNp4DmVKxTrBoJ9SqYShL6YKT/Qo/HJsKyytVHFsFfVLHDslvi+mOHSV+Tgt6Zxzv4RpNkHf3qk3XoL+GhcXNRqN5iDDIVRh4uxMiNcvw3z9FNM595GMwy4J83NsrgZ0zn+a4+daSIh02TQHSCcq/4siyzJSNCren6JeK7O5IvH8qYVZUe2BYByr5YiQL4XFfKJzh84wVvMxPWGRac5BOl25SshQLAq/pDgLJhdLNjf2bJBEMkU5Habe6VFstAjE4nizFbzeKBnRnlE5RyinkFaqVP/WuF4Hw7BRrRYFoznE5PEu0bjCutXF40kb9xfdvHeXeLiW5u6739z7FmRiL8XIBydj4jXRJpctd9nYurJ2u+8hU9fYip2z4FOYNB3wzJbkhafJ+A8fU5YgFllk31Sv/pCBjMY/bhsc02oh88YAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Per-router control plane\"\n        title=\"\"\n        src=\"/static/e3e466d2a433001a917d31a53943f48d/fb8a0/lec4-per-router-control-plane.png\"\n        srcset=\"/static/e3e466d2a433001a917d31a53943f48d/1a291/lec4-per-router-control-plane.png 148w,\n/static/e3e466d2a433001a917d31a53943f48d/2bc4a/lec4-per-router-control-plane.png 295w,\n/static/e3e466d2a433001a917d31a53943f48d/fb8a0/lec4-per-router-control-plane.png 590w,\n/static/e3e466d2a433001a917d31a53943f48d/526de/lec4-per-router-control-plane.png 885w,\n/static/e3e466d2a433001a917d31a53943f48d/fa2eb/lec4-per-router-control-plane.png 1180w,\n/static/e3e466d2a433001a917d31a53943f48d/edf4b/lec4-per-router-control-plane.png 1330w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<h4>Logically centralized control plane</h4>\n<p>A distinct (typically remote) controller interacts with local control agents (CAs). We separate control functionality and implement it in software in remote controller, e.g. NAS. Remote controller computes routing tables and sends them to other routers.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/12d4b805716ad57b7963e62941884969/2b086/lec4-sdn.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 59.06515580736544%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACqUlEQVQoz02TW3PSUBDH+wF98UP45KsPjk86jg86jtPR1suoo7YqXsZab7VjKUxHRQtNAQsEAggkhYQ0XJJCgZDw85Day85sTmYv/z3/3T0zk8mEqfj+BN0YodVddmt9dv92qRdb1PMG9ZxOY3oWrcC+W+uhaiOcfU9kTphiHOnMEeBY+JJSBylSJbWUIHPzCYW5BZT5RZTZxxTmn1O484zMjYekl+IkVosC3Aly/0MEMjP97Ds2j5++IZNsYWwXUUs2mtKmEZdRUypmLIm8ZaDLDerxAkWljy2rxMISq+GNAGg4HJ4A2naX23N3cXs96DtMC7qeh7u3hyda4Votxv6UhcdY2MbTKwmA7V+/efjkGe12m2w2ewgYUBbqjl3SUobV9xtoepPRaIRRKGB32jTF6Yiig4MDGiKxPxxgVioY1Sq+KF8R/6qqHgL6vh80djCa8Oh6mFvnF/j2RQmcz+/+JPajxuL8d/J5i2ns3LV1dHNA9HOWdy//BHGWYOA4zgnlYMpCG9E4+ot3WHI1sP2JlqmVOqQjJfaaB3iC8tZKHqfnUUntUpB0TkswZVXV0DQNw+xSLnTomQ5qdZ+hN6G48pvKVhn5Ywyr2mQw9NgJReiYNrVYDmU99X/lfI62ZaYq+mDuafiuy1JI5srlb0SixcAZC+fIShVi6zKW3kU0lrXlJH17QHqzRPxH+fBm/uQEsN0ZEVqoMrv8nQeJn+S2d8huJ1Ga+0TSf1lXmix+kvgqqaRsn9VEnmhWR67pYtCjY6rHi90/cMnt2CSKddKGjiWoz4Y2OXd/gwvhGlfXypx9VeJMSOF8KMnFDzKX3mZIm4dg/umtPj2U02KLGFXs6VrG4N5KjteVIZ/FU1veVAlLJZpdh45lousGpmnSaDRotVpi9cb8A7MdaJdegeGJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Logically centralized control plane\"\n        title=\"\"\n        src=\"/static/12d4b805716ad57b7963e62941884969/fb8a0/lec4-sdn.png\"\n        srcset=\"/static/12d4b805716ad57b7963e62941884969/1a291/lec4-sdn.png 148w,\n/static/12d4b805716ad57b7963e62941884969/2bc4a/lec4-sdn.png 295w,\n/static/12d4b805716ad57b7963e62941884969/fb8a0/lec4-sdn.png 590w,\n/static/12d4b805716ad57b7963e62941884969/526de/lec4-sdn.png 885w,\n/static/12d4b805716ad57b7963e62941884969/fa2eb/lec4-sdn.png 1180w,\n/static/12d4b805716ad57b7963e62941884969/2b086/lec4-sdn.png 1412w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>A switch/router in this scenario is \"dumb\", e.g. doesn't rely on hardware control plane implementation, rather makes use of software.</p>\n<h2>Router Architecture Overview</h2>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bbe733b75331a0c75cf4e63e96bfd6d2/cfc33/lec4-router-architecture.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 53.216374269005854%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACB0lEQVQoz2WTCXOiQBCF+f//KMdWyt3ERN1E0TWrQEB0g6BRBA9Qjm97IEnl6Kqugpk3b7rf69HKsuQtUSlR5jmoVHE6URZFvf4RWy/A4UCZprDbVd/aV2CmNpdLFqaJ1e2STKewXqMoyuIzYfT4SHB2xvr6GuPqit75OVpdWX1hVhYsfZ9isWCk67QvLvAsC1arV0j5XlghVXuzGbZtM/c8rtttfrZaaFmWsdtvCaMDa29B+PxcEWbDIYWAMschl/8kDImWEdF2zyHZo0TIooij65IK8UY62ozHaHPf4/L3D266I8zmAOPynERIqzgeKw1j+4lJ847BryGN7gN3gyZpeiSNY8xej7+dDk/9PqP7e7RUNFuHK6b/RDfXIxiPKESzk9JT2spl/yQVxvM5njNn9uyz3cbkWW2awgSi+c3tLVeNRm1KLo7G0aYC7ONtZUJLbm0IwBLhkUpUFGVO9Ir75Da1ppl0UxEWuZixeCFNUqIgqEZgIu42m01CMUlYqkO7eMfLcv1O8m2MJLRwE9IzdfSxy6xv4bXvOPpBfesrSGkaDAY4PRvdsOhbPZIk+UaqUvMDn86ww8MfSw4Y+HqXdDIBcVW1jlS8Fyfn4rqj2wxMm74UcJAhfiP8GNpUWpu6Uxx7gjE2ZORWNVAcLtUrUU5L+GKKaciwm0+4josl86kM/Ur6HxwiQBGkvPr+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Router architecture\"\n        title=\"\"\n        src=\"/static/bbe733b75331a0c75cf4e63e96bfd6d2/fb8a0/lec4-router-architecture.png\"\n        srcset=\"/static/bbe733b75331a0c75cf4e63e96bfd6d2/1a291/lec4-router-architecture.png 148w,\n/static/bbe733b75331a0c75cf4e63e96bfd6d2/2bc4a/lec4-router-architecture.png 295w,\n/static/bbe733b75331a0c75cf4e63e96bfd6d2/fb8a0/lec4-router-architecture.png 590w,\n/static/bbe733b75331a0c75cf4e63e96bfd6d2/526de/lec4-router-architecture.png 885w,\n/static/bbe733b75331a0c75cf4e63e96bfd6d2/fa2eb/lec4-router-architecture.png 1180w,\n/static/bbe733b75331a0c75cf4e63e96bfd6d2/cfc33/lec4-router-architecture.png 1368w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<ul>\n<li><em>Switching fabric</em> - The switching fabric connects the router's input ports to its output ports. The switching fabric is completely contained within the router.</li>\n<li><em>Output ports</em> - An output port stores packets received from the switching fabric and transmits these packets on the outgoing link by performing the necessary link-layer and physical-layer functions.</li>\n<li><em>Routing processor</em> - The routing processor executes the routing protocols, maintains routing tables and attached link state information, and computes the routing table for the router.</li>\n</ul>\n<p><strong>Input ports functions</strong>:</p>\n<p>At the input port the router has to implement three things; a physical layer, link layer and a network layer. Each of them has its own copy of forwarding table, that makes these ports to work independently from each other.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c0a6b021f13cdec1bdee541e3470cd54/b1b1b/lec4-input-port.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 32.849364791288565%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABkElEQVQoz22RS0/bUBSE84tbVd2wZtHyV1izqpCgUhtVRCExcaBx7DyKCY4f8fP6cePH1+sUdh1pdO6VRnPOaAZVVSGEIM/zE8XbrKqCsswpixwpCwqlKaIImaZUcYxQrOuapmnoPXp0XccgFzm06tN2tE3/ULPucJyCIDgSHiQvjqTcuVTGgv3DjNQ0qddrcmXetu3JsDc7GSYiwQ5tvMwjyAPcdI8dOERRx2bzjG2/EGVQ7QJ+r0y+jcfc6jqBZdGoJJ26TErJOwbWHws/8/E8j6k2VYKWp+0S1xWMRnfMdU0Ztux0g8PXL+zOz3EuLtheXqoUDr7vkyQJw+GQyWTCwFgbjPQ7xpN7fvz6yb02Zr41WJo7bm6u+X57zZPxTOkc4PMn+PARzs5orq7wwxCRZWQq+lhdvlgsGIhC8Bq/4sV7XN9WkV3cJMSyDsxmBo/zJXPDQ9oe25nGg6YxnU7xFP8buW+0R6u2IY//2kpSsvhIqcqrSkiVpIkSSstErFbkmw1ClVIWBc1bKe8t/wW0agfZj8wPsAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Input port\"\n        title=\"\"\n        src=\"/static/c0a6b021f13cdec1bdee541e3470cd54/fb8a0/lec4-input-port.png\"\n        srcset=\"/static/c0a6b021f13cdec1bdee541e3470cd54/1a291/lec4-input-port.png 148w,\n/static/c0a6b021f13cdec1bdee541e3470cd54/2bc4a/lec4-input-port.png 295w,\n/static/c0a6b021f13cdec1bdee541e3470cd54/fb8a0/lec4-input-port.png 590w,\n/static/c0a6b021f13cdec1bdee541e3470cd54/526de/lec4-input-port.png 885w,\n/static/c0a6b021f13cdec1bdee541e3470cd54/b1b1b/lec4-input-port.png 1102w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<ul>\n<li><strong>Physical layer</strong>: bit level reception</li>\n<li><strong>Data link layer</strong>: e.g. Ethernet</li>\n<li>\n<p><strong>Decentralized switching</strong>:</p>\n<ul>\n<li>Using header field values, lookup output port using forwarding table in input port memory.</li>\n<li>Queuing: if datagrams arrive faster than forwarding rate into switch fabric</li>\n<li><em>Destination-based forwarding</em>: forward based only on IP address (traditional).</li>\n<li><em>Generalized forwarding</em>: forward based on any set of header field values.</li>\n</ul>\n</li>\n</ul>\n<p><strong>Destination-based forwarding</strong>:</p>\n<p>Forwarding table:</p>\n<table>\n<thead>\n<tr>\n<th>Destination</th>\n<th>Interface</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>IP</td>\n<td>0</td>\n</tr>\n<tr>\n<td>...</td>\n<td>...</td>\n</tr>\n</tbody>\n</table>\n<p>There are <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mn>2</mn><mn>3</mn></msup><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2^32</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span><span class=\"mord\">2</span></span></span></span> IP addresses. Therefore we will need to store all of them in a table, which is <em>not feasible</em>.</p>\n<p>Instead, store ranges of destinations, e.g.:</p>\n<table>\n<thead>\n<tr>\n<th>Destination Address Range</th>\n<th>Interface</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>11001000 00010111 00010000 00000000 to 11001000 00010111 00010111 11111111</td>\n<td>0</td>\n</tr>\n<tr>\n<td>11001000 00010111 00011000 00000000 to 11001000 00010111 00011000 11111111</td>\n<td>1</td>\n</tr>\n<tr>\n<td>11001000 00010111 00011000 00000000 to 11001000 00010111 00011111 11111111</td>\n<td>2</td>\n</tr>\n<tr>\n<td>otherwise</td>\n<td>3</td>\n</tr>\n</tbody>\n</table>\n<p><mark>Longest prefix matching</mark>: when looking for forwarding table entry for given destination address, use <strong>longest</strong> address prefix that matches destination address.</p>\n<table>\n<thead>\n<tr>\n<th>Destination Address Range</th>\n<th>Interface</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">11001000 00010111 00010*** *********</code></td>\n<td>0</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">11001000 00010111 00011000 *********</code></td>\n<td>1</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">11001000 00010111 00011*** *********</code></td>\n<td>2</td>\n</tr>\n<tr>\n<td>otherwise</td>\n<td>3</td>\n</tr>\n</tbody>\n</table>\n<h3>Switching Fabrics</h3>\n<p>Transfer packet from input buffer to appropriate output buffer. <strong>Switching rate</strong>: rate at which packets can be transferred from inputs to outputs. There are three types of switching fabrics:</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0f66de3e6123247fbbaa8c2fa14c11ab/d0ad4/lec4-switching-fabrics.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 31.714719271623675%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABW0lEQVQY002Qa0vCcBjF9/2hr9GbXmQRlUIwyK22cl5Gpc7rpu7idLqLk9r89VcqeuDh8JwDh+ccKc9zXM9nZTuUQQDrNVGwIs5SjuPMHAbWgOV0SuguSXbZifd8n7f2G85wiOc45NstFAWSPZ9SublDu6hgas9MFIX6dY3HF43i6xOloSNfV9HPzri9vOVRV+EAvfGA6lWNRcMg1jTchwdwXaQoiXhtmswVnTiKsJsGcuUOWVVIk5j3scWH1sI7P6cuK2jGC+VXwWg+QavrJH2LwuwQyDKIhNIm2WCI1z2jA5sIRMSu3sayJ6dovfGIbsMka7fptj5w/MWJ96OQUW9MNrVZqk8MqjVyYS7xM/v9nmG/z2I2+6U4HA4nLMsSLwz/7iMGokPbsQmWIar8zP1NjYZiIB3F4xai0DTLyHY7frn/WpamAss/01Tc8TYmSRM6XRNVf2IoavgG8qi3aO9ww9sAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Switching fabrics\"\n        title=\"\"\n        src=\"/static/0f66de3e6123247fbbaa8c2fa14c11ab/fb8a0/lec4-switching-fabrics.png\"\n        srcset=\"/static/0f66de3e6123247fbbaa8c2fa14c11ab/1a291/lec4-switching-fabrics.png 148w,\n/static/0f66de3e6123247fbbaa8c2fa14c11ab/2bc4a/lec4-switching-fabrics.png 295w,\n/static/0f66de3e6123247fbbaa8c2fa14c11ab/fb8a0/lec4-switching-fabrics.png 590w,\n/static/0f66de3e6123247fbbaa8c2fa14c11ab/526de/lec4-switching-fabrics.png 885w,\n/static/0f66de3e6123247fbbaa8c2fa14c11ab/fa2eb/lec4-switching-fabrics.png 1180w,\n/static/0f66de3e6123247fbbaa8c2fa14c11ab/d0ad4/lec4-switching-fabrics.png 1318w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<ul>\n<li><strong>Bus</strong>: In this approach, an input port transfers a packet directly to the output port over a shared bus, without intervention by the routing processor.</li>\n<li><strong>Memory</strong>: Implemented in software</li>\n<li><strong>Crossbar</strong>: Hardware controller that enables appropriate buses for a packet.</li>\n</ul>\n<h4>Output ports</h4>\n<p>Packet loss can happen at both input ports and output ports.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6930340377a05b4bf582d896989f31f3/e57a0/lec4-output-ports.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 37.35537190082645%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABbUlEQVQoz2WRy27bMBBF/b/5g/YXsm2X7WdkXSBAGzS7xIER24lcypH1oBRJ5ksPn46UxEDRIQbDIYnLO/cuTqcTUxhjGMeRruvwTcMgfde2OKlHY2kaQ9sarLV458/pnCOEMGNMWAveI89z3ASWpujVis3vW17u77CR4pBY6mYgyzxlFXDBYoPDeit7x/F4nMlMsZia9XrNbrdjOhoOB4ww+3F9zXOspNdUuSXNXhh6WP9J0KYgfZWPj5q0Tana6o2hrBkwiiKetlsSYaeWS8LlJVxcwOdPNL9u5T7j5uYnSh1Ybp5pRZLH1SNK2Ou65GHzQJEXjKfx35Fb0csoeXR1xfbLV56+f8OttqRJTbTbyOg5+/yVWCv2eo/KFXEZk+ls1n7W8MOUPJPDYZg1dLJvtKYtCnyczBoW2pGmjrL0dL0Y0r1l6ANWTPuIM2BVVfR9T5CfXF0TZKwgdXLZGCcO2zmtdf+57L0/u/wXhxwR9GN1KeUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Output ports\"\n        title=\"\"\n        src=\"/static/6930340377a05b4bf582d896989f31f3/fb8a0/lec4-output-ports.png\"\n        srcset=\"/static/6930340377a05b4bf582d896989f31f3/1a291/lec4-output-ports.png 148w,\n/static/6930340377a05b4bf582d896989f31f3/2bc4a/lec4-output-ports.png 295w,\n/static/6930340377a05b4bf582d896989f31f3/fb8a0/lec4-output-ports.png 590w,\n/static/6930340377a05b4bf582d896989f31f3/526de/lec4-output-ports.png 885w,\n/static/6930340377a05b4bf582d896989f31f3/fa2eb/lec4-output-ports.png 1180w,\n/static/6930340377a05b4bf582d896989f31f3/e57a0/lec4-output-ports.png 1210w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p><strong>Buffering</strong> required from fabric faster rate. Most of buffering is happening at output ports. Datagram (packets) can be lost due to congestion, lack of buffers. Buffering happening because capacity is less than amount of incoming traffic. <strong>Scheduling</strong> datagrams. Priority scheduling - who gets best performance, network neutrality. Net neutrality - do not discriminate packets based on sender.</p>\n<p><strong>What is the right amount of buffer size?</strong></p>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>m</mi><mi>a</mi><mi>x</mi><mi>t</mi><mi>p</mi><mi>u</mi><mi>t</mi><mo>=</mo><mi>C</mi><mo>=</mo><mfrac><mi>W</mi><mrow><mi>R</mi><mi>T</mi><mi>T</mi></mrow></mfrac><mspace linebreak=\"newline\"></mspace><mi>m</mi><mi>a</mi><mi>x</mi><mi>W</mi><mo>=</mo><mi>C</mi><mo>⋅</mo><mi>R</mi><mi>T</mi><mi>T</mi><mtext> (Delay bandwidth (DB)) </mtext></mrow><annotation encoding=\"application/x-tex\">max tput = C = \\frac{W}{RTT} \\\\\nmax W = C \\cdot RTT \\text{ (Delay bandwidth (DB)) }</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.80952em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">x</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.04633em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">x</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord text\"><span class=\"mord\"> (Delay bandwidth (DB)) </span></span></span></span></span></span>\n<p>RFC 3439 rule of thumb: average buffering equals to <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">RTT</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span> times link capacity <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span></span></span></span>, aka <strong>Delay-Bandwidth Product</strong>.</p>\n<h2>IP: Internet Protocol</h2>\n<p>Internet Protocol is simple but important protocol.</p>","frontmatter":{"date":"February 11, 2019","title":"Network Layer","tags":["cpsc441"]}}},"pageContext":{"prev":{"fields":{"slug":"/cpsc413/midterm-overview"},"frontmatter":{"published":true,"tags":["cpsc413"]}},"slug":"/cpsc441/lec4-network-layer","next":{"fields":{"slug":"/cpsc457/lec9-mutexes-locks-dining-philosophers"},"frontmatter":{"published":true,"tags":["cpsc457","multithreading","concurrency"]}},"category":"cpsc441"}}