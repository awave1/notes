{"data":{"markdownRemark":{"html":"<h2>Interrupts</h2>\n<p>Interrupt can happen at any time. When interrupt happens, CPU switches to kernel mode and interrupt handler executes the interrupt. CPU state is saved by the interrupt handler before executing code in interrupt handler. After executing interrupt, CPU restores state and switches back to user mode. Source of the interrupts is usually devices.</p>\n<h3>Software interrupts (exception/traps)</h3>\n<p>Similar to hardware interrupts but the source of the interrupt is the CPU itself. Software interrupts are handled similarly to hardware interrupts.</p>\n<p>There are two types of software interrupts: <em>intentional</em> and <em>unintentional</em>.</p>\n<h4>Unintentional interrupts</h4>\n<p>Also called <strong>exceptions</strong>. Occurs when CPU executes invalid instruction (e.g. accessing non-existent memory, write to ROM, division by zero). Unintentional interrupts used by OS to detect when an application attempts an illegal operation.</p>\n<h4>Intentional interrupts (trap)</h4>\n<p>Trap usually occurs via special instruction, e.g. <code class=\"language-text\">INT</code>. The purpose of a trap is to execute predefined routine in <em>kernel mode</em>. OS can use traps to implement system calls.</p>\n<h3>Hardware interrupts vs Software interrupts</h3>\n<ul>\n<li>\n<p><strong>Hardware Interrupts</strong>:</p>\n<ul>\n<li>External event delivered to the CPU</li>\n<li>Origins: I/O, timer, user input</li>\n<li>Asynchronous with the current activity of the CPU</li>\n<li>The time of the event is not known and not predictable</li>\n</ul>\n</li>\n<li>\n<p><strong>Software Interrupts</strong>:</p>\n<ul>\n<li>Internal events, e.g. system calls, exceptions</li>\n<li>Synchronous with the current activity of the CPU</li>\n<li>Occurs as a result of execution of a machine instruction</li>\n</ul>\n</li>\n<li>\n<p>Both hardware and software interrupts:</p>\n<ul>\n<li>Invoke a kernel routine, defined by the OS</li>\n<li>Put the CPU in a kernel mode</li>\n<li>Save the current state of the CPU</li>\n<li>Eventually resume the original operations when done</li>\n</ul>\n</li>\n</ul>\n<h3>I/O</h3>\n<p>How does the kernel handle I/O? There are two options.</p>\n<ul>\n<li>\n<p><em>Option 1</em>: busy waiting/spinning/busy looping (aka polling).</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cpu -&gt; disk: read a file\nloop:\ncpu -&gt; disk: u done?\nbreak if done\ncpu -&gt; disk: give result</code></pre></div>\n<ul>\n<li>There are problems with is:</li>\n<li>the CPU is tied up while slow I/O completes the operation <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mtext>&ThickSpace;</mtext><mo>⟹</mo><mtext>&ThickSpace;</mtext></mrow><annotation encoding=\"application/x-tex\">\\implies</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.549em;vertical-align:-0.024em;\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⟹</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span></span></span> CPU could be doing other operations</li>\n<li>Power is wasted</li>\n</ul>\n</li>\n<li>\n<p><em>Option 2</em>: busy wait with sleep</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cpu -&gt; disk: read a file\nloop:\nsleep\ncpu -&gt; disk: u done?\nbreak if done\ncpu -&gt; disk: give result</code></pre></div>\n<ul>\n<li>Sleep could be detected by OS and the CPU could then run another program</li>\n<li>Problems:</li>\n<li>Hard to estimate the right amount of sleep</li>\n<li>Program might end up running longer than necessary</li>\n</ul>\n</li>\n<li>\n<p><em>Option 3</em>: Hardware interrupts</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cpu -&gt; disk: read a file\ncpu -&gt; disk: update when done\ncpu: sleep until interrupted\ndisk -&gt; cpu: interrupt\ncpu -&gt; disk: give result</code></pre></div>\n<ul>\n<li>When the I/O device finishes the operation, it generates an interrupt, letting the OS know it's done, or there was an error</li>\n<li>This approach assumes the I/O device supports interrupts</li>\n</ul>\n</li>\n</ul>\n<h4>Using interrupts to do I/O</h4>\n<p>Kernel talks to the device driver to request an operation. The device driver tells the controller what to do by writing into device registers. The controller starts the device and monitors its progress. When the device is done its job, the device controller signals the interrupt controller. The interrupt controller informs the CPU and puts the device information on the bus. The CPU suspends current process and handles the interrupt by executing the appropriate interrupt handler (in kernel mode). The CPU then resumes its original process.</p>\n<h3>Limits of interrupts</h3>\n<ul>\n<li>CPU can run other programs while waiting for I/O</li>\n<li>\n<p>CPU could be interrupted for every single byte of I/O</p>\n<ul>\n<li>many devices/controllers have limited memory</li>\n<li>these devices could generate an interrupt for every single input byte</li>\n<li>interrupts take many CPU cycles to save/restore CPU state</li>\n<li>useful work often a single instruction - to store the data in memory</li>\n</ul>\n</li>\n</ul>\n<p>To solve these problems, introduce a dedicated hardware to deal with interrupts - DMA chip</p>\n<ul>\n<li>DMA absorbs most interrupts</li>\n<li>DMA can save data directly into memory, without CPU knowing</li>\n<li>result is less interrupts for the CPU</li>\n</ul>\n<h4>Direct memory access (DMA)</h4>\n<p>It is a special piece of hardware on most modern systems. DMA used for bulk data movement such as disk I/O. It is usually used with slow devices so that CPU can do other things, but also could be used with extremely fast devices that could overwhelm CPU.</p>\n<p>Device controller transfers an entire block of data directly to the main memory without CPU intervention. Only one interrupt is generated per block - to tell the device driver that the operation has completed. Used for device <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span> memory, memory <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span> device, and memory <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span> memory transfers.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/54080e443e90f6a5fd10f10375cbad17/988e0/lec3-dma.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 52.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB8klEQVQoz4WT3WrUQBTH80Dee+creOcb+BKleqNiL7yQgogirrioiK6gti6IYLWliraFUuyitW7XzWaz2U2ymSQz+ZjM35OMu6ZS8cCP4Zzk/DkfM4YUCZQsUJpSqjrzLMfIdiDoWz3+t83inAtklFOa0XpxE3tfNrWQ1MG1rXVcurOEB6sPKSbnySdRWmd/D0PL1IK3Ghfw+ePLyimUTl7feYtr96/gyesmZCFn9dROdczf+fQBjj3Ugt6YIzbHEIkEFzl4UoBPI5gWQ5wpCIJn+CdJruCOBSKWoizYiKIMrhPCN114JX1i4MOxQnijElYjhGuzipk/dRgGZoDeMEZBqzBqI8bJpv6LUsWfpWScQ4Ts9wy1aJbn6P7swbJtnaL0UsrLMA44GPU6i5WWpiltmmvB9psmHj1brhxZ6OvT6X7F4o2LuNy4CssZzmtdaHVw6vwyTi+uYO1bMI8fdQ+xu7ulBTc2n6Pdvnesbcvpo7lyF49fNTANvXni2esbMM4swDh3G0+3hzXBH+h9P9CCBbU+mZQblgh5Qe1IiBTwImIkaBwpWJAgonN730brXR+r7w/RswJwWmjEBHw3wdjN6UFIGOWr8KcJmM8ReISv8d24IpiERFSdGc0vj1PItEDMEkzp/9AXVFCMowFDSlfsF6PgPBGPOVZCAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"DMA\"\n        title=\"\"\n        src=\"/static/54080e443e90f6a5fd10f10375cbad17/fb8a0/lec3-dma.png\"\n        srcset=\"/static/54080e443e90f6a5fd10f10375cbad17/1a291/lec3-dma.png 148w,\n/static/54080e443e90f6a5fd10f10375cbad17/2bc4a/lec3-dma.png 295w,\n/static/54080e443e90f6a5fd10f10375cbad17/fb8a0/lec3-dma.png 590w,\n/static/54080e443e90f6a5fd10f10375cbad17/526de/lec3-dma.png 885w,\n/static/54080e443e90f6a5fd10f10375cbad17/988e0/lec3-dma.png 1120w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<h2>Kernel Designs</h2>\n<p>What goes into a kernel and what does not? There are trade-offs to consider:</p>\n<ul>\n<li>code in kernel runs faster, but</li>\n<li>big kernels have more bugs <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mtext>&ThickSpace;</mtext><mo>⟹</mo><mtext>&ThickSpace;</mtext></mrow><annotation encoding=\"application/x-tex\">\\implies</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.549em;vertical-align:-0.024em;\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⟹</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span></span></span> higher system instability</li>\n</ul>\n<p>There are three main kernel designs: <strong>monolithic kernel</strong>(MS-DOS, Linux), <strong>microkernels</strong>(Mach, QNX), <strong>hybrid kernels</strong>.</p>\n<h4>Monolithic kernel</h4>\n<p>The entire OS runs as a single program in kernel mode. It is faster but more prone to bugs, harder to port, and potentially less stable.</p>\n<h4>Microkernel</h4>\n<p>Only essential components in kernel - running in kernel mode (essential = code that must run in kernel mode). The rest is implemented in user mode. Most likely will be less bugs, easier to port and extend, more stable, but slower.</p>\n<h4>Hybrid kernel</h4>\n<p>Trying to balance the cons/pros of monolithic kernels and microkernels</p>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/42ecb17845b89a0f7900a2a918f4fdf9/1fe1a/lec3-kernel-designs.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 36.64179104477612%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAACA0lEQVQozyWPW0jTcRzFfz71VkERSEaJ0EP0EBVB0EMPQZnloNSV5rL0P5U5U0uTdJq4NtmshS3TvJF52e2/vzq1xog0NxRJ6UJ0kcoIosASTNB6+fSTDhwOnHP4XgQrRXTP6LgdTaF58iT2sSPMzhvgbylfvyu4ose5E0vFNZ4sNZmFhXxYLeHbD4Wm2Jqnk1kKTdETLC0WIuZjgrJGgaFOoFjjOGMReFTBymfBxBPBxXpBrl2q5DnZmR4X/H4veBYRnJVdo/Qv3BAUOgRvJgViIGETDfY+LM0Rqm+qVLdP0WM08LpLFqKJLIXMhKf3M/LuGlcbVDTPVj5NCXrVfRwq7kcb2k7L3EZeyOUvJ+TA1oR4LtmGUVpnUW6NoXR/oO5YPt1JgkdtiSyOFKDN7Mb3sYqcmhA19fEE5TXutG0Y96YSsu6iv30PkU4dgdzNiKI4+bJVo9gdw+wMU/bgLWVHszALgfNAEk87nLR1KHT6XFTV+jHv3ECFzMrXrcd28DAhZwVdlXa8feNYtuxARFruYcq7QnamGSWnFL3exN3K67y676a3toG0U2bOp5eTLTUv08SorZHn7ib6bA5OZ18mI6uE9KwiMvQFDDkcCCRGw4/x+H0EBzUe9vYw92V+zebn8hK+gBd1MIB/QFILssp//Fpexuf3EtRU1GAAVWZ/pP8PR3RqWNDmnVEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Kernel designs\"\n        title=\"\"\n        src=\"/static/42ecb17845b89a0f7900a2a918f4fdf9/fb8a0/lec3-kernel-designs.png\"\n        srcset=\"/static/42ecb17845b89a0f7900a2a918f4fdf9/1a291/lec3-kernel-designs.png 148w,\n/static/42ecb17845b89a0f7900a2a918f4fdf9/2bc4a/lec3-kernel-designs.png 295w,\n/static/42ecb17845b89a0f7900a2a918f4fdf9/fb8a0/lec3-kernel-designs.png 590w,\n/static/42ecb17845b89a0f7900a2a918f4fdf9/526de/lec3-kernel-designs.png 885w,\n/static/42ecb17845b89a0f7900a2a918f4fdf9/fa2eb/lec3-kernel-designs.png 1180w,\n/static/42ecb17845b89a0f7900a2a918f4fdf9/08f6a/lec3-kernel-designs.png 1770w,\n/static/42ecb17845b89a0f7900a2a918f4fdf9/1fe1a/lec3-kernel-designs.png 2680w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<h3>Kernel modules</h3>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d9b28e826c8238010a24054e6340593e/c664d/lec3-kernel-module.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 338px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 91.71597633136095%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACDElEQVQ4y4WU16qqQQyFff9H8VoUFURFBduFDRRRsffeazZfNpH59Rz2QJi+spKVGd/1epX9fv+28/nssePx+N47HA7yeDyE9nq91D6bb71ey3w+l8ViIavVSur1ujQaDWm329JqtaTX6+n6crmU6XSqDv4E5AI9LLLZrAQCAYlEIhIMBhWc9c1mo04/AT/NB1i/35fhcCiDwUBGo5GMx2PtJ5OJjtljzv7pdJL/NQW83W7Kbrfb6YVqtSrdbleazaauE6qFzPx+v2seP+35fP6G7HpgY7vdCk4wBGOOMwRBJHoz0oATM+743OQCABs2YNvpdJQZoOl0WkKhkGQyGUkkEpLL5TQa0gUwwpJfDyBABkiuAMUzgCgOSLFYVOFKpZKCzWYzL6Al0wABuFwuOgeISwAjDpcpHesRyhVTQ/4XIKHTEMAtahuTU8urzU39L0ALmeaqC0NYERpmhW4Pgh7RPICmKrkgFPJGfmCSTCbF7/dLNBrVwo/FYpJKpfQcDK3oPYDkDi806gomxoyL9hypURuzbvkk7C9A9yUwNhEwe/OumUCkABJfgKaw5dSEYJ25nfn8jewn8gByAE9csDcOC0Qpl8uSz+elUqloDfIr1Wo1DZmzMP0KGcqAUS6A2CvAOwWNGPF4XMLhsIpUKBTeokDkLYoL6jY881HwJ/LzuIXNHKOo2cc5ZH4APh9U7HfCPXIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Kernel modules\"\n        title=\"\"\n        src=\"/static/d9b28e826c8238010a24054e6340593e/c664d/lec3-kernel-module.png\"\n        srcset=\"/static/d9b28e826c8238010a24054e6340593e/090cd/lec3-kernel-module.png 148w,\n/static/d9b28e826c8238010a24054e6340593e/24e39/lec3-kernel-module.png 295w,\n/static/d9b28e826c8238010a24054e6340593e/c664d/lec3-kernel-module.png 338w\"\n        sizes=\"(max-width: 338px) 100vw, 338px\"\n      />\n  </span>\n  </a></p>\n<p>Modular kernels are type of hybrid kernels, usually consist of smaller kernel with only essential components plus non-essential, dynamically loadable kernel parts - <strong>kernel modules</strong>. Drivers are often implemented as modules.</p>\n<p>Modules are often loaded on demand, when needed or requested. It could be at boot time or later. Modules usually run in kernel mode.</p>\n<ul>\n<li>OS can come with many drivers but only those that needed are loaded which results in faster boot time</li>\n<li>No kernel recompile/reboot necessary to activate a module</li>\n</ul>\n<h3>Layered approach</h3>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8b7143b183752d1aa2e9eb187a860181/8cc2a/lec3-kernel-layers.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 224px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 186.60714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAlCAYAAABCr8kFAAAACXBIWXMAABYlAAAWJQFJUiTwAAADeklEQVRIx6VWaU8iQRDl17tx/eoXdXch6ipfTDxI0AhEE4+YNVESrywoIAwowgynoBy19RpqbIbhWJ3k0TPNm+7q7lf1xtPtdqnRaFCtVhtAtVodCScXeH9/J1yet7c3en5+pmKxSIVCQQH3pmkqlMtlsiyLKpWKavGsc3UgOA+ie3p6UmQZBC/E43HKZrN0e3tL6XSaotEoPT4+0sXFBRmGQaVSaWBiBNXpdD4GlIEwEwY/ODigjY0NmpubI7/fT99mZigWi9Hp6SklEgl7QEE+n/+IEKNjSSABWBYGRn+Go0txZNIPCE+HHSE2M5lM0sPDwwDQB6QyGcqiBScxzEO09/f3lMvleoeCH0Sph6+Aw+Gl5zm69I8lMgI76nmI19/HVqvVGxDrHnvx/6Xfq/R6ckKTLrWH+BkFXJ3XVyr++kmVcMh+aRw8QkLI7XbbhnrmTW7xdpi83Or5ObWZi34nF5DLgwddgwJL9gstJAUOAyfq5IOHDFIDOnWo6woSARGSQnqZ3A+x4z8nH7IZyBSdgHsIGPD5fLS/v0/z8/N0fX1NgUBAtZhEuK7C1peBZV1dXdHh4SFtb29TOBSiSCRCGdbkCZ82WnD0ZWNAO/VAeHl5UZ0CzCrZUUL14dNG9uBlnSv3ELYtGzwgT6F4FAUB+v6if2+PYsfHFOfMiPOzzhFgcjtTxl0dPpTi0iJVd3e/Luxun2T616l2dtZ7ifdpXCJMjhCnyRFWdoPTR9hsNl3Leg3lvl4ni4tsictYjQ/w0xYgMlJ1Ei/xKVuaJQhPf2+kBQB3d3eq/+bmhpJc8y4vL5UVHB0dqRoo3jKVBeAeAt7a2lIWsL62Rt9nZ5W/QODwF0SuRzmUKXppBxmTICKDRW9w/sry8eJEC5AyrgN9sIBEKkVpWAI/x7WSrwPCHrIAKVkCtTc8cyFrkOHzUo5lY/Iq9PImPEQ4vQWgXq6uUJ0P478yRTr0P5WwYWCwgEh4wAKcvCELcJb0tmYB1g4s4I+ygLZL+Xe1AF1Toyyg6Cj7X7MAbi3Nl/VBp7KAM64uEPfy8jKFw2FaXFhQWeP1elUWiQW4eoqbBSAb8MG0ublJIbaAYDCoDAr98vU11gKQRijnAvkmLPe1V+eqA47ksM7FYJhswAKgdlG9tLCAWL/kO1tntgxZwKRPjEmfLK7C/uylj/EPtxDpootqi4UAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Kernel layers\"\n        title=\"\"\n        src=\"/static/8b7143b183752d1aa2e9eb187a860181/8cc2a/lec3-kernel-layers.png\"\n        srcset=\"/static/8b7143b183752d1aa2e9eb187a860181/61446/lec3-kernel-layers.png 148w,\n/static/8b7143b183752d1aa2e9eb187a860181/8cc2a/lec3-kernel-layers.png 224w\"\n        sizes=\"(max-width: 224px) 100vw, 224px\"\n      />\n  </span>\n  </a></p>\n<p>Each layer only talk to layer below or above. Layer design is slow.</p>\n<h2>Virtual Machines</h2>\n<p>Virtual machines emulate computer systems either in software or in specialized hardware, or both. Host machine creates illusion that each guest machine has its own processor and its own hardware. <strong>Hypervisor</strong> - software or hardware that manages VMs. There are several types of hypervisors:</p>\n<ul>\n<li>\n<p>Bare metal - runs directly on hardware</p>\n<ul>\n<li>usually runs on big servers</li>\n<li>XEN, VMWare ESX</li>\n</ul>\n</li>\n<li>\n<p>Hosted - runs on top of another OS. Slower that bare metal, has to communicate with hardware through OS.</p>\n<ul>\n<li>Usually on desktops, slower</li>\n<li>VMWare Player, VirtualBox</li>\n</ul>\n</li>\n<li>Hybrid - using kernel itself as a hypervisor through a KVM module.</li>\n</ul>\n<p>Virtual machines can save money for companies, time for developers. VMs are isolated from each other, that means a user can run different versions of same program, or run unsafe programs. VMs are perfect solution for sys admins: there's no need to setup multiple servers, instead one big server can be setup with multiple VMs. That makes it easier to maintain.</p>\n<!--Containers do not virtualize the machine, containers virtualize the OS. \"each user app has it's own os\"-->","frontmatter":{"date":"January 22, 2019","title":"Interrupts, traps, kernel design, VMs","tags":["cpsc457"]}}},"pageContext":{"prev":{"fields":{"slug":"/cpsc441/lec2-application-layer"},"frontmatter":{"published":true,"tags":["cpsc441"]}},"slug":"/cpsc457/lec3-interrupts-traps-kernels-vms","next":{"fields":{"slug":"/cpsc441/lec3-transport-layer"},"frontmatter":{"published":true,"tags":["cpsc441"]}},"category":"cpsc457"}}