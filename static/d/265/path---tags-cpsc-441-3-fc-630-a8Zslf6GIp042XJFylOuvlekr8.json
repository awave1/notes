{"data":{"allMarkdownRemark":{"totalCount":5,"edges":[{"node":{"id":"e21ed867-bfd1-52f7-be50-39244d978a76","html":"<p>The job of routing is to determine good paths from senders to receivers, through the network of routers. Typically a host is attached directly to one router, the <strong>gateway router</strong> for the host (also called the <strong>first-hop router</strong>). Whenever a host sends a packet, the packet is transferred to its default router. The gateway router is also referred to as the <strong>source router</strong> and the default router of the destination host as the <strong>destination router</strong>. Only routers in network are involved in routing process.</p>\n<hr>\n<p>Routers are represented as a graph <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>G</mi><mo>=</mo><mo>(</mo><mi>V</mi><mo separator=\"true\">,</mo><mi>E</mi><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">G = (V, E)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">G</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mclose\">)</span></span></span></span>. Links between nodes have cost, denoted by <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>c</mi><mo>(</mo><mi>x</mi><mo separator=\"true\">,</mo><msup><mi>x</mi><mo mathvariant=\"normal\">′</mo></msup><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">c(x, x&#x27;)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.001892em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>. Cost could always be 1, or inversely related to bandwidth or directly related to congestion.</p>\n<p>A <em>path</em> is a sequence of routers packets will traverse in going from given initial source host to given destination host. The cost of the path is</p>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><msub><mi>x</mi><mn>3</mn></msub><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>p</mi></msub><mo>)</mo><mo>=</mo><mi>c</mi><mo>(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo>)</mo><mo>+</mo><mi>c</mi><mo>(</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><msub><mi>x</mi><mn>3</mn></msub><mo>)</mo><mo>+</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mo>+</mo><mi>c</mi><mo>(</mo><msub><mi>x</mi><mrow><mi>p</mi><mo>−</mo><mn>1</mn></mrow></msub><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>p</mi></msub><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">(x_1, x_2, x_3, ..., x_p) = c(x_1, x_2) + c(x_2, x_3) + ... + c(x_{p - 1}, x_{p})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15139200000000003em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">p</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15139200000000003em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">p</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span>\n<h2>Classification of Routing Algorithms</h2>\n<p><strong>Global</strong> (also <em>centralized algorithms</em>)</p>\n<ul>\n<li>All routers have complete topology, link cost info</li>\n<li>\n<p><em>Link state</em> algorithms</p>\n<ul>\n<li>Every router has to tell other routers the state of the link</li>\n</ul>\n</li>\n</ul>\n<p><strong>Decentralized</strong></p>\n<ul>\n<li>Router knows physically (directly) connected neighbors, link costs to neighbors.</li>\n<li>Iterative process of computation exchange of information with neighbours.</li>\n<li><em>Distance vector</em> algorithms.</li>\n</ul>\n<p><strong>Static</strong></p>\n<p>Compute routes only once. Used if routes change slowly over time.</p>\n<p><strong>Dynamic</strong></p>\n<ul>\n<li>\n<p>Routers change more quickly</p>\n<ul>\n<li>Updated periodically</li>\n<li>Done in response to link cost changes</li>\n</ul>\n</li>\n</ul>\n<h2>Routing Algorithms</h2>\n<h3>Link State Routing</h3>\n<p>In a link state algorithm, the network topology and all link costs are known and available to the LS algorithm. In practice, this is accomplished by having each node broadcast link-state packets to <em>all</em> other nodes in the network, with each link state packet containing the identities and costs of its attached links.</p>\n<p><strong>Dijkstra's Algorithm</strong></p>\n<p>Dijksta's algorithm computes the least-cost path from one node to all other nodes in the network. Dijkstra's algorithm is iterative and has property that after the <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mi>k</mi><mrow><mi>t</mi><mi>h</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">k^{th}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.849108em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">t</span><span class=\"mord mathdefault mtight\">h</span></span></span></span></span></span></span></span></span></span></span></span> iteration of the algorithm, the least-cost paths to all destination nodes, these <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> paths will have the smallest <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span></span></span></span> smallest costs.</p>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>D</mi><mo>(</mo><mi>v</mi><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">D(v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span>: cost of the least-cost path from the source node to destination <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> as of this iteration of algorithm.</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>p</mi><mo>(</mo><mi>v</mi><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">p(v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span>: previous node (neighbour of <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span>) along the current least-cost path from the source to <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span>.</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mi>N</mi><mo mathvariant=\"normal\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">N&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.751892em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span>: subset of nodes; <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> in <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mi>N</mi><mo mathvariant=\"normal\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">N&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.751892em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span> if the least cost path from the source to <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> is definitely known.</li>\n</ul>\n<p><strong>Example</strong>:</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/39d7f42a6519c4a39ade755a4f922af9/23fd4/lec5-graph.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 78.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACXUlEQVQ4y3VUa2+bQBDk5/dv9EMrNVKrVmrjqlWVKHJsqXZTx3ZiBz9i6hfYsY2BAw44prdnwI8kK61u4bi5ndldNNswMaz8xqxxB7KUPElQr/bw9dstLGsNIRLEcXzkaZoitzymVbPdGGzLwXwhD4rdF+02BuUGKrUeFtYKnIfwPA+MMeUUh2EI0zTlhVYBpgAjniCUTqva2GwUoIpFpMDo8Eu2Wq2OAMm0fdoCQRQhvfkLiQAeJwiCHRBltN1u1XqYDZnv+4jkuYKy2pDO5Qvj6goYGWpTSJ0mk0khw3K5hOM4zwBJTwI9AlRbQQA0GsilJqDRaKQO5EYZHhYgj13X3WuYyoOqsrdNpOt1zl/RiCKO3V0BxuMxEln9PW3SWKi+CA5o7zS0ZsDjUIVRkmSrAPN8dSvpR5QJ2JW0fX5cJC71Z2xHW2t3THx/e4nJzT28fwa6lSo8XUfpUxnvPlSxXNjYbNYK1JJt4oUcvz5X8fPHPRb6EOHYwGOlibOzumyOKbTpdINKtYttqwP0+xD9ASAB580O7sp1MAkwn03hbB24UoKg+4DRxxL0ngW78wDz+hpcH6DXn8K22Y5ymkZIT5vMdRC1mrClPqQblSaSOvNWu/iEFAzyYchMy6sUS1HJ00xDIZt2cnGBVdbUca2G2DCyhs+mKq+4es6qnFeRQKnzi9ufnhD2dGo0oP4HZreLjc+eze5pXEwKAdKcJlmGbDyH9+UcSbOtelRkP41ToFPTDjdoZpnH4Ergy/M6Sm/ew1q6Ba3D7F4z7aUbKQ4kuB1wiGw00xOqr9l/dA7SH0yqskMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Example graph\"\n        title=\"\"\n        src=\"/notes/static/39d7f42a6519c4a39ade755a4f922af9/623ee/lec5-graph.png\"\n        srcset=\"/notes/static/39d7f42a6519c4a39ade755a4f922af9/816c5/lec5-graph.png 148w,\n/notes/static/39d7f42a6519c4a39ade755a4f922af9/c766b/lec5-graph.png 295w,\n/notes/static/39d7f42a6519c4a39ade755a4f922af9/623ee/lec5-graph.png 590w,\n/notes/static/39d7f42a6519c4a39ade755a4f922af9/23fd4/lec5-graph.png 704w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<table>\n<thead>\n<tr>\n<th>Step</th>\n<th>N'</th>\n<th>D(v), p(v)</th>\n<th>D(w), p(w)</th>\n<th>D(x), p(x)</th>\n<th>D(y), p(y)</th>\n<th>D(z), p(z)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0</td>\n<td>u</td>\n<td>7, u</td>\n<td>3, u</td>\n<td>5, u</td>\n<td><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi mathvariant=\"normal\">∞</mi></mrow><annotation encoding=\"application/x-tex\">\\infty</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord\">∞</span></span></span></span></td>\n<td><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi mathvariant=\"normal\">∞</mi></mrow><annotation encoding=\"application/x-tex\">\\infty</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord\">∞</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi mathvariant=\"normal\">∞</mi></mrow><annotation encoding=\"application/x-tex\">\\infty</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord\">∞</span></span></span></span></td>\n</tr>\n<tr>\n<td>1</td>\n<td>wu</td>\n<td>6, w</td>\n<td></td>\n<td>5, u</td>\n<td>11, w</td>\n<td><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi mathvariant=\"normal\">∞</mi></mrow><annotation encoding=\"application/x-tex\">\\infty</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord\">∞</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi mathvariant=\"normal\">∞</mi></mrow><annotation encoding=\"application/x-tex\">\\infty</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord\">∞</span></span></span></span></td>\n</tr>\n<tr>\n<td>2</td>\n<td>xwu</td>\n<td>6, w</td>\n<td></td>\n<td></td>\n<td>11, w</td>\n<td>14, x</td>\n</tr>\n<tr>\n<td>3</td>\n<td>vxwu</td>\n<td></td>\n<td></td>\n<td></td>\n<td>10, v</td>\n<td>14, x</td>\n</tr>\n<tr>\n<td>4</td>\n<td>yvxwu</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td>12, y</td>\n</tr>\n<tr>\n<td>5</td>\n<td>zyvxwu</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<h3>Distance Vector</h3>\n<p>There's no topology discovery. Routers only know their <em>direct neighbours</em>. The idea is, by exchanging information with each other, routers compute the network topology.</p>\n<p><strong>Bellman-Ford equation</strong></p>\n<p>Recursive algorithm, that calculates least cost path, however it is more costly compare to Dijkstra's.</p>\n<p>Let <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>d</mi><mi>x</mi></msub><mo>(</mo><mi>y</mi><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">d_x(y)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">x</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span> cost of least-cost path from <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> to <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>c</mi><mo>(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>v</mi><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">c(x, v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span> cost to neighbour <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>d</mi><mi>v</mi></msub><mo>(</mo><mi>y</mi><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">d_v(y)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">v</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span> cost from <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> to <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span></span></span></span>.</p>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>d</mi><mi>x</mi></msub><mo>(</mo><mi>y</mi><mo>)</mo><mo>=</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo>(</mo><mi>c</mi><mo>(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>v</mi><mo>)</mo><mo>+</mo><msub><mi>d</mi><mi>v</mi></msub><mo>(</mo><mi>y</mi><mo>)</mo><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">d_x(y) = min(c(x, v) + d_v(y))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">x</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">v</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span></span></span></span></span>\n<p>Minimum is taken over all neighbours <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span> of <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span>.</p>\n<p><strong>Distance Vector Algorithm</strong></p>\n<!-- NOTE: will be on final -->\n<p>Let <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>D</mi><mi>x</mi></msub><mo>(</mo><mi>y</mi><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">D_x(y)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">x</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span> be the estimate of least cost from <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> to <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span></span></span></span>. <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> maintains distance vector <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>D</mi><mi>x</mi></msub><mo>=</mo><mo>[</mo><msub><mi>D</mi><mi>x</mi></msub><mo>(</mo><mi>y</mi><mo>)</mo><mo>:</mo><mi>y</mi><mo>∈</mo><mi>N</mi><mo>]</mo></mrow><annotation encoding=\"application/x-tex\">D_x = [D_x(y): y \\in N]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">x</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">x</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7335400000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mclose\">]</span></span></span></span>.</p>\n<p>Node <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> knows cost to each neighbour <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span>, given by <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>c</mi><mo>(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>v</mi><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">c(x, v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span>. It also maintains its neighbours' distance vectors for each neighbour <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> maintains <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>D</mi><mi>v</mi></msub><mo>=</mo><mo>[</mo><msub><mi>D</mi><mi>v</mi></msub><mo>(</mo><mi>y</mi><mo>)</mo><mo>:</mo><mi>y</mi><mo>∈</mo><mi>N</mi><mo>]</mo></mrow><annotation encoding=\"application/x-tex\">D_v = [D_v(y): y \\in N]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">v</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">v</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7335400000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mclose\">]</span></span></span></span>.</p>\n<p><em>Key idea</em>:</p>\n<p>From time to time, each node sends its own distance vector estimate to neighbours. When <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">x</span></span></span></span> receives new distance vector estimate from neighbour, it updates its own distance vector using <strong>Bellman-Ford equation</strong>:</p>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi mathvariant=\"normal\">∀</mi><mi>y</mi><mo>∈</mo><mi>N</mi><mo separator=\"true\">,</mo><msub><mi>D</mi><mi>x</mi></msub><mo>(</mo><mi>y</mi><mo>)</mo><mo>=</mo><mi>m</mi><mi>i</mi><msub><mi>n</mi><mi>v</mi></msub><mo>(</mo><mi>c</mi><mo>(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>v</mi><mo>)</mo><mo>+</mo><msub><mi>D</mi><mi>v</mi></msub><mo>(</mo><mi>y</mi><mo>)</mo><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">\\forall y \\in N, D_x(y) = min_v(c(x, v) + D_v(y))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">x</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord\"><span class=\"mord mathdefault\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">v</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">c</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">v</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span></span></span></span></span>\n<p>Under minor, natural conditions, the estimate <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>D</mi><mi>x</mi></msub><mo>(</mo><mi>y</mi><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">D_x(y)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">x</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span> converges to the actual least cost <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>d</mi><mi>x</mi></msub><mo>(</mo><mi>y</mi><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">d_x(y)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">x</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span>.</p>","frontmatter":{"title":"Network layer control plane","date":"2019-03-04","description":"Chapter 5"},"fields":{"slug":"/cpsc441/lec4.1-network-layer-control-plane","category":"cpsc441"}}},{"node":{"id":"252314d9-8987-5413-b0dc-b0f3dd7db43a","html":"<p>Goals:</p>\n<ul>\n<li>\n<p>understand principles behind network layer services, focusing on data plane:</p>\n<ul>\n<li>forwarding vs. routing</li>\n<li>how a router works</li>\n<li>generalized forwarding</li>\n</ul>\n</li>\n<li>instantiation, implementation in the Internet</li>\n</ul>\n<p>Data layer &#x26; control plane functionality.</p>\n<p>Network layer is divided two sets of functionality <em>data plane</em> and <em>control plane</em>.</p>\n<p>Network layer provides single logical channel between two hosts. Responsibility of a network layer is to receive data packets, convert them to datagram and transport them to destination host.</p>\n<h2>Overview of a Network Layer</h2>\n<p>The role of the network layer is to move packets from sending host to receiving host. On <strong>sending side</strong>, it encapsulates segments into datagrams. On <strong>receiving side</strong>, it delivers segments to transport layer. Network layer protocols are implemented in <em>every</em> host, router. Router examines header fields in all IP datagrams that are passing through it.</p>\n<p><strong>Network-layer functions</strong>:</p>\n<ul>\n<li>\n<p><strong>Forwarding</strong>: When a packet arrives at a router's input link, the router must move thDetermine route taken by packets from source to destination.e packet to the appropriate output link. <em>Router-local</em> action of transferring a packet from an input link interface to the appropriate output link interface.</p>\n<ul>\n<li><em>Analogy</em>: process of getting through single interchange.</li>\n</ul>\n</li>\n<li>\n<p><strong>Routing</strong>: The network layer must determine the route or path taken by packets as they flow from a sender to a receiver. Routing refers to the <em>network-wide</em> process that determines the end-to-end paths that packets take from source to destination.</p>\n<ul>\n<li><em>Analogy</em>: process of planning a trip from source to destination.</li>\n</ul>\n</li>\n</ul>\n<p>Every router has a <strong>forwarding table</strong>. A router forwards a packet by examining the value of a field in the arriving packet's header, and then using this header value to index into the router's forwarding table. The value stored in the forwarding table entry for that header indicated the router's outgoing link interface to which that packet is to be forwarded.</p>\n<h3>Data Plane &#x26; Control Plane</h3>\n<p><strong>Data Plane</strong></p>\n<p>Data plane is in charge of local packets, per-router function, aka <em>local forwarding</em>. It determines how a datagram arriving on router's input port is forwarded to its output port. <strong>Forwarding function</strong> - the actual transfer of packets from a router's incoming links to the appropriate outgoing links at that router.</p>\n<p><strong>Control Plane</strong></p>\n<p>All about controlling the network, how to find the right path. Control plane implements network-wide logic. It determines how a datagram is routed among routers along end-end path from source to destination host.</p>\n<p>Two control plane approaches:</p>\n<ul>\n<li><em>Traditional routing algorithms</em>: implemented in routers (hardware).</li>\n<li><em>Software-defined network (SDN)</em>: implemented in (remote) servers.</li>\n</ul>\n<h4>Per-router control plane</h4>\n<p>Individual routing algorithm components in <strong>each and every router</strong> that interact in router plane. Every router configures routing (forwarding) table.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/e3e466d2a433001a917d31a53943f48d/9b36b/lec4-per-router-control-plane.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 56.390977443609025%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACWklEQVQoz12TWVMTQRSF88P8K75YPohvii9q4ZNVWlKFRfGiwgsSA+ICQgIhVAQhUCSyZd8m+yRkmcQQk5Bt5rMzIQicqq7bfXr69O1z7xgQ0DRNH32c12pkskUazYa+1i4Ht+JwPsRQwzBc9NHrqczP7fFq7Asry0f9DbRuT987dXjZMNmh2wFVHXzfauFzR6j+qV0JXxPUUEV4O7rAyJ1Rpp8Y6SWTVCMSnXKB9XkPE49WUTMpzsMRKqEwVU+Q8QdGfCdn4myber1xM8OuyHB/Ky0O+3BtJ6Ba5tjm4tfMMrENJy7TLi3PCaef17AbbVyUK7gPsihKk1A4QD6fvynYbreR/DkC7gJSuECr0yKbUIgLrpCrkIgUaHfbyLG84M5otNp4DmVKxTrBoJ9SqYShL6YKT/Qo/HJsKyytVHFsFfVLHDslvi+mOHSV+Tgt6Zxzv4RpNkHf3qk3XoL+GhcXNRqN5iDDIVRh4uxMiNcvw3z9FNM595GMwy4J83NsrgZ0zn+a4+daSIh02TQHSCcq/4siyzJSNCren6JeK7O5IvH8qYVZUe2BYByr5YiQL4XFfKJzh84wVvMxPWGRac5BOl25SshQLAq/pDgLJhdLNjf2bJBEMkU5Habe6VFstAjE4nizFbzeKBnRnlE5RyinkFaqVP/WuF4Hw7BRrRYFoznE5PEu0bjCutXF40kb9xfdvHeXeLiW5u6739z7FmRiL8XIBydj4jXRJpctd9nYurJ2u+8hU9fYip2z4FOYNB3wzJbkhafJ+A8fU5YgFllk31Sv/pCBjMY/bhsc02oh88YAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Per-router control plane\"\n        title=\"\"\n        src=\"/notes/static/e3e466d2a433001a917d31a53943f48d/623ee/lec4-per-router-control-plane.png\"\n        srcset=\"/notes/static/e3e466d2a433001a917d31a53943f48d/816c5/lec4-per-router-control-plane.png 148w,\n/notes/static/e3e466d2a433001a917d31a53943f48d/c766b/lec4-per-router-control-plane.png 295w,\n/notes/static/e3e466d2a433001a917d31a53943f48d/623ee/lec4-per-router-control-plane.png 590w,\n/notes/static/e3e466d2a433001a917d31a53943f48d/e5345/lec4-per-router-control-plane.png 885w,\n/notes/static/e3e466d2a433001a917d31a53943f48d/7a439/lec4-per-router-control-plane.png 1180w,\n/notes/static/e3e466d2a433001a917d31a53943f48d/9b36b/lec4-per-router-control-plane.png 1330w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<h4>Logically centralized control plane</h4>\n<p>A distinct (typically remote) controller interacts with local control agents (CAs). We separate control functionality and implement it in software in remote controller, e.g. NAS. Remote controller computes routing tables and sends them to other routers.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/12d4b805716ad57b7963e62941884969/63118/lec4-sdn.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 59.06515580736544%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACqUlEQVQoz02TW3PSUBDH+wF98UP45KsPjk86jg86jtPR1suoo7YqXsZab7VjKUxHRQtNAQsEAggkhYQ0XJJCgZDw85Day85sTmYv/z3/3T0zk8mEqfj+BN0YodVddmt9dv92qRdb1PMG9ZxOY3oWrcC+W+uhaiOcfU9kTphiHOnMEeBY+JJSBylSJbWUIHPzCYW5BZT5RZTZxxTmn1O484zMjYekl+IkVosC3Aly/0MEMjP97Ds2j5++IZNsYWwXUUs2mtKmEZdRUypmLIm8ZaDLDerxAkWljy2rxMISq+GNAGg4HJ4A2naX23N3cXs96DtMC7qeh7u3hyda4Votxv6UhcdY2MbTKwmA7V+/efjkGe12m2w2ewgYUBbqjl3SUobV9xtoepPRaIRRKGB32jTF6Yiig4MDGiKxPxxgVioY1Sq+KF8R/6qqHgL6vh80djCa8Oh6mFvnF/j2RQmcz+/+JPajxuL8d/J5i2ns3LV1dHNA9HOWdy//BHGWYOA4zgnlYMpCG9E4+ot3WHI1sP2JlqmVOqQjJfaaB3iC8tZKHqfnUUntUpB0TkswZVXV0DQNw+xSLnTomQ5qdZ+hN6G48pvKVhn5Ywyr2mQw9NgJReiYNrVYDmU99X/lfI62ZaYq+mDuafiuy1JI5srlb0SixcAZC+fIShVi6zKW3kU0lrXlJH17QHqzRPxH+fBm/uQEsN0ZEVqoMrv8nQeJn+S2d8huJ1Ga+0TSf1lXmix+kvgqqaRsn9VEnmhWR67pYtCjY6rHi90/cMnt2CSKddKGjiWoz4Y2OXd/gwvhGlfXypx9VeJMSOF8KMnFDzKX3mZIm4dg/umtPj2U02KLGFXs6VrG4N5KjteVIZ/FU1veVAlLJZpdh45lousGpmnSaDRotVpi9cb8A7MdaJdegeGJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Logically centralized control plane\"\n        title=\"\"\n        src=\"/notes/static/12d4b805716ad57b7963e62941884969/623ee/lec4-sdn.png\"\n        srcset=\"/notes/static/12d4b805716ad57b7963e62941884969/816c5/lec4-sdn.png 148w,\n/notes/static/12d4b805716ad57b7963e62941884969/c766b/lec4-sdn.png 295w,\n/notes/static/12d4b805716ad57b7963e62941884969/623ee/lec4-sdn.png 590w,\n/notes/static/12d4b805716ad57b7963e62941884969/e5345/lec4-sdn.png 885w,\n/notes/static/12d4b805716ad57b7963e62941884969/7a439/lec4-sdn.png 1180w,\n/notes/static/12d4b805716ad57b7963e62941884969/63118/lec4-sdn.png 1412w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>A switch/router in this scenario is \"dumb\", e.g. doesn't rely on hardware control plane implementation, rather makes use of software.</p>\n<h2>Router Architecture Overview</h2>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/bbe733b75331a0c75cf4e63e96bfd6d2/3e3c2/lec4-router-architecture.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 53.216374269005854%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACB0lEQVQoz2WTCXOiQBCF+f//KMdWyt3ERN1E0TWrQEB0g6BRBA9Qjm97IEnl6Kqugpk3b7rf69HKsuQtUSlR5jmoVHE6URZFvf4RWy/A4UCZprDbVd/aV2CmNpdLFqaJ1e2STKewXqMoyuIzYfT4SHB2xvr6GuPqit75OVpdWX1hVhYsfZ9isWCk67QvLvAsC1arV0j5XlghVXuzGbZtM/c8rtttfrZaaFmWsdtvCaMDa29B+PxcEWbDIYWAMschl/8kDImWEdF2zyHZo0TIooij65IK8UY62ozHaHPf4/L3D266I8zmAOPynERIqzgeKw1j+4lJ847BryGN7gN3gyZpeiSNY8xej7+dDk/9PqP7e7RUNFuHK6b/RDfXIxiPKESzk9JT2spl/yQVxvM5njNn9uyz3cbkWW2awgSi+c3tLVeNRm1KLo7G0aYC7ONtZUJLbm0IwBLhkUpUFGVO9Ir75Da1ppl0UxEWuZixeCFNUqIgqEZgIu42m01CMUlYqkO7eMfLcv1O8m2MJLRwE9IzdfSxy6xv4bXvOPpBfesrSGkaDAY4PRvdsOhbPZIk+UaqUvMDn86ww8MfSw4Y+HqXdDIBcVW1jlS8Fyfn4rqj2wxMm74UcJAhfiP8GNpUWpu6Uxx7gjE2ZORWNVAcLtUrUU5L+GKKaciwm0+4josl86kM/Ur6HxwiQBGkvPr+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Router architecture\"\n        title=\"\"\n        src=\"/notes/static/bbe733b75331a0c75cf4e63e96bfd6d2/623ee/lec4-router-architecture.png\"\n        srcset=\"/notes/static/bbe733b75331a0c75cf4e63e96bfd6d2/816c5/lec4-router-architecture.png 148w,\n/notes/static/bbe733b75331a0c75cf4e63e96bfd6d2/c766b/lec4-router-architecture.png 295w,\n/notes/static/bbe733b75331a0c75cf4e63e96bfd6d2/623ee/lec4-router-architecture.png 590w,\n/notes/static/bbe733b75331a0c75cf4e63e96bfd6d2/e5345/lec4-router-architecture.png 885w,\n/notes/static/bbe733b75331a0c75cf4e63e96bfd6d2/7a439/lec4-router-architecture.png 1180w,\n/notes/static/bbe733b75331a0c75cf4e63e96bfd6d2/3e3c2/lec4-router-architecture.png 1368w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<ul>\n<li><em>Switching fabric</em> - The switching fabric connects the router's input ports to its output ports. The switching fabric is completely contained within the router.</li>\n<li><em>Output ports</em> - An output port stores packets received from the switching fabric and transmits these packets on the outgoing link by performing the necessary link-layer and physical-layer functions.</li>\n<li><em>Routing processor</em> - The routing processor executes the routing protocols, maintains routing tables and attached link state information, and computes the routing table for the router.</li>\n</ul>\n<p><strong>Input ports functions</strong>:</p>\n<p>At the input port the router has to implement three things; a physical layer, link layer and a network layer. Each of them has its own copy of forwarding table, that makes these ports to work independently from each other.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/c0a6b021f13cdec1bdee541e3470cd54/07bf4/lec4-input-port.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 32.849364791288565%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABkElEQVQoz22RS0/bUBSE84tbVd2wZtHyV1izqpCgUhtVRCExcaBx7DyKCY4f8fP6cePH1+sUdh1pdO6VRnPOaAZVVSGEIM/zE8XbrKqCsswpixwpCwqlKaIImaZUcYxQrOuapmnoPXp0XccgFzm06tN2tE3/ULPucJyCIDgSHiQvjqTcuVTGgv3DjNQ0qddrcmXetu3JsDc7GSYiwQ5tvMwjyAPcdI8dOERRx2bzjG2/EGVQ7QJ+r0y+jcfc6jqBZdGoJJ26TErJOwbWHws/8/E8j6k2VYKWp+0S1xWMRnfMdU0Ztux0g8PXL+zOz3EuLtheXqoUDr7vkyQJw+GQyWTCwFgbjPQ7xpN7fvz6yb02Zr41WJo7bm6u+X57zZPxTOkc4PMn+PARzs5orq7wwxCRZWQq+lhdvlgsGIhC8Bq/4sV7XN9WkV3cJMSyDsxmBo/zJXPDQ9oe25nGg6YxnU7xFP8buW+0R6u2IY//2kpSsvhIqcqrSkiVpIkSSstErFbkmw1ClVIWBc1bKe8t/wW0agfZj8wPsAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Input port\"\n        title=\"\"\n        src=\"/notes/static/c0a6b021f13cdec1bdee541e3470cd54/623ee/lec4-input-port.png\"\n        srcset=\"/notes/static/c0a6b021f13cdec1bdee541e3470cd54/816c5/lec4-input-port.png 148w,\n/notes/static/c0a6b021f13cdec1bdee541e3470cd54/c766b/lec4-input-port.png 295w,\n/notes/static/c0a6b021f13cdec1bdee541e3470cd54/623ee/lec4-input-port.png 590w,\n/notes/static/c0a6b021f13cdec1bdee541e3470cd54/e5345/lec4-input-port.png 885w,\n/notes/static/c0a6b021f13cdec1bdee541e3470cd54/07bf4/lec4-input-port.png 1102w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<ul>\n<li><strong>Physical layer</strong>: bit level reception</li>\n<li><strong>Data link layer</strong>: e.g. Ethernet</li>\n<li>\n<p><strong>Decentralized switching</strong>:</p>\n<ul>\n<li>Using header field values, lookup output port using forwarding table in input port memory.</li>\n<li>Queuing: if datagrams arrive faster than forwarding rate into switch fabric</li>\n<li><em>Destination-based forwarding</em>: forward based only on IP address (traditional).</li>\n<li><em>Generalized forwarding</em>: forward based on any set of header field values.</li>\n</ul>\n</li>\n</ul>\n<p><strong>Destination-based forwarding</strong>:</p>\n<p>Forwarding table:</p>\n<table>\n<thead>\n<tr>\n<th>Destination</th>\n<th>Interface</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>IP</td>\n<td>0</td>\n</tr>\n<tr>\n<td>...</td>\n<td>...</td>\n</tr>\n</tbody>\n</table>\n<p>There are <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mn>2</mn><mn>3</mn></msup><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2^32</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span><span class=\"mord\">2</span></span></span></span> IP addresses. Therefore we will need to store all of them in a table, which is <em>not feasible</em>.</p>\n<p>Instead, store ranges of destinations, e.g.:</p>\n<table>\n<thead>\n<tr>\n<th>Destination Address Range</th>\n<th>Interface</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>11001000 00010111 00010000 00000000 to 11001000 00010111 00010111 11111111</td>\n<td>0</td>\n</tr>\n<tr>\n<td>11001000 00010111 00011000 00000000 to 11001000 00010111 00011000 11111111</td>\n<td>1</td>\n</tr>\n<tr>\n<td>11001000 00010111 00011000 00000000 to 11001000 00010111 00011111 11111111</td>\n<td>2</td>\n</tr>\n<tr>\n<td>otherwise</td>\n<td>3</td>\n</tr>\n</tbody>\n</table>\n<p><mark>Longest prefix matching</mark>: when looking for forwarding table entry for given destination address, use <strong>longest</strong> address prefix that matches destination address.</p>\n<table>\n<thead>\n<tr>\n<th>Destination Address Range</th>\n<th>Interface</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">11001000 00010111 00010*** *********</code></td>\n<td>0</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">11001000 00010111 00011000 *********</code></td>\n<td>1</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">11001000 00010111 00011*** *********</code></td>\n<td>2</td>\n</tr>\n<tr>\n<td>otherwise</td>\n<td>3</td>\n</tr>\n</tbody>\n</table>\n<h3>Switching Fabrics</h3>\n<p>Transfer packet from input buffer to appropriate output buffer. <strong>Switching rate</strong>: rate at which packets can be transferred from inputs to outputs. There are three types of switching fabrics:</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/0f66de3e6123247fbbaa8c2fa14c11ab/a04fb/lec4-switching-fabrics.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 31.714719271623675%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABW0lEQVQY002Qa0vCcBjF9/2hr9GbXmQRlUIwyK22cl5Gpc7rpu7idLqLk9r89VcqeuDh8JwDh+ccKc9zXM9nZTuUQQDrNVGwIs5SjuPMHAbWgOV0SuguSXbZifd8n7f2G85wiOc45NstFAWSPZ9SublDu6hgas9MFIX6dY3HF43i6xOloSNfV9HPzri9vOVRV+EAvfGA6lWNRcMg1jTchwdwXaQoiXhtmswVnTiKsJsGcuUOWVVIk5j3scWH1sI7P6cuK2jGC+VXwWg+QavrJH2LwuwQyDKIhNIm2WCI1z2jA5sIRMSu3sayJ6dovfGIbsMka7fptj5w/MWJ96OQUW9MNrVZqk8MqjVyYS7xM/v9nmG/z2I2+6U4HA4nLMsSLwz/7iMGokPbsQmWIar8zP1NjYZiIB3F4xai0DTLyHY7frn/WpamAss/01Tc8TYmSRM6XRNVf2IoavgG8qi3aO9ww9sAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Switching fabrics\"\n        title=\"\"\n        src=\"/notes/static/0f66de3e6123247fbbaa8c2fa14c11ab/623ee/lec4-switching-fabrics.png\"\n        srcset=\"/notes/static/0f66de3e6123247fbbaa8c2fa14c11ab/816c5/lec4-switching-fabrics.png 148w,\n/notes/static/0f66de3e6123247fbbaa8c2fa14c11ab/c766b/lec4-switching-fabrics.png 295w,\n/notes/static/0f66de3e6123247fbbaa8c2fa14c11ab/623ee/lec4-switching-fabrics.png 590w,\n/notes/static/0f66de3e6123247fbbaa8c2fa14c11ab/e5345/lec4-switching-fabrics.png 885w,\n/notes/static/0f66de3e6123247fbbaa8c2fa14c11ab/7a439/lec4-switching-fabrics.png 1180w,\n/notes/static/0f66de3e6123247fbbaa8c2fa14c11ab/a04fb/lec4-switching-fabrics.png 1318w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<ul>\n<li><strong>Bus</strong>: In this approach, an input port transfers a packet directly to the output port over a shared bus, without intervention by the routing processor.</li>\n<li><strong>Memory</strong>: Implemented in software</li>\n<li><strong>Crossbar</strong>: Hardware controller that enables appropriate buses for a packet.</li>\n</ul>\n<h4>Output ports</h4>\n<p>Packet loss can happen at both input ports and output ports.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/6930340377a05b4bf582d896989f31f3/ab0f9/lec4-output-ports.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 37.35537190082645%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABbUlEQVQoz2WRy27bMBBF/b/5g/YXsm2X7WdkXSBAGzS7xIER24lcypH1oBRJ5ksPn46UxEDRIQbDIYnLO/cuTqcTUxhjGMeRruvwTcMgfde2OKlHY2kaQ9sarLV458/pnCOEMGNMWAveI89z3ASWpujVis3vW17u77CR4pBY6mYgyzxlFXDBYoPDeit7x/F4nMlMsZia9XrNbrdjOhoOB4ww+3F9zXOspNdUuSXNXhh6WP9J0KYgfZWPj5q0Tana6o2hrBkwiiKetlsSYaeWS8LlJVxcwOdPNL9u5T7j5uYnSh1Ybp5pRZLH1SNK2Ou65GHzQJEXjKfx35Fb0csoeXR1xfbLV56+f8OttqRJTbTbyOg5+/yVWCv2eo/KFXEZk+ls1n7W8MOUPJPDYZg1dLJvtKYtCnyczBoW2pGmjrL0dL0Y0r1l6ANWTPuIM2BVVfR9T5CfXF0TZKwgdXLZGCcO2zmtdf+57L0/u/wXhxwR9GN1KeUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Output ports\"\n        title=\"\"\n        src=\"/notes/static/6930340377a05b4bf582d896989f31f3/623ee/lec4-output-ports.png\"\n        srcset=\"/notes/static/6930340377a05b4bf582d896989f31f3/816c5/lec4-output-ports.png 148w,\n/notes/static/6930340377a05b4bf582d896989f31f3/c766b/lec4-output-ports.png 295w,\n/notes/static/6930340377a05b4bf582d896989f31f3/623ee/lec4-output-ports.png 590w,\n/notes/static/6930340377a05b4bf582d896989f31f3/e5345/lec4-output-ports.png 885w,\n/notes/static/6930340377a05b4bf582d896989f31f3/7a439/lec4-output-ports.png 1180w,\n/notes/static/6930340377a05b4bf582d896989f31f3/ab0f9/lec4-output-ports.png 1210w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p><strong>Buffering</strong> required from fabric faster rate. Most of buffering is happening at output ports. Datagram (packets) can be lost due to congestion, lack of buffers. Buffering happening because capacity is less than amount of incoming traffic. <strong>Scheduling</strong> datagrams. Priority scheduling - who gets best performance, network neutrality. Net neutrality - do not discriminate packets based on sender.</p>\n<p><strong>What is the right amount of buffer size?</strong></p>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>m</mi><mi>a</mi><mi>x</mi><mi>t</mi><mi>p</mi><mi>u</mi><mi>t</mi><mo>=</mo><mi>C</mi><mo>=</mo><mfrac><mi>W</mi><mrow><mi>R</mi><mi>T</mi><mi>T</mi></mrow></mfrac><mspace linebreak=\"newline\"></mspace><mi>m</mi><mi>a</mi><mi>x</mi><mi>W</mi><mo>=</mo><mi>C</mi><mo>⋅</mo><mi>R</mi><mi>T</mi><mi>T</mi><mtext> (Delay bandwidth (DB)) </mtext></mrow><annotation encoding=\"application/x-tex\">max tput = C = \\frac{W}{RTT} \\\\\nmax W = C \\cdot RTT \\text{ (Delay bandwidth (DB)) }</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.80952em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">x</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.04633em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">x</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">W</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord text\"><span class=\"mord\"> (Delay bandwidth (DB)) </span></span></span></span></span></span>\n<p>RFC 3439 rule of thumb: average buffering equals to <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">RTT</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span> times link capacity <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span></span></span></span>, aka <strong>Delay-Bandwidth Product</strong>.</p>\n<h2>IP: Internet Protocol</h2>\n<p>Internet Protocol is simple but important protocol.</p>","frontmatter":{"title":"Network Layer","date":"2019-02-11","description":""},"fields":{"slug":"/cpsc441/lec4-network-layer","category":"cpsc441"}}},{"node":{"id":"bbdca9ad-3dad-5ee3-8683-9076cd997d85","html":"<p>A transport layer protocol provides for <strong>logical communication</strong>. <em>Logical communication</em> means that from an application's perpective, it is as if the hosts running the processes were directly connected; in reality, the hosts may be far away from each other, connected via numerous routers. Application processes use the logical communication provided by the transport layer to send messages to each other, without having to worry about physical infrastructure used to deliver these messages.</p>\n<p>Transport layer protocols are implemented in the end systems, but not in networks routers:</p>\n<ul>\n<li>On the <em>sending side</em>, the transport layer converts the application layer messages it receives from a sending application process into transport layer <strong>segments</strong>.</li>\n<li>On the <em>receiving side</em>, the network layer extracts the transport layer segment from the datagram and passes the segment up to the transport layer. The transport layer then processes the received segment and sends it to the receiving application.</li>\n</ul>\n<p>There are more than one transport protocol available to applications. The ones that are used in the Internet are TCP and UDP.</p>\n<p><strong>Relationship between transport and network layers</strong>:</p>\n<ul>\n<li><em>Network layer</em>: logical communication between hosts.</li>\n<li><em>Transport layer</em>: logical communication between processes. It relies on and enhances network layer services.</li>\n</ul>\n<h2>Overview of the Transport Layer in the Internet</h2>\n<p>The Internet makes two distinct transport layer protocols available to the application level. One of those is <strong>UDP</strong> (User Datagram Protocol), which provides unreliable, connectionless service to the invoking application. The second one is <strong>TCP</strong> (Transmission Control Protocol), which provides a reliable, connection oriented service to the invoking application. When designing a network application, an application developer must specify one of these two protocols.</p>\n<p>The Internet’s network-layer protocol has a name—IP, for Internet Protocol. IP provides logical communication between hosts. The IP service model is a <strong>best-effort delivery service</strong>. This means that IP makes its “best effort” to deliver segments between communicating hosts, <em>but it makes no guarantees</em>. In particular, it doesn't guarantee segment delivery, it doesn't guarantee orderly delivery of segments, and it doesn't guarantee the integrity of the data in the segments. For these reasons the IP is said to be an <strong>unreliable service</strong>.</p>\n<p>The most fundamental responsibility of UDP and TCP is to extend IP’s <em>delivery service</em> between two end systems to a delivery service between two processes running on the end systems. Extending host-to-host delivery to process-to-process delivery is called <strong>transport-layer multiplexing</strong> and <strong>demultiplexing</strong>.</p>\n<h2>Multiplexing and demultiplexing</h2>\n<p>At the destination host, the transport layer has the responsibility of delivering the data in the received segments. Each received transport-layer segment has a set of fields in the segment to determine appropriate socket for each segment. At the receiving end, the transport layer examines these fields to identify receiving sockets and direct segments to those sockets.</p>\n<p><strong>Demultiplexing</strong> is the process of delivering the data in a transport-layer segment to the correct socket. The job of gathering data chunks at the source host from different sockets, encapsulating each data chunk with header information, that later will be used in <em>demultiplexing</em>, to create segments, and passing the segments to the network layers is called <strong>multiplexing</strong>.</p>\n<p>In a host, transport-layer multiplexing requires:</p>\n<ol>\n<li>that sockets have unique identifiers</li>\n<li>that each segment have special fields taht indicate the socket to which the segment is to be delivered</li>\n</ol>\n<p>Therefore, a <strong>source port number</strong> and <strong>destination port number</strong> is specified in a segment. Each port number is a 16-bit number. The port numbers ranging from 0 to 1023 are reserved and called <strong>well-known port numbers</strong>.</p>\n<p>Each socket in the host could be assigned a port number, and when a segment arrives at the host, the transport layer examines the destination port number in the segment and directs the segment to the corresponding socket. The segment's data then passes through the socket into the attacked process.</p>\n<p>Mux/demux communication:</p>\n<ul>\n<li>one-to-many communication, with UDP server</li>\n<li>\n<p>one-to-many communication, TCP communication:</p>\n<ul>\n<li>TCP: one socket to one client</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li><strong>Multiplexing (mux) at sender</strong>: handle data from multiple sockets, add transport header (later used for demultiplexing).</li>\n<li><strong>Demultiplexing (demux) at receiver</strong>: use header info to deliver received segments to correct sockets.</li>\n</ul>\n<p><strong>How demultiplexing works?</strong></p>\n<p>Host receives IP datagrams:</p>\n<ul>\n<li>each datagram has source IP address, destination IP address</li>\n<li>each datagram carries one transport-layer segment</li>\n<li>each segment has source port and destination port</li>\n</ul>\n<p>Host uses <strong>IP addresses &#x26; port numbers</strong> to direct segment to appropriate socket.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/b50fd78c9047b38708ee4edba075296f/045f1/lec3-tcp-udp-segment-format.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 572px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 113.98601398601397%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABYlAAAWJQFJUiTwAAADX0lEQVQ4y61V21IaWRTld/MJeUxlCElqZvIJsaJ58CFT5SVaKpII0cKEbrpFQC7dzR1EUECRO2v2Ok0TzcxD5nKqVu2zz9nssy9rN77hcAhgLJgKJgtQl92kj2rVQbtdh2WlMZsN4a7xA1sPI3XjK5dr2NyKYWfHFBjY2TWxva3j81EOh6ELvF3Zx4c/ovj9zToOgil8+pTB9sf40pb4KPrGZgy92wl8llVG4NWR4IsggkAgjMDLCPyBIzx/FsTLF0d4+nQbr15/gf+XEPyiv/B/RkB0Sv/zEH77NYInTzblcRO+aq0KWEkgYwIpDajkgXIOiEWAVhm4KqHXrbuZ5hPA1zBQs4C0Dtjyu2JGLnqwSy2srerwZTIZZHQDNmEmBOewYnFYugknm0fRcmDKuWMX4Jwl1Z0tMv9Ng5NMw05n0WxUpQxf8e6dOCyVSuhLYybzOUbTKYbjMYaTicJI9gO5Y+OUFH08m7k2C9vByG3GaTSP1bW4pFytYjqd4t+u+WyuZDxewtqaAV+lUsF47NKEkezv7yMUCuH09BQsRyQSwfHxMba2tpBIJBCLxbC7u6v0YrG4dKxpRXEoEdZqNczn8wXvJri4uBDOWbBtG71eTzlNpVI4OzvD5eUlWq2W0olms7l0aBgVN0LHcXB9fY3b21sFOmXEI6nN/f292vOMZRkMBgrUCe47na4QfiSZpLG6KhHmcjkwbb7WaDRQr9eXoM4MuPfkQxt335BAbnBwoItD3U35/1imWf1rU2ZCCdaT6THidrut6nl1dQXSi4+zrrTx4DFE0wpuU+iQ9VAUWDSHD6yvr6tOBoNBhMPhZWfZDM+WYBBcul78e4ceuFgj0ufk5ETtl9xb3HtZ/bTDfr+v6EKnTNuj1j+K0DMgHzc2NqR7B4rce3t7Km1292G9f9ohI8pmsygUCipdTgWbcnd39yjC6fS7w/fvjceT8l+WrpexsiI85Ih1Oh1VL29aPJAiP+JHm263J1GOhDY5KUkKPo4do+SMknc3NzePJNHtdtV48uGH5zyjTjSbl8qxzwv5/Pwc0WhUcY6dPTw8VF8WzjplMpmUT1RcJsJU94ZhqN9omqbO+aj6k/KawAjZhHQ6rSSNGDkd8pOm67pyxE8Yy8QJoh112jJ9rj8Bkr6aOZP24J0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"TCP/UDP segment format\"\n        title=\"\"\n        src=\"/notes/static/b50fd78c9047b38708ee4edba075296f/045f1/lec3-tcp-udp-segment-format.png\"\n        srcset=\"/notes/static/b50fd78c9047b38708ee4edba075296f/f9159/lec3-tcp-udp-segment-format.png 148w,\n/notes/static/b50fd78c9047b38708ee4edba075296f/2b72c/lec3-tcp-udp-segment-format.png 295w,\n/notes/static/b50fd78c9047b38708ee4edba075296f/045f1/lec3-tcp-udp-segment-format.png 572w\"\n        sizes=\"(max-width: 572px) 100vw, 572px\"\n      />\n  </span>\n  </a></p>\n<h3>Connectionless multiplexing and demultiplexing</h3>\n<blockquote>\n<p>Connectionless multiplexing and demultiplexing is done using UDP protocol</p>\n</blockquote>\n<p>Suppose a process in Host A, with UDP port 19157, wants to send a chunk of application data to a process with UDP port 46428 in Host B. The transport layer in Host A creates a transport-layer segment that includes the application data, the source port number, the destination port number, and two other values. The transport layer then passes the resulting segment to the network layer. The network layer encapsulates the segment in an IP datagram and makes a best effort attempt to deliver the segment to the receiving host. If the segment arrives at the receiving Host B, the trasnport layer at the receiving host examines the destination port number and deliveres the segment to its socket identified by destination port. As UDP segments arrive from the network, Host B directs, or <em>demultiplexes</em>, each segment to the appropriate socket by examining the segment's destination port number.</p>\n<p>The source port number serves as part of a \"return address\" - when B wants to send a segment back to A, the destination port in the B-to-A segment will take its value from the source port value of the A-to-B segment.</p>\n<h3>Connection-oriented multiplexing and demultiplexing</h3>\n<blockquote>\n<p>Connection-oriented multiplexing and demultiplexing is done using TCP protocol</p>\n</blockquote>\n<p>A TCP socket is identified by a four-tuple: (source IP, source port, destination IP, destination port). Thus when a TCP segment arrives from the network to a host, the host uses all four values to direct, or <em>demultiplex</em>, the segment to the appropriate socket. In contrast with UDP, two arriving TCP segments with different IP addresses or source ports will be directed to two different sockets.</p>\n<p>Server host may support many simultaneous TCP sockets since with each socket attached to a process and with each socket identified by its own four-tuple. When a TCP segment arrives at the host, all four fileds are used to direct the segment to appropriate socket.</p>\n<h2>Connectionless transport: UDP</h2>\n<p>UDP does as little as a transport protocol can do. Aside from multiplexing/demultiplexing function and some light error checking it adds nothing to IP. UDP takes messages from application process, attaches source and destination port number fields for multiplexing/demultiplexing service and two other small fields, and passes the resulting segment to the network layer. The network layer then encapsulates the transport layer segment into an IP datagram and then makes the <strong>best effort</strong> attempt to deliver the segment to the receiving host. If the segment arrives at the receiving host, UDP uses the destination port to deliver the segment's data to the correct application process. <em>Note</em> since that there is no handshaking between sending and receiving transport layer entities, UDP is said to be <strong>connectionless</strong>.</p>\n<p>For some application UDP is better suited for following reasons:</p>\n<ul>\n<li><em>Finer application-level control over what data is sent and when</em>. As soon as an application process passes data to UDP, UDP will package the data inside a UDP segment and immediately pass the segment to network layer. Useful when building real-time applications, since we do not want delay segment transition and can tolerate some data loss. TCP will not be good fit due to its congestion control and packet delivery guarantee (p.199).</li>\n<li><em>UDP doesn't establish connection, therefore less or no delay</em>. In case with TCP there's a three-way handshake before the data is transferred. UDP simply sends the data. Thus UDP does not introduce any delay to establish a connection. (hence why DNS is using UDP rather than TCP - DNS would be much slower if it ran over TCP).</li>\n<li><em>No connection state</em>. TCP maintains connection state in the end systems. State information is needed for TCP congestion control. UDP on the other hand does not track any of parameters.</li>\n<li><em>Smaller header size</em>. TCP segment has <mark><strong>20 bytes</strong></mark> of overhead, UDP has only <mark><strong>8 bytes</strong></mark></li>\n</ul>\n<h3>UDP Segement Structure</h3>\n<p>The UDP header has only four fields, each consulting of 2 byes:</p>\n<ul>\n<li>Source port number</li>\n<li>Destination port number</li>\n<li>Length field, specifies number of bytes in UDP segment (header + data)</li>\n<li>Checksum, used by the receiving host for error checking</li>\n</ul>\n<h4>UDP Checksum</h4>\n<p>The goal of checksum is to detect errors in transmitted sender. The checksum is used to determine whether bits within the UDP segment have been altered. UDP at the sender performs <strong>1s complement of the sum of all the 16bit words in a segment</strong> with any overflow encountered during the sum being wrapped around. The result is put in a checsum field.</p>\n<p>For example, calculation of checksum at <em>sender</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">     1 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0\n+    1 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1\n     - - - - - - - - - - - - - - - -\n   1 1 0 1 1 1 0 1 1 1 0 1 1 1 0 1 1   // wrap around extra 1\n+                                  1\n     - - - - - - - - - - - - - - - -\nsum  1 0 1 1 1 0 1 1 1 0 1 1 1 1 0 0\ncsum 0 1 0 0 0 1 0 0 0 1 0 0 0 0 1 1</code></pre></div>\n<p>UDP provides a checksum because there is no guarantee that all the links between source and destination provide error checking.</p>\n<p><strong>Sender</strong>:</p>\n<ul>\n<li>Treat segment contents, including header fields, as sequence of 16-bit integers</li>\n<li>Checksum: addition (one's complement sum) of segment contents</li>\n<li>Sender puts checksum value into UDP checksum field</li>\n</ul>\n<p><strong>Receiver</strong>:</p>\n<p>At the receiver, 16bit words are added, including the checksum. If no errors are introduced into the packet, then the sum at the receiver will be all 1's. If one of the bits is a 0, then we know that there is an error</p>\n<p>Checking checksum at the receiver:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">     1 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0\n+    1 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1\n     0 1 0 0 0 1 0 0 0 1 0 0 0 0 1 1\n     - - - - - - - - - - - - - - - -\n   1 1 0 1 1 1 0 1 1 1 0 1 1 1 0 1 1   // wrap around extra 1\n+                                  1\n     - - - - - - - - - - - - - - - -\n     1 0 1 1 1 0 1 1 1 0 1 1 1 1 0 0\n+    0 1 0 0 0 1 0 0 0 1 0 0 0 0 1 1\n     - - - - - - - - - - - - - - - -\n     1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</code></pre></div>\n<h2>Principles of reliable data transfer</h2>\n<p>It is the responsibility of <strong>reliable data transfer protocol (rdt)</strong> to implement service abstraction.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/4ec8b7e10730046f530e5bc1b5ac233f/63118/lec3-rdt-principle.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 48.15864022662889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABxUlEQVQoz41SaW+bQBDl//+NfqkUya4qJa4Uxwm+oBRIAthRfNWAzRqcJo5jTgOvs1iO0qpNO9JoZndn37w5hLIs8S/5n5ijCA/rdeVEcYKQNM8LpCn3Q8RkOdjvij/cHVVwXBf7PEdTbOPkrAnL8XFt6Phy2URL7SDJ9weW7zB+exJin6HMMigX55Abp0h3O4y1bxA/1eDaNgpiWv4IUDwEyPwlyu1T9TENfGRBgPLxsdIijpEXBQQOwMXQNXzttDE0bmFoKlSpjzjcYTJ38PlSRqOr4UOtgXpLRpQkOKl/RP20Bknro6/1YN5bSKllwuz7rALMiGVEWRIKTtIUMVkutrvAebsLSb+FbloQh3O4LMCNeYOeIkOh5LKpQZmZh5I3m6e/TownmY1GUDoiruU+5KsWup0uNs/PuGicQRKvYKgqdAKe2NMD4HsrwIf1sg6Q+Cuw+zvcEehQ6oEtFhiSP1IVOAMLEfMQUh+rHr5+3u8rRimVm2VpZQsCPMpmu4U1GGA0HmNgWZhMpzAJjK1Wv+5hTH0LwxCMMSyXCzg0WZdWybbnCGiKCb1vqUTmeRTjIfB9eN4SS2LJz9zyd44TRRF+AtGM7nFdC8tnAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Principle of RDT\"\n        title=\"\"\n        src=\"/notes/static/4ec8b7e10730046f530e5bc1b5ac233f/623ee/lec3-rdt-principle.png\"\n        srcset=\"/notes/static/4ec8b7e10730046f530e5bc1b5ac233f/816c5/lec3-rdt-principle.png 148w,\n/notes/static/4ec8b7e10730046f530e5bc1b5ac233f/c766b/lec3-rdt-principle.png 295w,\n/notes/static/4ec8b7e10730046f530e5bc1b5ac233f/623ee/lec3-rdt-principle.png 590w,\n/notes/static/4ec8b7e10730046f530e5bc1b5ac233f/e5345/lec3-rdt-principle.png 885w,\n/notes/static/4ec8b7e10730046f530e5bc1b5ac233f/7a439/lec3-rdt-principle.png 1180w,\n/notes/static/4ec8b7e10730046f530e5bc1b5ac233f/63118/lec3-rdt-principle.png 1412w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<ul>\n<li><code class=\"language-text\">rdt_send()</code>: Called from layer above (application layer). Passed data to deliver to receiver upper layer.</li>\n<li><code class=\"language-text\">deliver_data()</code>: Called by <strong>rdt</strong> to deliver data to upper layer.</li>\n<li><code class=\"language-text\">udt_send()</code>: Called by rdt to transfer packet over unreliable channel to receiver.</li>\n<li><code class=\"language-text\">rdt_rcv()</code>: Called when packet arrives from the receiving side of the channel.</li>\n</ul>\n<h3>RDT 1.0: reliable transfer over a reliable channel</h3>\n<p>The sending side of rdt simply accepts data from upper layer via <code class=\"language-text\">rdt_send(data)</code>, creates a packet via <code class=\"language-text\">make_pkt(data)</code> and sends the packet into the channel, using <code class=\"language-text\">udt_send(packet)</code>. On the receiving side, rdt receives a packet from the underlying channel via <code class=\"language-text\">rdt_rcv(packet)</code>, extracts the packet and delivers the data from the packet to the upper layer.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/78bf482fc60016b5caa676218e3e3e4a/e7062/lec3-rdt1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 26.1455525606469%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA40lEQVQY001Q24qDQAz1/z/LF58U2aqw1boqqChFC1pvM+PZJHSkgTDJnAtJHGMMpmnCMAyY5xlaaxzHgXVdoZSCjfM8sW0bxnGU3Pf94nJtw2FiFEXwPA9lWSLPc6RpijiO0TSNCJZlEXLf93BdVzDm+r6PIAhEW9e1GDtM7LpOTPitqgo3EtypD8MQWZahbVsxZGPui6JA/3wifTzwR3WSJKK/DHl0JmtaX/NErxfelPzHG9iVOXhiRWlofU244Zp0FndsYUPTfdafG46ivIxOEnyb0gRYf+9Y6FSKbv8BBf8HaZp8yAPYDh4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"RDT1.0 FSM\"\n        title=\"\"\n        src=\"/notes/static/78bf482fc60016b5caa676218e3e3e4a/623ee/lec3-rdt1.png\"\n        srcset=\"/notes/static/78bf482fc60016b5caa676218e3e3e4a/816c5/lec3-rdt1.png 148w,\n/notes/static/78bf482fc60016b5caa676218e3e3e4a/c766b/lec3-rdt1.png 295w,\n/notes/static/78bf482fc60016b5caa676218e3e3e4a/623ee/lec3-rdt1.png 590w,\n/notes/static/78bf482fc60016b5caa676218e3e3e4a/e5345/lec3-rdt1.png 885w,\n/notes/static/78bf482fc60016b5caa676218e3e3e4a/7a439/lec3-rdt1.png 1180w,\n/notes/static/78bf482fc60016b5caa676218e3e3e4a/e7062/lec3-rdt1.png 1484w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>In this protocol there is no difference between a unit o data and a packet. All packet flow is from the sender to receiver; with a reliable channel, there is no need for receiver to provide feedback to the sender since nothing can go wrong.</p>\n<h3>RDT 2.0: channel with bit errors</h3>\n<ul>\n<li>In real life there are probabilities that checksum will get corrupted, but for this example, checksum is perfect.</li>\n<li>\n<p>Add a sequence number to packets to deal with packet duplicates</p>\n<ul>\n<li>checksum will detect sequence number corruption</li>\n<li>only two sequence numbers are needed (0 &#x26; 1)</li>\n</ul>\n</li>\n</ul>\n<h4>Flaw</h4>\n<p>What happens if ACK/NAK corrupted?</p>\n<ul>\n<li>sender doesn't know what happened at the receiver</li>\n<li>can't just retransmit possible duplicate</li>\n</ul>\n<p>To handle duplicate packets:</p>\n<ul>\n<li>sender retransmits current packet if ACK/NAK corrupted</li>\n<li>sender adds <strong>sequence number</strong> to each packet</li>\n<li>receiver discards (doesn't deliver up) duplicate packet</li>\n</ul>\n<h3>RDT 2.1</h3>\n<p>Protocol <code class=\"language-text\">rdt2.1</code> uses both positive and negative acknowledgments from the receiver to sender.</p>\n<ul>\n<li>When an out-of-order packet is received, the receiver sends an <code class=\"language-text\">ack</code> for the packet it has received</li>\n<li>When a corrupted packet is received, the receiver sends a <code class=\"language-text\">nak</code></li>\n</ul>\n<p>The protocol uses 1-bit sequence number, it allows the receiver whether the sender is resending the previously transmitted packed (the sequence number of the received packet has the same sequence number as the recently received packet) or a new packet (the sequence number changes).</p>\n<h3>RDT 2.2: a NAK-free protocol</h3>\n<p>Same functionality as RDT2.1, using <code class=\"language-text\">ack</code> only. Instead of <code class=\"language-text\">nak</code>, receiver sends <code class=\"language-text\">ack</code> for last packet received. Receiver must <em>explicitly</em> include sequence number of packet being <code class=\"language-text\">acked</code>. Duplicate <code class=\"language-text\">ack</code> at sender results in same action as <code class=\"language-text\">nak</code>: <em>retransmit current packet</em>.</p>\n<p><code class=\"language-text\">nak</code> behavior is implemented through <em>duplicate <code class=\"language-text\">ack</code></em>.</p>\n<h3>RDT 3.0: Channels with errors <em>and</em> loss</h3>\n<p>New assumption: underlying channel can also lose packets (data, <code class=\"language-text\">acks</code>). Checksum, sequence number, <code class=\"language-text\">acks</code>, retransmissions will help, but not by much. Approach: Sender will have a timer; sender waits \"reasonable\" amount of time for <code class=\"language-text\">ack</code>. The time is average round-trip time for packet to get to the server and back. It will retransmit if no <code class=\"language-text\">ack</code> received in this time. If packet (or <code class=\"language-text\">ack</code>) just delayed and not lost: retransmission will be duplicate, but sequence numbers already handles this. This approach requires countdown timer.</p>\n<p><img src=\"lec3-rdt3.png\" alt=\"rdt3\"></p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/c82ff87c0fa7fe998a43f9ed26f9b892/e7172/lec3-rdt3-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 59.07172995780591%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACRElEQVQoz11S2XKbQBDk///JT3ZVEj/EhywVAmxuEAssy3KfndlVZDuZKkpod+jp6W4DVE2zohIzvte4TMjbHHKQwH49K8oGP34GiJMa275jXjZ9nrQpztzCsA4wxnHE2zGkJ8I8r2jbRTdN+4ikS1DPUv9XmGVZIM8vRKBBUUxwPQkhe/CCIwoijMMIYxgGAqkxjT36foXtFfASjoxxWKaFNE4/Wfd9jyxjBNgiqRks5iCvK2KcwLYt8KqCMU00yXVhO3QpS5xTF2VXQTQ1NcbEKMe2XVeL4hin4xH2uwM3KuH5koYsEELgcrnoPqOnlYMggOd5SFMO8yODT78sr+A4Nhhj15WXBTsNV9V1HaZpQDM3iEpG3/o4nU4a2JiI5q2GskQXnZB1BapaII4i5H8BqzSF8/CAJQzB/QgJL/BR+HSz/WOm8XZ3B/b7CfnrASwr0ebT5+W+71/DSGv3/R3np2di5MDPChrYQ9azluxwOKBSGgpyjBMzWdcYpw12dIGXFnA+Ajzc3+tGzrkG9X0fvx4fYRIwExIud3Gpc5wtC68vL1o2HRvTNGHR4UUUONFHomvQ9i0xZhSPAsq4dV01k2dimNL6zdBTInL4gdR3KgF6ZfWihC+VfuSY6SeaYZwyYveqQVQpB2/PRKEXY4VAUMgpmyHpeiT3tSnfBRVDBdbT9EkSeKdXVU03Lbd9w77tGrDuawzzoCOvgq70U+4bt2a1ekIBVUGWQuL/UmvHlEOlUxiEZEiMKIw0u2vkUiwUrT/0cYx1SFqbLAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"rdt3\"\n        title=\"\"\n        src=\"/notes/static/c82ff87c0fa7fe998a43f9ed26f9b892/623ee/lec3-rdt3-1.png\"\n        srcset=\"/notes/static/c82ff87c0fa7fe998a43f9ed26f9b892/816c5/lec3-rdt3-1.png 148w,\n/notes/static/c82ff87c0fa7fe998a43f9ed26f9b892/c766b/lec3-rdt3-1.png 295w,\n/notes/static/c82ff87c0fa7fe998a43f9ed26f9b892/623ee/lec3-rdt3-1.png 590w,\n/notes/static/c82ff87c0fa7fe998a43f9ed26f9b892/e7172/lec3-rdt3-1.png 711w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p><strong>Performance</strong></p>\n<p><strong>Throughput</strong> - amount of data transmitted in 1 round / duration of 1 round = <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>L</mi><mi mathvariant=\"normal\">/</mi><mo>(</mo><mi>L</mi><mi mathvariant=\"normal\">/</mi><mi>R</mi><mo>+</mo><mi>R</mi><mi>T</mi><mi>T</mi><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">L/(L/R + RTT)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">L</span><span class=\"mord\">/</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">L</span><span class=\"mord\">/</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span></span></span></span> (more important to know than <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>U</mi><mrow><mi>s</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>r</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">U_{sender}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">U</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">s</span><span class=\"mord mathdefault mtight\">e</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mord mathdefault mtight\">d</span><span class=\"mord mathdefault mtight\">e</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>)</p>\n<p>RDT 3.0 is correct, but performance is bad. e.g. 1 Gbps link, 15 ms prop. delay, 8000 bit packet:</p>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>D</mi><mrow><mi>t</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>s</mi></mrow></msub><mo>=</mo><mfrac><mi>L</mi><mi>R</mi></mfrac><mo>=</mo><mfrac><mrow><mn>8000</mn><mtext>bits</mtext></mrow><mrow><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup><mtext>bits/s</mtext></mrow></mfrac><mo>=</mo><mn>8</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mrow><mo>−</mo><mn>6</mn></mrow></msup><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">D_{trans} = \\frac{L}{R} = \\frac{8000 \\text{bits}}{10^9 \\text{bits/s}} = 8 \\cdot 10^{-6} s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">t</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault mtight\">a</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mord mathdefault mtight\">s</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.04633em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">L</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.30744em;vertical-align:-0.936em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.37144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">9</span></span></span></span></span></span></span></span><span class=\"mord text\"><span class=\"mord\">bits/s</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">8</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord text\"><span class=\"mord\">bits</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">8</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.864108em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.864108em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">6</span></span></span></span></span></span></span></span></span><span class=\"mord mathdefault\">s</span></span></span></span></span>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>U</mi><mrow><mi>s</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>r</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">U_{sender}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">U</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">s</span><span class=\"mord mathdefault mtight\">e</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mord mathdefault mtight\">d</span><span class=\"mord mathdefault mtight\">e</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>: <strong>Utilization</strong> - fraction of time sender busy sending:</p>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>U</mi><mrow><mi>s</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>r</mi></mrow></msub><mo>=</mo><mfrac><msub><mi>D</mi><mrow><mi>t</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>s</mi></mrow></msub><mrow><mi>R</mi><mi>T</mi><mi>T</mi><mo>+</mo><msub><mi>D</mi><mrow><mi>t</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>s</mi></mrow></msub></mrow></mfrac><mo>=</mo><mfrac><mn>0.008</mn><mn>30.008</mn></mfrac><mo>=</mo><mn>0.00027</mn></mrow><annotation encoding=\"application/x-tex\">U_{sender} = \\frac{D_{trans}}{RTT + D_{trans}} = \\frac{0.008}{30.008} = 0.00027</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">U</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">s</span><span class=\"mord mathdefault mtight\">e</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mord mathdefault mtight\">d</span><span class=\"mord mathdefault mtight\">e</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.19633em;vertical-align:-0.8360000000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.3139999999999996em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">t</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault mtight\">a</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mord mathdefault mtight\">s</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">t</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault mtight\">a</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mord mathdefault mtight\">s</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8360000000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.00744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">3</span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">8</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">8</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">2</span><span class=\"mord\">7</span></span></span></span></span>\n<p>And throughput:</p>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>T</mi><mi>p</mi><mi>u</mi><mi>t</mi><mo>=</mo><mfrac><mn>8000</mn><mrow><msub><mi>D</mi><mrow><mi>t</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>s</mi></mrow></msub><mo>+</mo><mn>30</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mrow><mo>−</mo><mn>3</mn></mrow></msup></mrow></mfrac><mo>=</mo><mn>33</mn><mi>k</mi><mi>B</mi><mo>(</mo><mi>y</mi><mi>e</mi><mi>s</mi><mo>)</mo><mi mathvariant=\"normal\">/</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">Tput = \\frac{8000}{D_{trans} + 30 \\cdot 10^{-3}} = 33 kB(yes)/s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.1574400000000002em;vertical-align:-0.8360000000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.3139999999999996em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">t</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault mtight\">a</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mord mathdefault mtight\">s</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">3</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.989em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">8</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8360000000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">3</span><span class=\"mord\">3</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">s</span><span class=\"mclose\">)</span><span class=\"mord\">/</span><span class=\"mord mathdefault\">s</span></span></span></span></span>\n<p>If <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><mi>T</mi><mi>T</mi><mo>=</mo><mn>30</mn><mi>m</mi><mi>s</mi><mi>e</mi><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">RTT = 30msec</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span><span class=\"mord\">0</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">c</span></span></span></span>, 1 KB packet every 30 msec: <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>33</mn><mi>k</mi><mi>B</mi><mi mathvariant=\"normal\">/</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">33 kB/s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">3</span><span class=\"mord\">3</span><span class=\"mord mathdefault\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord\">/</span><span class=\"mord mathdefault\">s</span></span></span></span> throughput over 1Gbps link.</p>\n<p><strong>rdt3: stop-and-wait operation</strong></p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/c82ff87c0fa7fe998a43f9ed26f9b892/e7172/lec3-rtd3-stop-and-wait.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 59.07172995780591%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACRElEQVQoz11S2XKbQBDk///JT3ZVEj/EhywVAmxuEAssy3KfndlVZDuZKkpod+jp6W4DVE2zohIzvte4TMjbHHKQwH49K8oGP34GiJMa275jXjZ9nrQpztzCsA4wxnHE2zGkJ8I8r2jbRTdN+4ikS1DPUv9XmGVZIM8vRKBBUUxwPQkhe/CCIwoijMMIYxgGAqkxjT36foXtFfASjoxxWKaFNE4/Wfd9jyxjBNgiqRks5iCvK2KcwLYt8KqCMU00yXVhO3QpS5xTF2VXQTQ1NcbEKMe2XVeL4hin4xH2uwM3KuH5koYsEELgcrnoPqOnlYMggOd5SFMO8yODT78sr+A4Nhhj15WXBTsNV9V1HaZpQDM3iEpG3/o4nU4a2JiI5q2GskQXnZB1BapaII4i5H8BqzSF8/CAJQzB/QgJL/BR+HSz/WOm8XZ3B/b7CfnrASwr0ebT5+W+71/DSGv3/R3np2di5MDPChrYQ9azluxwOKBSGgpyjBMzWdcYpw12dIGXFnA+Ajzc3+tGzrkG9X0fvx4fYRIwExIud3Gpc5wtC68vL1o2HRvTNGHR4UUUONFHomvQ9i0xZhSPAsq4dV01k2dimNL6zdBTInL4gdR3KgF6ZfWihC+VfuSY6SeaYZwyYveqQVQpB2/PRKEXY4VAUMgpmyHpeiT3tSnfBRVDBdbT9EkSeKdXVU03Lbd9w77tGrDuawzzoCOvgq70U+4bt2a1ekIBVUGWQuL/UmvHlEOlUxiEZEiMKIw0u2vkUiwUrT/0cYx1SFqbLAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"rdt3 stop and wait\"\n        title=\"\"\n        src=\"/notes/static/c82ff87c0fa7fe998a43f9ed26f9b892/623ee/lec3-rtd3-stop-and-wait.png\"\n        srcset=\"/notes/static/c82ff87c0fa7fe998a43f9ed26f9b892/816c5/lec3-rtd3-stop-and-wait.png 148w,\n/notes/static/c82ff87c0fa7fe998a43f9ed26f9b892/c766b/lec3-rtd3-stop-and-wait.png 295w,\n/notes/static/c82ff87c0fa7fe998a43f9ed26f9b892/623ee/lec3-rtd3-stop-and-wait.png 590w,\n/notes/static/c82ff87c0fa7fe998a43f9ed26f9b892/e7172/lec3-rtd3-stop-and-wait.png 711w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<h3>Pipelined protocols</h3>\n<p><strong>Pipelining</strong>: sender allows multiple \"in-flight\", yer ro be acknowledged packets.</p>\n<p><strong>Go-back-N</strong> (easier to implement for both sender and receiver)</p>\n<p>In Go-back-N protocol, the sender is allowed to transmit multiple packets, without waiting for acknowledgement, but is constrained to have no more than some maximum number <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span></span></span></span> of unacknowledged packets in the pipeline.</p>\n<ul>\n<li>Sender can have up to <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span></span></span></span> unacked packets in pipeline</li>\n<li>\n<p>receiver only sends <strong>cumulative ack</strong></p>\n<ul>\n<li>doesn't ack packet if there's a gap</li>\n</ul>\n</li>\n<li>\n<p>Sender has timer for oldest unacked packet</p>\n<ul>\n<li>when timer expires, retransmit <em>all</em> unacked packets</li>\n</ul>\n</li>\n</ul>\n<p>GBN sends <code class=\"language-text\">ack</code> only for the next expected sequence number. Don't buffer out of order packets, just re-<code class=\"language-text\">ack</code> packet with next expected sequence number.</p>\n<p><strong>Selective Repeat</strong></p>\n<ul>\n<li>Receiver individually acknowledges all correctly received packets</li>\n<li>Sender can have up to <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span></span></span></span> unacked packets in pipeline</li>\n<li>Receiver sends <strong>individual ack</strong> for each packet</li>\n<li>\n<p>Sender maintains timer for each unacked packet</p>\n<ul>\n<li>when timer expires, retransmit only that unacked packet</li>\n</ul>\n</li>\n<li>\n<p>Sender only resends packets for which <code class=\"language-text\">ack</code> not received</p>\n<ul>\n<li>sender starts timer for each <code class=\"language-text\">unacked</code> packett</li>\n</ul>\n</li>\n<li>\n<p>Sender window:</p>\n<ul>\n<li>N consecutive seq. numbers</li>\n<li>Limits seq. numbers of send, unacked point</li>\n</ul>\n</li>\n</ul>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/5ef4f596515d52dc67992b0013d4a19f/6bf09/lec3-stop-n-wait.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 56.24178712220762%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABdElEQVQoz31SXU/CQBDs//8dPpjwosZHEyQg7wYtBgwhUr5KoS2lH9e77bjbQhVSuGR618vuzuzcWkVRoAm77RZxHENWfbfbIQiCs7vLZeHKenx6xmg0Ls/amHLvvfXR6XRvF1RKlcxhGML3/VpVu9vH4OOzijoWHNhfeHk9L3gJK9pHsG0b3+MxJpMJPM+DFpIoRmt6QM/N4KUaIC5aGKg8b+yoLphzgPglCkP2R2sNIoLKMiyzAu2Nwb2T42Gh8R4YpCpHlqZIGRKTMfJ/JI0eSnAURfW/YauGEaG1yDHb7bGaO1iv15g7DhyG67oI2C7JsUSNqDLskzAJxNdEVBiCpwjrjBBq4r6ojJMcwekse9kZ71aSJJjNZlgtl+VICCJ5oDjF3TTB0Ffsm2b7mPBIfGtZYiSZivHcZILLyn4OBF8VyKky3hzjrr7yNaZq9oo6mfhI/DkpbJrBUqF45m022DBkZKR1saEsQsL6l1zd0c2Cv8nIV/ppDU5fAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Stop and wait\"\n        title=\"\"\n        src=\"/notes/static/5ef4f596515d52dc67992b0013d4a19f/623ee/lec3-stop-n-wait.png\"\n        srcset=\"/notes/static/5ef4f596515d52dc67992b0013d4a19f/816c5/lec3-stop-n-wait.png 148w,\n/notes/static/5ef4f596515d52dc67992b0013d4a19f/c766b/lec3-stop-n-wait.png 295w,\n/notes/static/5ef4f596515d52dc67992b0013d4a19f/623ee/lec3-stop-n-wait.png 590w,\n/notes/static/5ef4f596515d52dc67992b0013d4a19f/6bf09/lec3-stop-n-wait.png 761w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/707c4511e41b24266a646834cb289d36/2ae82/lec3-pipelined.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 57.65171503957783%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABxElEQVQoz5VT3WrUQBTOO/oGPoAPID6Bl4ogFrzwrpReeOWdouJNoVika2lMsrvJbnazcZNMfmYyf/mcSZpQli7FA4ecE775zr/TdR3uq5XFfIEkSXpba91/8yyHe+tCStn7I/ZQnPvOCDo9O8fnL197W6qBcLPd4vWbt6iqesI+ROr8TVNkWYb9fo+6HsC3XoCf1zd3kIGwoQw/Li6RF2T4e1DZqM7v2QzeHw+B7yM15IJzkIbinU9xFjK4pQC3ZXbK5oXHxLHZEUJQliWEEH2UyhC+cimeXjI8u2J46bb4lEjENUdlsEVR9GrfFHmOtm2nNjiHETgXaKoKRCj8IhoflhzPrxmeXFCchxRkt8U63mC9WhtdYRPHSHc7JKbHTdPA4aZEm5mN0rIW1mc2opZgZsJLqvA9k3gfcXxLKNL1CitDFi5DzOdzYxs/ihAEwUAYhSFiE4WMZZACpG5wEjT4GLe4KgS2zJCbPmoljw5jGspDjaVc4sWM4sTnWFQaXA3DUEod3b9pKCOzXWCro72oJG6IQlQrlEJD6m4i/O8M++vQato3pS0Y/ZWMGR69FN/zENmm+kG/3CNY35EcXtJjhP8AKt+cXOggpAEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Pipelined\"\n        title=\"\"\n        src=\"/notes/static/707c4511e41b24266a646834cb289d36/623ee/lec3-pipelined.png\"\n        srcset=\"/notes/static/707c4511e41b24266a646834cb289d36/816c5/lec3-pipelined.png 148w,\n/notes/static/707c4511e41b24266a646834cb289d36/c766b/lec3-pipelined.png 295w,\n/notes/static/707c4511e41b24266a646834cb289d36/623ee/lec3-pipelined.png 590w,\n/notes/static/707c4511e41b24266a646834cb289d36/2ae82/lec3-pipelined.png 758w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<h2>Connection-oriented transport: TCP</h2>\n<p>TCP is said to be <strong>connection-oriented</strong> because before processes begin communicating with each other, they establish connection through <strong>three way handshake</strong>. TCP provides reliable, in-order byte stream connection. It is a pipelined protocol with dynamic window size.</p>\n<p>TCP connection provides a <strong>full duplex service</strong>: bi-directional data flow. The maximum amount of data that can be grabbed and placed in a segment is limited by the <strong>maximum segment size</strong>.</p>\n<h3>Segment structure</h3>\n<p>TCP pairs each chunk of client data with TCP header, forming <strong>TCP segments</strong>.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/215d6b5291f029888f756bfc9b0c2851/260bb/lec3-tcp-segment-struct.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 93.02884615384615%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAACpUlEQVQ4y41TiVLiUBDk/79if2Etdz0QWSUHkBBEEREIIRxyE0QQCFC9MwOJWBu3TFXXu/r16zkS2+12iMJ2uwV/o+EQtm1jPp/Lmvd3u23kHf5i6/UaDN/fwN98YL32Zf99ucRiscBqtTrwfGwCnr9BcH9JPBaNFbozPPbfkG+OkGsMYLlDGQsdD8XeDCU6exrM8UC8Yu/Ac/rC4Tnv7THDarNFTGuMYbSnSBQdnOeecZGv4Nx6hlqjSy9vyHVeYRGM9qusrx9d/DaeiFtG4sFBtjVFpjlBtulhyYK6O4HR8mB2ZgeBGazuG5RqF/G7KhL3dSRLLuKFGq7ubZgkbDHvwGUhBmuIYIYEc+TQZFGCQa+xq6w7xg0JKZUONLuH1HMbavWFxGYhVyB3p6IhIadpweGkSZjBcw7r3KogTu4kPErBFYV3QY55rdWHFKYnfA6X55kg5D9PLaTJQf6Qq1zbg0aulHITKo03jw40cqbXB9BqPeh2X9wIV/ivnx3+OE3iV6Yo4Z2kH3BJyf55k8VJKodT1cKpYiFNYiblTKFCnej3UrgzKiDPk6VmWBhxmCSHOr9MUKkQeq2LFLlTyrRPzrP1Pqz2Pl9pZ0DV70pO2Wkw8lno0KBKsRC3AVf1qmDLnMcsvcqhsaBBLuL5Ks6MEvFqMl6S0wvKb6YxkuKEbcMLyYVgGoJbgauapzYyD7kKz1ufeWbQNoozlviDKh+DH0tQxS/JbaraCysbBamyHwpGET0RjBfqVIQqbivd7wnygu2z7ShwyPxncMhfcT6FvBf0/kP+yNO3BNXGR6cfgx/i/uI+OzPL0Bv71GTcSQT36E+5rY+gkaj6D8ayf1sb4LrcgUq5DvbVCD5zJYf2eIHGZAHnCzS8d7jT5Zfnx/C3O/wFqstgZoBy6xwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"TCP segment structure\"\n        title=\"\"\n        src=\"/notes/static/215d6b5291f029888f756bfc9b0c2851/623ee/lec3-tcp-segment-struct.png\"\n        srcset=\"/notes/static/215d6b5291f029888f756bfc9b0c2851/816c5/lec3-tcp-segment-struct.png 148w,\n/notes/static/215d6b5291f029888f756bfc9b0c2851/c766b/lec3-tcp-segment-struct.png 295w,\n/notes/static/215d6b5291f029888f756bfc9b0c2851/623ee/lec3-tcp-segment-struct.png 590w,\n/notes/static/215d6b5291f029888f756bfc9b0c2851/260bb/lec3-tcp-segment-struct.png 832w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p><strong>Sequence numbers</strong></p>\n<p><strong>Sequence number for a segment</strong> is the byte stream \"number\" of first byte in segment's data.</p>\n<p><strong>Acknowledgements</strong></p>\n<p>Sequence number of next byte, expected from other size. TCP provides cumulative <code class=\"language-text\">ack</code>.</p>\n<p>TCP doesn't deal with out-of-order segments.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/2154dbd1e2b9bf7e4347ce714d7ab4fb/43234/lec3-tcp-ack.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 133.22784810126583%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAABYlAAAWJQFJUiTwAAADBUlEQVRIx41Va08aQRTlH/aL9t/0S+lfaNLEr6Z+1aaKUqtpkRALYtQo4LIgoLI8BZZ9zL5O78wyCrI8bjKZwAyHe885905sOByi1dJgmjp6vS5c1wWPIAiwKORZv99HvV6DpjVRq9XAGENM0zTs7v7E9vd9pM6ysG1rbcCnpyccJH4hm7vE7e0dLMtCjB8UCk+IxxM4zyniouf5KwHD4wBfv/3B1lYag+FYnMVM08TfdAb7iRSaWkt86S8BewMM7xwmszg9vYNarYWAhUIBn+NxfNjcQL3RCAH91RnyOzySJ6f4FP+Cg8MERqMRYvywolZwdHQEXR/PcPR+jwLc3tnBxuZH7O39wGAwCDlcVtayxYNTxtWWEQtFcEn2IR4fbbIAI7V8rBMSlFvN8zzxeQLokV0YXl5cdDoOymUdl5caDINhPNZpjYkOndaIfuTQ56FQOOQ7oCytV/BXQG5KGYxZSKdTyOfzuLm5gaIoyOWySCZ/k1cLOD9XqAoPjiMzZAI4EpAfSA2iRNF1nzjzoKomKhW+LOq0NzHnAN+TPr1HWanVYvQHxuQOogE5P4sAPC8gv7nUw5bIst6wiVNr8psFgJIPqSBjzkQ4Bw8PFqpVizznEoehG2zbnheFqzwdtu2Tyg4Jc4FMJoNisYiLi7wAnbXOAkDXdYT/2h0mSuFrMHAoW5fOPHGH+5WXFgr3RskMYLj7ZI0RmdtGu73c2Pz+e+HmMvR9jyaNgW6P8zUNtl77RQK22waaTUZZWpStibJqkZrBquZbLIrnOTOXrq9vcXycxtXVlRBEVVWkUmc0jO9wcvKPZmDmlQLGFqgs+ZFTZDh8ETvvZcMw6M3p0W6SmXUUS/2wmrJJ1a3RKetEt8sHCQF2jNWA3BrTBpfBpxHvYUUJOTcMGhLLSpYcyqjX64K/5+dn6pAKeZODzNrKspaIwntV1z3BT6djC5BSqSSA7+8V4Vn5kMnXb07lIPCFbarUp7wc3q/TvRpl7OlJFAnYaOgE4s3xxh8j+QpOv4aLjP0fQL4mnp9FQQUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"TCP ack, seq #s\"\n        title=\"\"\n        src=\"/notes/static/2154dbd1e2b9bf7e4347ce714d7ab4fb/623ee/lec3-tcp-ack.png\"\n        srcset=\"/notes/static/2154dbd1e2b9bf7e4347ce714d7ab4fb/816c5/lec3-tcp-ack.png 148w,\n/notes/static/2154dbd1e2b9bf7e4347ce714d7ab4fb/c766b/lec3-tcp-ack.png 295w,\n/notes/static/2154dbd1e2b9bf7e4347ce714d7ab4fb/623ee/lec3-tcp-ack.png 590w,\n/notes/static/2154dbd1e2b9bf7e4347ce714d7ab4fb/43234/lec3-tcp-ack.png 632w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<h3>TCP round trip time, timeout</h3>\n<p>TCP uses a timeout/retransmit mechanism to recover from lost segments. The timeout should be larger than the connection's RTT.</p>\n<p><strong>Estimating the RTT</strong></p>\n<p>SampleRtt</p>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>E</mi><mi>s</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>d</mi><mi>R</mi><mi>T</mi><mi>T</mi><mo>=</mo><mo>(</mo><mn>1</mn><mo>−</mo><mi>a</mi><mo>)</mo><mo>∗</mo><mi>E</mi><mi>s</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>R</mi><mi>T</mi><mi>T</mi><mo>+</mo><mi>a</mi><mo>∗</mo><mi>S</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>l</mi><mi>e</mi><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">EstimatedRTT = (1 - a) * EstimateRTT + a * SampleRTT</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.46528em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>d</mi><mi>e</mi><mi>v</mi><mo>=</mo><mi mathvariant=\"normal\">∣</mi><mi>E</mi><mi>s</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>d</mi><mi>R</mi><mi>T</mi><mi>T</mi><mo>−</mo><mi>S</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>l</mi><mi>e</mi><mi>d</mi><mi>R</mi><mi>T</mi><mi>T</mi><mi mathvariant=\"normal\">∣</mi><mspace linebreak=\"newline\"></mspace><mi>D</mi><mi>e</mi><mi>v</mi><mi>R</mi><mi>T</mi><mi>T</mi><mo>=</mo><mo>(</mo><mn>1</mn><mo>−</mo><mi>b</mi><mo>)</mo><mo>∗</mo><mi>D</mi><mi>e</mi><mi>v</mi><mi>R</mi><mi>T</mi><mi>T</mi><mo>+</mo><msub><mi>b</mi><mrow><mi>d</mi><mi>e</mi><mi>v</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">dev = |EstimatedRTT - SampledRTT| \\\\\nDevRTT = (1 - b) * DevRTT + b_{dev}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord\">∣</span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">d</span><span class=\"mord mathdefault mtight\">e</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">v</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>\n<h2>Connection-Oriented Transport: TCP</h2>\n<p>TCP creates reliable data transfer service on top of IP's unreliable service:</p>\n<ul>\n<li>pipelined segments</li>\n<li>cumulative acks</li>\n<li>single retransmission timer</li>\n</ul>\n<h3>TCP Sender events</h3>\n<p>Data received from app:</p>\n<ul>\n<li>create segment with sequence number</li>\n<li>sequence number is byte-stream number of first data byte in segment</li>\n<li>\n<p>start timer if not already running</p>\n<ul>\n<li>think of timer as for oldest unacked segment</li>\n<li>expiration interval <code class=\"language-text\">TimeOutInterval</code></li>\n</ul>\n</li>\n</ul>\n<p>Timeout:</p>\n<ul>\n<li><strong>retransmit segment that caused timeout</strong></li>\n<li>restart timer</li>\n</ul>\n<p>ack received:</p>\n<ul>\n<li>\n<p>if ack acknowledges previously unacked segments</p>\n<ul>\n<li>update what is known to be acked</li>\n<li>start timer if there are still unacked segments</li>\n</ul>\n</li>\n</ul>\n<h3>TCP Fast Retransmit</h3>\n<p>Time-out period often relatively long: long delay before resending lost packet. Detect lost segments via duplicate ACKs:</p>\n<ul>\n<li>sender often sends many segments back-to-back</li>\n<li>if segment is lost, there will likely be many duplicate ACKs</li>\n</ul>\n<p><strong>TCP fast retransmit</strong>: If sender receives 4 ACKs for same data (\"triple duplicate ACKs\"), resend unacked segment with smallest seq #:</p>\n<ul>\n<li>likely that unacked segment lost, so don't wait for timeout</li>\n</ul>\n<h3>Connection Management</h3>\n<p>Before exchanging data, sender/receiver establish a <strong>handshake</strong>:</p>\n<ul>\n<li>agree to establish connection (each knowing the other willing to establish connection)</li>\n<li>agree on connection parametes</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">Socket client <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Socket</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hostname\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"port number\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nSocket connectionSocket <span class=\"token operator\">=</span> serverSocket<span class=\"token punctuation\">.</span><span class=\"token function\">accept</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h4>3-way handshake</h4>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/4c63fa5e6ce16c5182cb412c8c47e886/154ae/lec3-3way-handshake.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 49.290780141843975%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABqElEQVQoz31SiW7CMAzt/3/UtGkHE+ISGrACY0XjWtemUJo0adK+2dkhYNIsuXVd2y/vOUGWaaxWBbLM4NSapsHbWwJrnf+u69q/x5MQ85fXs9x+bxDHGkJUCKxtYKoGWlsYY2iAhXMOSinc3j2eAbBdXd/g/uErz3Wcd47Bt1gu1wi4UYgUZakwnU4xmTyTT+jnEmkqCTn3w7UuUVXnLE6N+9mDJEkwn8+puPpFZSrOWcpZ7HYxkuSDBieIondIabHdbkmmlXeOuZfZGUOUT7W41JCePuZijoVQWK8LzGYzDAYDdDodAtz5/1EUYbPZIHA0TJXlr8h8QkZsKJaywGg0Jh8hDEM8PY1JhtQP/9H0x7TWvi8wVGCI9rEo0O12MRwO0e/3SYYXEjqHyKQfwKeoa+d1ZNDLZVVElxca1FLCHY9YLBZotVro9Xpot9t0mhEtJiYqK7oWe9IwJk9RFPLPMC8LDbPEymvYfC+DG9mFEMjzHM5WfnNMRymJw0HREg7+NoThs5eB6/2WqV5THDDKpR7/mXO1BzsSq4JkKkl/7rapQPUe4xMsHv9qtRhfGAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"TCP 3-way handshake\"\n        title=\"\"\n        src=\"/notes/static/4c63fa5e6ce16c5182cb412c8c47e886/623ee/lec3-3way-handshake.png\"\n        srcset=\"/notes/static/4c63fa5e6ce16c5182cb412c8c47e886/816c5/lec3-3way-handshake.png 148w,\n/notes/static/4c63fa5e6ce16c5182cb412c8c47e886/c766b/lec3-3way-handshake.png 295w,\n/notes/static/4c63fa5e6ce16c5182cb412c8c47e886/623ee/lec3-3way-handshake.png 590w,\n/notes/static/4c63fa5e6ce16c5182cb412c8c47e886/e5345/lec3-3way-handshake.png 885w,\n/notes/static/4c63fa5e6ce16c5182cb412c8c47e886/7a439/lec3-3way-handshake.png 1180w,\n/notes/static/4c63fa5e6ce16c5182cb412c8c47e886/154ae/lec3-3way-handshake.png 1692w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<h4>Closing a connection</h4>\n<p>Client, server each close their side of connection: send TCP segment with FIN bit = 1. Respond to received FIN with ACK.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/4c37b88f45ec25380ae78f149d43a96e/082c2/lec3-closing-tcp.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB2ElEQVQ4y3VTXZOaQBDk/78nVfeDLi95ScqCKi+CgooCi7B8uXxoZ2a8VTSXqdqCHXZ7unsGpyxHqNxgmi7guF6v8mzbAXVj7jmb//jjo65b2DifR1TVSLlJMBzPWyNT7f2iBX7/8ZMuB/J+uTwAv31/o/zq8/wF3XlCGGZw3Q3GkQCVyghkxGto3SDLKmLQ0/eJQLkQFRxv+7mavjcoilzenfV6TRUiSvZEvUIQBFitVgR0JskDlsuA8hpxfMRuX6BppzsQP40xaJoWZalvgF3X3Ssy4GKxgOd5dKCQqlqXOJ1OxDbDdqvgB0pAmAADHg4Hym+x2+1k7zCbMAzlUNu2SNOUPm4RRTF8P5HKXKgsSzK+Ip96bDYbKcx3bNwsIYYszTLkJFfR+gbyGsZcSR4ze+SGYYBSCkmS3ACZEV9m6XOjR+q21gbLDx95rrDfx+RjToA8Io34Wte1sGQMBhTJVj/79GBJ49AN+PV7T9JTalBHfhZkSSOSoygSyZbVnIjD5tpg6dxl13U/fTtJd9m/NE0QHzKZuX9HTON4PD4DMrM4jmVkuDof+iqMmYjlJDNpWeV5Lt0WyTwO8wbY3+x/61nic04YMjKbOpfNnfsK/PW/fs3x+guYz+vH0BSX+wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Closing TCP connection\"\n        title=\"\"\n        src=\"/notes/static/4c37b88f45ec25380ae78f149d43a96e/623ee/lec3-closing-tcp.png\"\n        srcset=\"/notes/static/4c37b88f45ec25380ae78f149d43a96e/816c5/lec3-closing-tcp.png 148w,\n/notes/static/4c37b88f45ec25380ae78f149d43a96e/c766b/lec3-closing-tcp.png 295w,\n/notes/static/4c37b88f45ec25380ae78f149d43a96e/623ee/lec3-closing-tcp.png 590w,\n/notes/static/4c37b88f45ec25380ae78f149d43a96e/e5345/lec3-closing-tcp.png 885w,\n/notes/static/4c37b88f45ec25380ae78f149d43a96e/7a439/lec3-closing-tcp.png 1180w,\n/notes/static/4c37b88f45ec25380ae78f149d43a96e/082c2/lec3-closing-tcp.png 1328w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<h2>TCP Congestion Control</h2>\n<p>Informally, congestion is when too many sources sending too much data too fast for <strong>network</strong> to handle. Manifestations:</p>\n<ul>\n<li>lost packets (buffer overflow at routers)</li>\n<li>long delays (queueing in router buffers)</li>\n</ul>\n<p>The solution for resolving congestion control is to ask sources to reduce their <strong>sending rate</strong>.</p>\n<p>Let say there's a sender and a receiver with <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><mi>b</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">R bps</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">s</span></span></span></span> link between them:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[] ===== []\n     R</code></pre></div>\n<p>the goal is to fluxuate around available bandwidth. every time a packet loss is occured, sending rate is decreased by 2. (e.g. was at 10, moved to 5).\nFirst part called slow start, the fluxuation part is called congestion avoidance</p>\n<p><strong>Approach</strong>: sender increases transmission rate (window size), probing for usage bandwidth, until loss occurs:</p>\n<ul>\n<li><strong>additive increase</strong>: increase <code class=\"language-text\">cwnd</code> (congestion window) by 1 MSS every RTT unltil loss detected</li>\n<li><strong>multiplicative decrease</strong>: cut <code class=\"language-text\">cwnd</code> in half after loss</li>\n</ul>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>T</mi><mi>c</mi><mi>p</mi><mi>T</mi><mi>p</mi><mi>u</mi><mi>t</mi><mo>=</mo><mfrac><mrow><mi>c</mi><mi>w</mi><mi>n</mi><mi>d</mi></mrow><mrow><mi>R</mi><mi>T</mi><mi>T</mi></mrow></mfrac><mi>b</mi><mi>y</mi><mi>t</mi><mi>e</mi><mi>s</mi><mi mathvariant=\"normal\">/</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">TcpTput = \\frac{cwnd}{RTT} bytes/s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.05744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.37144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">s</span><span class=\"mord\">/</span><span class=\"mord mathdefault\">s</span></span></span></span></span>\n<p>By default <code class=\"language-text\">cwnd</code> is measured in bytes.</p>\n<h3>Detecting, reacting to loss</h3>\n<ul>\n<li>\n<p>Loss indicated by timeout</p>\n<ul>\n<li><code class=\"language-text\">cwnd</code> set to 1 MSS</li>\n<li>window then grows exponentially (as in slow start) to a threshold, then grows linearly</li>\n</ul>\n</li>\n<li>\n<p>Loss indicated by 3 duplicate ACKs</p>\n<ul>\n<li>duplicate ACKs indicate network is capable of delivering some segments</li>\n<li><code class=\"language-text\">cwnd</code> is then cut in half, window then grows linearly</li>\n</ul>\n</li>\n</ul>\n<h3>Throughput</h3>\n<p>W - max window for tcp connection - max possible throughput\nW/2 - min window for tcp connection - min possible throughput\n3/4(W) - avg window - average possible throughput\nW = R * RTT</p>\n<p>max throughput = max w/rtt = w / rtt (max throughput in any round)\nmin throughput = min w/rtt = w/2 / rtt\navg throughput = avg w/rtt = 3/4w / rtt</p>\n<h3>Fairness</h3>\n<p><strong>Fairness goal</strong>: if K TCP sessions share same bottleneck link of bandwidth R, each should have average rate <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mfrac><mi>R</mi><mi>K</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{R}{K}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.217331em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.872331em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.07153em;\">K</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.00773em;\">R</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/f32ef49bfca82658cd746bd17eab24a0/31a47/lec3-tcp-fairness.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 46.924829157175395%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABVUlEQVQoz4VS2U7CQBTt/z/6YHwyMdFIhMADKijBLSKIihTKlkpBlK1QUi0Ng+3MsTOkIA3Bk5zcO5O5524jzWYzjMdjTCYTGMYIhRcVmXwZDC44KKOez4R1KQWlC8uwAmNMkENCAIdHUdxkH9Gdf2Lu/GArqEeXrQlLvrrPUlmGPtRBGMG73UR90EY608Be5Bg7sRBSlRSuave4zmg4CJ/htV7B4GuIb2ItKvRL9TMsk3sdG4aDYlVH9KKB/eQtdiNpxLN3iOceEL1UEE4+IZ0vIVd9Q2s4Wgly8tlwdLsmykrPswSW5eKj00FNqaJZa2I+tbdOQLQcvAydxHB6nl2eLctCUS5CLsmY2rYXxJfiiiX5XFuKaZpQVRX9fh/tVhuJZAKFwjMcxxEPNE2Doijija7ra1sNUgjyQNvLzCvh4oQQ8K/kC25qaxuk/2ayqYq/fhC/vuKukTf85r0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"TCP Fairness\"\n        title=\"\"\n        src=\"/notes/static/f32ef49bfca82658cd746bd17eab24a0/623ee/lec3-tcp-fairness.png\"\n        srcset=\"/notes/static/f32ef49bfca82658cd746bd17eab24a0/816c5/lec3-tcp-fairness.png 148w,\n/notes/static/f32ef49bfca82658cd746bd17eab24a0/c766b/lec3-tcp-fairness.png 295w,\n/notes/static/f32ef49bfca82658cd746bd17eab24a0/623ee/lec3-tcp-fairness.png 590w,\n/notes/static/f32ef49bfca82658cd746bd17eab24a0/31a47/lec3-tcp-fairness.png 878w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>We focus on AIMD part of the TCP congestion control.</p>\n<p>With UDP there is no notion of congestion control. If TCP and UDP are used together, UDP will make use of entire bandwidth.</p>","frontmatter":{"title":"Transport Layer","date":"2019-01-28","description":"Chapter 3"},"fields":{"slug":"/cpsc441/lec3-transport-layer","category":"cpsc441"}}},{"node":{"id":"bc244814-2e52-54a9-ae7f-f5b03f663c6f","html":"<h2>Principles of network applications</h2>\n<p>At the core of network application development is writing programs that run on different hosts and communicate with each other over the network. One example is communication between browser and server. There is no need to write software for network-core devices. Network core devices do not run user applications. Applications on end systems allow for rapid app development propagation.</p>\n<p>Because of the layer design, when developing application, we need only to know is how to talk to transport layer. There is no need to learn other layers. When you want to develop a network application, you don't have to worry <em>how</em> transport layer is implemented.</p>\n<h2>Network application architectures</h2>\n<p>Possible structure of applications:</p>\n<ul>\n<li><strong>Client-server</strong></li>\n<li><strong>Peer-to-peer (P2P)</strong></li>\n</ul>\n<p><strong>Client-server architecture</strong></p>\n<p>In a <strong>client-server</strong> architecture, there is an always-on host, <em>server</em>, which serves requests from many other hosts called <em>clients</em>.</p>\n<p><strong>Client</strong>:</p>\n<ul>\n<li>Communicate with server</li>\n<li>May be intermittently connected</li>\n<li>May have dynamic IP addresses</li>\n<li>Do not communicate directly with each other</li>\n</ul>\n<p><strong>Server</strong>:</p>\n<ul>\n<li>Always-on host</li>\n<li>permanent IP address</li>\n<li>data centers for scaling</li>\n</ul>\n<p><strong>P2P architecture</strong></p>\n<p>There's no always-on server. In P2P, regular end-systems contain both server and client sides. Peers request service from other peers, provide service in return to other peers. One good aspect of P2P, is <strong>self-scalability</strong> - new peers bring new service capacity as well as service demands. Peers are intermittently connected and change IP addresses. In terms of management, P2P is complex.</p>\n<h3>Processes communicating</h3>\n<p><strong>Process</strong> is a program running within a host. Within same host, two processes communicate using <strong>inter-process communication</strong> (defined by OS). Process that starts communicating called <strong>client process</strong>. The process that's waiting for communication, called <strong>server process</strong>. Processes on two different end systems communicate with each other by sending <strong>messages</strong> across the network.</p>\n<p><strong>Sockets: interface between the process and the network</strong></p>\n<p>The API of the transport layer is called <strong>Socket</strong>. A process sends messages into, and receives messages from, the network through a software interface called <strong>socket</strong>. Socket is analogous to door:</p>\n<ul>\n<li>sending processes <em>shoves message out of the door</em></li>\n<li>sending process relies on transport infrastructure on the <em>other side of door</em> to deliver message to socket at receiving process</li>\n</ul>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/56672454841e323c97aa216cc5ddeba7/a17d0/lec2-sockets.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 34.1046277665996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABm0lEQVQoz2WR227TUBBF/QH8KUIIwTPvfEmfKoRECCFEpbmqSdoU23Edx8eXNFCFknvrSxxnMU4fkGCkkY7m7LO1Zx3tcDhQ1H6fE/q/CdwZyv3Fdpse50+3fysIZugDhXHtEYZz/i0tz/PjYRKGNPo6p+ddam2ToR5CviO5nRLbNvvVivRhi+NNRNPnbHBD65tJfD8ndcfElkXiumhFwqJbrQ5964KGdUqn/5VhVxW5SeOY7PFRNsiIFktG5oCLUQkjqNFsDHlYrNj5PknRYqwV6dI0plKpEngWU7/O8HsPw/z53zpkGYGv8J02PyYD6l8uuZtMxSBmv14/rbxcRQyuFdVqBWesGI09dN2VWcC7+xlvhhYven3eej5XyyW3QcCN7eIFE87LXcxmh2n1jEwp8iRBa3d6vP9QlpWb2MLKcWx0w8YQ8K+UMPn0mWcfS2jVGq8Nkzt5aDsjfEnaE9amOeLkpEwsZseEcRyx2ayJooiVgC96LfF3qfyysC3N5zxXHi9dRSiaVHguJGmhS0STCYZ6syEem6PhHyoy+vnlCJ9wAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Socket connection\"\n        title=\"\"\n        src=\"/notes/static/56672454841e323c97aa216cc5ddeba7/623ee/lec2-sockets.png\"\n        srcset=\"/notes/static/56672454841e323c97aa216cc5ddeba7/816c5/lec2-sockets.png 148w,\n/notes/static/56672454841e323c97aa216cc5ddeba7/c766b/lec2-sockets.png 295w,\n/notes/static/56672454841e323c97aa216cc5ddeba7/623ee/lec2-sockets.png 590w,\n/notes/static/56672454841e323c97aa216cc5ddeba7/e5345/lec2-sockets.png 885w,\n/notes/static/56672454841e323c97aa216cc5ddeba7/7a439/lec2-sockets.png 1180w,\n/notes/static/56672454841e323c97aa216cc5ddeba7/84fe0/lec2-sockets.png 1770w,\n/notes/static/56672454841e323c97aa216cc5ddeba7/a17d0/lec2-sockets.png 1988w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>The socket API was initially developed as a part of Unix system. The socket API on Windows was implemented later. Due to differences between two OS, Windows implements different API, called WinSocket.</p>\n<p><strong>Addressing Processes</strong></p>\n<p>We need addressing mechanism to uniquely identify hosts and servers. To receive messages, processes must have some <strong>identifier</strong>. Host device has unique 32-bit IP address.</p>\n<p>Process IDs are called <strong>port numbers</strong>. The combination of IP and port will uniquely identify host in the network. By default, HTTP servers use port 80.</p>\n<h2>Transport servers for applications</h2>\n<p>Many networks, including the Internet, provide more than one transport-layer protocol. Developer must choose one of the available protocols.</p>\n<p><strong>What transport service does an app need?</strong></p>\n<ul>\n<li>\n<p><strong>Data integrity</strong>:</p>\n<ul>\n<li>if protocol provides guaranteed data delivery service, it is said to provide data integrity or <em>reliable data transfer</em>.</li>\n<li>some apps can tolerate some amount of loss (e.g. audio)</li>\n</ul>\n</li>\n<li>\n<p><strong>Timing</strong>:</p>\n<ul>\n<li>some applications require low delay in order to be effective</li>\n</ul>\n</li>\n<li>\n<p><strong>Throughput</strong>:</p>\n<ul>\n<li>some applications guaranteed to request <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><mi>b</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">R bps</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">s</span></span></span></span> of throughput, so protocol would then ensure that the available throughput is always at least <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><mi>b</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">R bps</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\">b</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">s</span></span></span></span></li>\n<li>useful for VoIP</li>\n<li><em>elastic applications</em> make use of whatever throughput they get</li>\n<li>useful for email, web transfers</li>\n</ul>\n</li>\n<li>\n<p><strong>Security</strong>:</p>\n<ul>\n<li>service that provides various security services (e.g. encryption, data integrity)</li>\n</ul>\n</li>\n</ul>\n<p><strong>Common applications</strong>:</p>\n<table>\n<thead>\n<tr>\n<th>application</th>\n<th>data loss</th>\n<th>throughput</th>\n<th>time sensitive</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>file transfer</td>\n<td>no loss</td>\n<td>elastic</td>\n<td>no</td>\n</tr>\n<tr>\n<td>email</td>\n<td>no loss</td>\n<td>elastic</td>\n<td>no</td>\n</tr>\n<tr>\n<td>web documents</td>\n<td>no loss</td>\n<td>elastic</td>\n<td>no</td>\n</tr>\n<tr>\n<td>realtime audio/video</td>\n<td>loss tolerant</td>\n<td>audio: 5kbps-1Mbps; <br/> video 10kbps-5Mbps</td>\n<td>yes, 100's msec</td>\n</tr>\n<tr>\n<td>stored audio/video</td>\n<td>loss tolerant</td>\n<td>same as above</td>\n<td>yes, few sec</td>\n</tr>\n<tr>\n<td>games</td>\n<td>loss tolerant</td>\n<td>few kbps up</td>\n<td>yes 100's msec</td>\n</tr>\n<tr>\n<td>text messaging</td>\n<td>no loss</td>\n<td>elastic</td>\n<td>yes and no</td>\n</tr>\n</tbody>\n</table>\n<h3>Internet transport protocol layers</h3>\n<p>The Internet makes two transport protocols available to applications: <strong>UDP (User Datagram Protocol)</strong> and <strong>TCP (Transmission Control Protocol)</strong>.</p>\n<p><strong>TCP Services</strong></p>\n<p>The TCP service model includes a connection-oriented service and a reliable data transfer service. Therefore, application that invokes TCP receives both of these services from TCP.</p>\n<ul>\n<li><em>Connection-oriented service</em>. TCP has the client and server exchange transport layer control information with each other <em>before</em> the application-level messages begin to flow. After the handshaking phase, a <strong>TCP connection</strong> is established between the sockets of two processes.</li>\n<li><em>Reliable data service</em>. The communicating processes can rely on TCP to deliver all data sent without errors and in the proper order.</li>\n</ul>\n<p>TCP also includes a congestion-control mechanism. The TCP congestion-control mechanism throttles a sending process when the network is congested between sender and receiver.</p>\n<p><strong>UDP Services</strong></p>\n<p>UDP is a lightweight transport protocol, providing minimal services. UDP is connectionless, therefore there's <em>no handshaking process</em> before two processes start to communicate. UDP <em>provides unreliable data transfer service</em> - when a process sends a message into a UDP socket, UDP provides no guarantee that the message will ever reach the receiving process. Messages also do not arrive in the order they were sent in. UDP service <em>does not include a congestion-control mechanism</em>, so the sending side of UDP can keep sending data at any rate.</p>\n<h2>The Web and HTTP</h2>\n<p>Web page consists of base HTML file which includes several referenced objects. Objects can be pretty much anything. Each object is addressable by a URL.</p>\n<h3>HTTP Overview</h3>\n<p>HTTP stands for Hypertext transfer protocol. HTTP is web's application layer protocol. HTTP follows client-server model:</p>\n<ul>\n<li><strong>Client</strong>: applications that request, receive (using HTTP protocol) and display web objects</li>\n<li><strong>Server</strong>: Web server sends (using HTTP protocol) objects in response to requests.</li>\n</ul>\n<p>HTTP uses TCP as its transport protocol. The client first initiates a TCP connection with the server (using port 80). Once the connection is established, the browser and the server processes access TCP through their socket interfaces.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/a1deff8199936e109da540bad6d9d3ae/0d166/lec2-http.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 358px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 82.12290502793296%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACOUlEQVQ4y41U227TQBDNBwMPIPEJvIB44A2JBy7hUihJpKpFSloEtIUqDVGakDhumpqmuSihtpvYzsW73sOsEwc7cSVGWs1qPHP2zPHsJhAyIYS/pHW7XZyUSqhVq1BqNVTKZSiKgjqt6XS6zF+1xE2Ajm3DsixYIwvlWh3K6Rlmsxkm4wkYY/8HGAYOzHbGyB4cI5P9As/zYnNiAeX3eZLw90GxaRhIpj9hczsL4fFlcgDod7UKGD5tuSc/os403caLjRSSqS3Yroe244F7IpIblioRFxwzgfwVw+HARcMiYNKyb45QpNiJyaEO+RqBJeAqw+FMYP8Pw+6AoUjFv0wGzxcCKBDgd1pHBnnKWQWTfgko9WlZkgHDD53hgAorBMg8EQgMh5iXKZantUcHfuvPwDlfducDhtkZtM1fcXzuueg4Xuw4TblAkRgqQ4af18BAYL3lyWSCV8k3+PAxA7VnwPTHTESApHmLvfw5OslYqlTx4MlT5POFaMu24+Duvft4+OgxLrRz/yOnsRFineFcnjn73O4ebt+6g3fvN6MMpQ7prR08f70BRW1EQOKmIJjRpvYbz16+RYZqHSIVGZv9o2Okd3IolCpwXXcNBIs/HdbLMK+RooHPfT2EdtH6x7Df76NHj0H78hLnzSZ0Xb/xegUxqbumaei02+h2On5dq9VCYkBgp6qKs0bDD8pXRa2rEdC4myS9bLNJNfJFkqTk45GQesjXI/CyXampx3ksYNxV9fMXuv4FWIjJa1jEvD4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"HTTP Connection\"\n        title=\"\"\n        src=\"/notes/static/a1deff8199936e109da540bad6d9d3ae/0d166/lec2-http.png\"\n        srcset=\"/notes/static/a1deff8199936e109da540bad6d9d3ae/64ce7/lec2-http.png 148w,\n/notes/static/a1deff8199936e109da540bad6d9d3ae/4792b/lec2-http.png 295w,\n/notes/static/a1deff8199936e109da540bad6d9d3ae/0d166/lec2-http.png 358w\"\n        sizes=\"(max-width: 358px) 100vw, 358px\"\n      />\n  </span>\n  </a></p>\n<p><strong>HTTP is stateless</strong>: server maintains <em>no information</em> about past client requests.</p>\n<h3>Non-Persistent and Persistent HTTP Connections</h3>\n<p>When client-server interaction is taking place over TCP, it should be decided whether each request/response pair has to be sent over <em>separate</em> TCP connections, or all of the requests and their responses have to be sent over the <em>same</em> TCP connection. In the former approach, the application is said to use <strong>non-persistent connections</strong> and in the latter approach, <strong>persistent connections</strong>.</p>\n<p><strong>Non-persistent HTTP</strong></p>\n<p>When non-persistent HTTP is used, the data is sent over separate TCP connections.</p>\n<p>Suppose a user wants to browse a page that consists of a HTML and 10 images. All 11 objects reside on the same server.</p>\n<ol>\n<li>The HTTP client process initiates a TCP connection to the server on port 80. Associated with the TCP connection, there will be a socket at the client and a socket at the server</li>\n<li>The client sends an HTTP request to the server via socket. The request includes the path name to <code class=\"language-text\">index.html</code></li>\n<li>The server process receives the request message via its socket, retrieves the <code class=\"language-text\">index.html</code> object, encapsulates the object in an HTTP response message and sends the object back via its socket</li>\n<li>\n<p>The server process tells TCP to close the TCP connection</p>\n<ul>\n<li><strong>Note</strong>: TCP connection doesn't terminate until client has received the response message intact</li>\n</ul>\n</li>\n<li>The client receives the message. TCP connection terminates. The message indicates that the encapsulated object is an HTML file. The client extracts the file from the response message, parses <code class=\"language-text\">index.html</code>, and finds references to the 10 images</li>\n<li>First four steps are repeated for each referenced image/object</li>\n</ol>\n<p>The connection <strong>does not persist</strong> for all objects - for every object there has to be a TCP connection open.</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">RTT</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span> - time that it takes for package to travel from client to server and back.</p>\n<p>Non persistent HTTP response time is <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>2</mn><mi>R</mi><mi>T</mi><mi>T</mi><mo>+</mo><mtext>File transmission time</mtext></mrow><annotation encoding=\"application/x-tex\">2RTT + \\text{File transmission time}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord text\"><span class=\"mord\">File transmission time</span></span></span></span></span>. If object is small, then time is negligible, however if object is large then response time would be big. For example, time to get the page with 10 images would take:</p>\n<p>HTTP response time:</p>\n<ul>\n<li>One RTT to initiate TCP connection</li>\n<li>One RTT for HTTP request and first few bytes of HTTP response to return</li>\n<li>File transmission time</li>\n</ul>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mtext>base html</mtext><mo>=</mo><mn>2</mn><mi>R</mi><mi>T</mi><mi>T</mi><mspace linebreak=\"newline\"></mspace><mtext>each object will</mtext><mo>=</mo><mn>2</mn><mi>R</mi><mi>T</mi><mi>T</mi><mspace linebreak=\"newline\"></mspace><mtext>total time to get page</mtext><mo>=</mo><mn>2</mn><mi>R</mi><mi>T</mi><mi>T</mi><mo>+</mo><mn>10</mn><mo>∗</mo><mn>2</mn><mi>R</mi><mi>T</mi><mi>T</mi><mspace linebreak=\"newline\"></mspace><mtext>total time to get N objects</mtext><mo>=</mo><mn>2</mn><mi>R</mi><mi>T</mi><mi>T</mi><mo>+</mo><mi>N</mi><mo>∗</mo><mn>2</mn><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">\\text{base html} = 2RTT \\\\\n\\text{each object will} = 2RTT \\\\\n\\text{total time to get page} = 2RTT + 10*2RTT \\\\\n\\text{total time to get N objects} = 2RTT + N*2RTT</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord text\"><span class=\"mord\">base html</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord text\"><span class=\"mord\">each object will</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord text\"><span class=\"mord\">total time to get page</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord text\"><span class=\"mord\">total time to get N objects</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span>\n<p><strong>Non persistent connection with pipelining</strong></p>\n<p>As a result, a client will need to open multiple parallel TCP connections and then send one request for each connection. For previous example, it will take <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>4</mn><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">4RTT</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord\">4</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span>.</p>\n<p><strong>Persistent HTML</strong></p>\n<p>With persistent connections, the server leaves TCP connection open after sending a response. Subsequent requests and responses between same client and server can be sent over the same connection. In particular, an entire page can be sent over a single persistent TCP connection. Typically, the HTTP server closes a connection when it isn't used for some time.</p>\n<p>For previous example then, the total time will be <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>3</mn><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">3RTT</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord\">3</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span></span></span></span>.</p>\n<h3>HTTP messages</h3>\n<p>There are two types of HTTP messages: <strong>request</strong> and <strong>response</strong>. Both request and response messages have same format, both have a request line, and HEAD lines.</p>\n<p><strong>Request</strong></p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/5727cf3966f0e0e0a55fdec6fcccf480/07bf9/lec2-request-format.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 62.17821782178218%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB50lEQVQoz41Sa3OiQBD0//+su3y4u5hYUdQQFBWjHMj7sQvsQt8MFJQmX26rutiZXXqne2YmpUQUJfC8BGGYwPd9igPcbgn+eimKIofrXikXUy5DEGR0L6T9jc49VEUBdQvQeD46pTCL4wjL5RE/fu7xtnQwf3nDdvuB9fqMxcImMg9PT79gWTae5wf8/mNht7PxYZowLQuZ40C8LtAQaac1ZkmSYL05E9knVsYnlqtLjw3lDocdrJ1LsUv7ExzHpscMZGkKXkygogj3qyesqgpt2xI0NF0av02j0HUaHcWK5GjdkgUlsiybCOrLBWJloDqeBkL2Q2uF/111XSOO46FCjp0zhLGGTodHZimV7/khgjDtG8EIghEBNSCFT7mIpDGR67rI83wi1Fk+PdZ13SDZoAY8z0/k1eDhyrhis71gv9/Dtj3y94rj0aG9Td5uUJblnYdxTzSi77LjnGCa71SdD9XUkFKAx6ksBSr61rWEEENO9nGNRqmBhLwfyaamsDSWw/ILmiuGEOWEsiymPCMn8D8jyYNkPuAOf11XV2Jv57APBflYfzvnwdZE0JKf8t1ES5VPFfKrLIPHZ0RRSKpEUAMEVSgfznk/FcLjVtW99J6waZq+a/eSGCzzHg+S6f7YmK+S/wFiEJUFgaRteQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Request message format\"\n        title=\"\"\n        src=\"/notes/static/5727cf3966f0e0e0a55fdec6fcccf480/623ee/lec2-request-format.png\"\n        srcset=\"/notes/static/5727cf3966f0e0e0a55fdec6fcccf480/816c5/lec2-request-format.png 148w,\n/notes/static/5727cf3966f0e0e0a55fdec6fcccf480/c766b/lec2-request-format.png 295w,\n/notes/static/5727cf3966f0e0e0a55fdec6fcccf480/623ee/lec2-request-format.png 590w,\n/notes/static/5727cf3966f0e0e0a55fdec6fcccf480/e5345/lec2-request-format.png 885w,\n/notes/static/5727cf3966f0e0e0a55fdec6fcccf480/07bf9/lec2-request-format.png 1010w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>Request messages are written in <strong>ASCII</strong> text. Messages also consist of several lines. The first line of an HTTP request message is called <strong>request line</strong>; the subsequent lines are called the <strong>header lines</strong>. Request line contains the method type. There can be several different values:</p>\n<ul>\n<li>\n<p><code class=\"language-text\">GET</code></p>\n<ul>\n<li>The majority of HTTP request messages use <code class=\"language-text\">GET</code> method. The <code class=\"language-text\">GET</code> method is used when the browser requests an object</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">POST</code></p>\n<ul>\n<li>An HTTP client uses <code class=\"language-text\">POST</code> requests to send forms. With a <code class=\"language-text\">POST</code> message, the user is still requesting a web page from the server, but the specific contents of the web page depend on what user entered into the form fields</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">HEAD</code></p>\n<ul>\n<li>Similar to <code class=\"language-text\">GET</code>; when a server receives <code class=\"language-text\">HEAD</code>, it responds with an HTTP message, but leaves out the requested object</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">PUT</code></p>\n<ul>\n<li>Allows user to upload an object to a specific path (directory) of a web server</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">DELETE</code></p>\n<ul>\n<li>Allows user to delete an object from the server</li>\n</ul>\n</li>\n</ul>\n<p>Header lines can contain various parameters. The information provided by the host header line is required for Web proxy caches. By including <code class=\"language-text\">Connection: close</code>, the browser is telling the server <strong>to close connection after sending the requested object</strong>. The <code class=\"language-text\">User-agent:</code> specifies client's browser type. Every header line is separated using <code class=\"language-text\">\\r\\n</code>.</p>\n<p><strong>Response</strong></p>\n<p>Response message contains three sections: initial <strong>status line</strong>, <strong>header lines</strong>, and the <strong>entity body</strong>. The entity body contains the requested object itself. The body is separated from the response header using <code class=\"language-text\">\\r\\n\\r\\n</code>. The status line contains the protocol version a status code and a corresponding status message.</p>\n<p><strong>Cookies</strong></p>\n<p>HTTP server is stateless, it allows simples server design and permits to develop high performance servers that can handle many simultaneous TCP connections. However, websites sometimes need to identify users, either because server wishes to restrict some access or because it wants to serve content to that specific user. For these purposes, HTTP uses cookies.</p>\n<p>Cookies allow sites to keep track of users. Cookie technology has four components:</p>\n<ol>\n<li>A cookie header line in the HTTP response message</li>\n<li>A cookie header line in the HTTP request message</li>\n<li>A cookie file kept on the <strong>user's</strong> end system and managed by the user's browser</li>\n<li>A backend database of the website</li>\n</ol>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/88509b31fc1a079fae83e5c87ce40aa6/18028/lec2-cookies.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 92.65625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAACqklEQVQ4y31U247aMBDl/3+lVf+gavtSVStt1e0uLSywgUAgkNi5x/ElOR0bwiWLOtIQY4/HZ2bOzKjrOnQA2rZFsNkgDEPYPSvu7LRWSiGKIjDGnG1/PpSR2zwdfPj4CV++fnNrQ5d6h/3Fn89/MJl7bt1e7d84tD+5UND0ffk7xePT8zuj/t73xyeMp/Ojw9ODQ6TksMOjH2McMIKlEdYKfqmwZCl4USFvJDSFa+1gzDncy2PdjY6sAecJkiShjRaq7WCvl6ZDUEq8xSkWUYIFLxA1Gh3Za62dDp0fczjYMI1AnaVgSYr1dofF7oCA8uHVBl6lUVUVlssllp6HOIqdU0PIbdGklMcczliFFa8If4vxPsHDKsTDZIFVUiBTxhXoGN8xb9aBOYXfNA28Nw/r9RpZmmIkhcDvhY/pKoBdh7LFlhC9HjjGmxCv6wARoc3yHIrQ35OyLCFPZyMLNeXMqdbGoehFE4JDKTBLa8wKhXkhUdOje+JqHMfI6RGb+4TF+Dw7YB6Xx5CvpZIKrBLY8YwMqCCkm6zEXnZIVOsqzhmHIrs+bFuoSUh5J4YQQqqYbJwKysc2rxEUwl02lm/Xr7Xmbsja2MjMKWRystge4IeRS2pMjhjxbxVswTiHKAtCI8mXOZP5unta07rwhRAXYr/sUswPmSO20C1CoTFnGWZRiumeI6CQLclrdYvQctFW2VwRfmR55ROv1r7vDl1HHDkCRYYR5dPjOX5lCq+lRl1TSoLAoUqpINfkdp0ynCqZaKjtCB0rCGUOPy1dh2jqoL5LLE3sd9h+52nT/7HJ3VWSyEwF6S5Ye5FU2SGi4YC4oY1NbEMpOI8Y0vakPYH75A+dnR02NE04dcLl4P0EuUZwb2TdDIeslvixJNZn2d3XhyPqf86s/APEDMbnpR+kQQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Keeping user state with cookies\"\n        title=\"\"\n        src=\"/notes/static/88509b31fc1a079fae83e5c87ce40aa6/623ee/lec2-cookies.png\"\n        srcset=\"/notes/static/88509b31fc1a079fae83e5c87ce40aa6/816c5/lec2-cookies.png 148w,\n/notes/static/88509b31fc1a079fae83e5c87ce40aa6/c766b/lec2-cookies.png 295w,\n/notes/static/88509b31fc1a079fae83e5c87ce40aa6/623ee/lec2-cookies.png 590w,\n/notes/static/88509b31fc1a079fae83e5c87ce40aa6/e5345/lec2-cookies.png 885w,\n/notes/static/88509b31fc1a079fae83e5c87ce40aa6/7a439/lec2-cookies.png 1180w,\n/notes/static/88509b31fc1a079fae83e5c87ce40aa6/18028/lec2-cookies.png 1280w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<h3>Web caches (proxy server)</h3>\n<p>A <strong>web cache</strong> - also called <strong>proxy server</strong> - is a network entity that processes HTTP requests on behalf of origin server. The web cache has its own disk storage and keeps copies of recently requested objects in the storage.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/169e8cae83e262f0b3aec75a397a89f2/f5e5c/lec2-webcache.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 70.48710601719198%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACdElEQVQ4y3VU/W/SUBTt/2qMi/+NiYn+4JLFLNuiyRZFwYxNQN0WnJNtDDYUaDc+SkvpF/2gvL4eb1vYYMGXvr729t7z7j33vAqaNsLXQhGidIt0RMmdRxHoohlhcUSJfdlmmBZqf9vwfB/C+cUlnq09x8fM5+TjwOPQA74E7jgOPM8D5/weZMojyOR760Woi11s7mXRH6gQ1KGGja33KJa+QbImONJC/NIZWuMQQZgCNptNVH5XMPE9BGSKgUpDhrwyRcsDypUqXqxvoq8QoE9p5ktHKB6X0VM1nOgcOXWKT2oaYFK2QQxEfj7jqFshyrRhkeY5TW0K3HW62M0dwLBsCDEfcr+PXrebZMOolFsnxMmIUbYMpwbHyBqj05MhO1N8pwpKZK+aYUJPXIOqKqhdXcHQ9RQw5iYMwyWy7WmElh2CEsJNU8T2hxwaAx11B9AnfOab+usEJIliwvU94KruaRRIlePHaQUvN3ZgmSb4rIoHJSzHCFgWRdI9xecoEun7xOEfN86wja3dDMSRjTMzQs1kCberhhDLQZQkGIYBNy6Pajwm/vI0K0YIyXkItFmEA9okT5tlqXGn5BMLwXVd9NUhGGMQKucXePJ0DbnsF2gBUCTHAgVUCbhHpM/LmnMWa/TMYCgR2CH5XlocYlfGdmYfsjKE0OvLeP1mAweHBXgsxA01QvX5ytNxzxetHZfjioAl0uHPizpevX2X6tB1PWTyhUSLQ01bOiGPG/X43WPpxg3ieH1nD5puQIg7LFLL2+12Kp1HgdHsTM+f5ytfkI2iKGg0GrDtmbCDIMBkMvnv4V/5c1jwG8gybq6vMR6P8Q+IcCMww9aqYwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Web cache\"\n        title=\"\"\n        src=\"/notes/static/169e8cae83e262f0b3aec75a397a89f2/623ee/lec2-webcache.png\"\n        srcset=\"/notes/static/169e8cae83e262f0b3aec75a397a89f2/816c5/lec2-webcache.png 148w,\n/notes/static/169e8cae83e262f0b3aec75a397a89f2/c766b/lec2-webcache.png 295w,\n/notes/static/169e8cae83e262f0b3aec75a397a89f2/623ee/lec2-webcache.png 590w,\n/notes/static/169e8cae83e262f0b3aec75a397a89f2/f5e5c/lec2-webcache.png 698w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>As an example, suppose a browser is requesting the object <code class=\"language-text\">http://www.example.com/file.gif</code>:</p>\n<ol>\n<li>The browser establishes a TCP connection to the web cache and sends HTTP request for the object to the web cache.</li>\n<li>The web cache checks to see if it has a copy of the object stored locally. If it does, web cache returns the object within an HTTP response message to the client browser.</li>\n<li>If the web cache doesn't have the object, the web cache opens a TCP connection to the origin server. The web cache then sends an HTTP request for the object into the cache-to-server TCP connection. After receiving this request, the origin server sends the object within an HTTP response to the web cache.</li>\n<li>When the web cache receives the object, it stores a copy in its local storage and sends a copy within an HTTP response message to the client browser over the existing TCP connection between web cache and client.</li>\n</ol>\n<p>Web cache acts as a client <em>and</em> a server at the same time. When it receives requests from and sends responses to a browser, it is a <em>server</em>. When it sends requests to and receives responses from an origin server, it is a <em>client</em>.</p>\n<p><strong>Conditional GET</strong></p>\n<p>The goal is not to send an object if cache has up-to-date cached version. This results in lower link utilization. Using <code class=\"language-text\">If-modified-since: &lt;date&gt;</code> header, we can check if an object has been modified after given <code class=\"language-text\">&lt;date&gt;</code>. Response won't contain any data, if cached copy is up to date: <code class=\"language-text\">HTTP/1.1 304 Not Modified</code>.</p>\n<h2>Email Protocol</h2>\n<p>Email infrastructure has three components. <strong>User agents</strong>, <strong>mail servers</strong>, <strong>SMTP: simple mail transfer protocol</strong>. SMTP uses (secure) TCP to transfer email messages, it operates on port 25.</p>\n<p>Mail servers consist of:</p>\n<ul>\n<li><strong>Mailbox</strong> contains incoming messages for user</li>\n<li><strong>Message queue</strong> of outgoing (to be sent) messages</li>\n<li>\n<p><strong>SMTP protocol</strong> between mail servers to send email messages</p>\n<ul>\n<li>client: sending mail server</li>\n<li>server: receiving mail server</li>\n</ul>\n</li>\n</ul>\n<p><strong>SMTP</strong></p>\n<p>SMTP uses TCP to reliably transfer email from client to server and it operates on port 25. SMTP requires commands/body to be sent in ASCII. As a response, SMTP sends status code and a phrase.</p>\n<h3>Mail access protocols</h3>\n<ul>\n<li><strong>SMTP</strong>: delivery/storage to receiver's server</li>\n<li>\n<p>mail access protocol: retrieval from server:</p>\n<ul>\n<li><strong>POP</strong>: Post Office Protocol</li>\n<li><strong>IMAP</strong>: Internet Mail Access Protocol</li>\n<li><strong>HTTP</strong>: used in webmail, like gmail</li>\n</ul>\n</li>\n</ul>\n<h2>DNS</h2>\n<p>DNS is one of the core functionalities, but it is provided on the application level. Hosts has to implement it. The primary functionality of DNS is to map human readable URLs to IP addresses, that are understandable by the network layer protocol. <strong>Domain Name System (DNS)</strong> is a distributed database. It is implemented in hierarchy of many <em>name servers</em>. The DNS protocol runs over <strong>UDP</strong> and uses port 53.</p>\n<ul>\n<li>Distributed database: implemented in hierarchy of many <strong>name-servers</strong></li>\n<li>Application layer protocol: hosts, name servers communicate to <strong>resolve</strong> names</li>\n</ul>\n<p><strong>Structure, services</strong></p>\n<ul>\n<li>DNS provides host aliasing.</li>\n<li>\n<p>DNS can be used for load distribution</p>\n<ul>\n<li>replicates web servers: many IP addresses correspond to one name</li>\n</ul>\n</li>\n</ul>\n<p><strong>Overview of how DNS works</strong></p>\n<p>DNS servers are distributed. DNS isn't centralized due to several reasons:</p>\n<ul>\n<li>single point of failure: if one DNS server crashes, so does the Internet</li>\n<li>traffic volume: a single DNS server would have to handle all DNS queries</li>\n<li>distant centralized database: a single DNS cannot be close to all querying clients.</li>\n<li>maintenance</li>\n</ul>\n<p><strong>Example</strong> of DNS hierarchical database:</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/37a98d18a08b2dd7e8c95437b5202208/e7229/lec2-dns.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 38.37579617834395%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABh0lEQVQoz1VS207CQBDt//+HRk1MjA9GxRs+GKxAhBjijVIqNEXa0qXddrfdcpxdqcEmkzkzc2Z2zm6tzWaDxpqvQe6Soev4eHYD9N0FApb/qxu806u99TeCgrquUStlTBedRQz73UPvwyP/BT9ODU81HOLDDNsZaE7YpgohIcsKgrwQAqqqTLPGmleWJSRhIbc88k1vs6WlCNhOgNbgE9dDspcJQi5NceTHOO+/m3xr6MANU5OfrzjFY5O/fP7AwFv+l7xc5/gKE7iLCHOSJSplCDEXmEUMM6r5qwys+D0olxXm0RpT4uu+OCv+7tTSQZiskeYFSRaI1hlCliEVpZHCpUKS5RDqVxIva8OJUw5eCDCu+1MkuYSqacP9mycctnt4/JzDizPs39g4avdxP5ogEQonnRcc3nVxMRhD0hvYYx97Vx0cPwzx9p3irPuKg9snnNojMFHBcoIYThBhwThtVaGJA4pFVWNCL63NCxn0fQdJhjHVJ98rRKTOI8n6b5guE0ji/wA8/13eSMUCbwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"DNS Hierarchy\"\n        title=\"\"\n        src=\"/notes/static/37a98d18a08b2dd7e8c95437b5202208/623ee/lec2-dns.png\"\n        srcset=\"/notes/static/37a98d18a08b2dd7e8c95437b5202208/816c5/lec2-dns.png 148w,\n/notes/static/37a98d18a08b2dd7e8c95437b5202208/c766b/lec2-dns.png 295w,\n/notes/static/37a98d18a08b2dd7e8c95437b5202208/623ee/lec2-dns.png 590w,\n/notes/static/37a98d18a08b2dd7e8c95437b5202208/e7229/lec2-dns.png 628w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p><strong>Root name servers</strong></p>\n<p>Contacted by local name server that cannot resolve name. Root name server:</p>\n<ul>\n<li>either knows the name mapping</li>\n<li>or knows the name of the server that knows the mapping</li>\n</ul>\n<p><strong>TLD, authoritative DNS servers</strong></p>\n<ul>\n<li><strong>Top-level domain (TLD)</strong> servers are responsible for com, org, net, edu, .. etc and all top level country domains, e.g.: uk, ca, ru. Network Solutions maintains servers for .com TLD.</li>\n<li><strong>Authoritative DNS servers</strong> contain organization's own DNS serve(s), providing authoritative hostname to IP mappings for organization's named hosts.</li>\n</ul>\n<p><strong>Local DNS name server</strong></p>\n<p>Each ISP has one local DNS, also called \"default name server\". When host makes DNS query, query is sent to its local DNS server. It contains local cache of recent name-to-address translation pairs. Also acts as proxy, forwards query into hierarchy.</p>\n<p><strong>DNS records</strong></p>\n<p>The format of DNS record is <code class=\"language-text\">(name, value, type, ttl)</code></p>\n<ul>\n<li>\n<p>type = <code class=\"language-text\">A</code></p>\n<ul>\n<li>name is hostname</li>\n<li>value is IP address</li>\n</ul>\n</li>\n<li>\n<p>type = <code class=\"language-text\">NS</code></p>\n<ul>\n<li>name is domain (*.com)</li>\n<li>value is hostname of authoritative name server for this domain</li>\n</ul>\n</li>\n<li>\n<p>type = <code class=\"language-text\">CNAME</code></p>\n<ul>\n<li>name is the alias name for some \"canonical\" (real) name</li>\n<li>value is canonical name</li>\n</ul>\n</li>\n<li>\n<p>type = <code class=\"language-text\">MX</code></p>\n<ul>\n<li>value is name of mailserver associated with name</li>\n</ul>\n</li>\n</ul>\n<h2>P2P Applications</h2>\n<p>P2P architecture is decentralized, there's no always-on server. Arbitrary end systems directly communicate with each other. Peers are intermittently connected and change IP addresses.</p>\n<p><strong>Example: BitTorrent</strong></p>\n<ul>\n<li>file is divided into 256 kb chunks</li>\n<li>peers in torrent send/receive file chunks</li>\n<li><strong>tracker</strong>: tracks peers participating in torrent</li>\n<li><strong>torrent</strong>: group of peers exchanging chunks of a file</li>\n</ul>\n<h2>Video streaming and Content Distribution Networks (CDNs)</h2>\n<p>Major challenge: scale - how to reach massive amount of users? Different users have different capabilities, <strong>heterogeneity</strong>. The solution is to use <em>distributed</em> application-level infrastructure.</p>\n<p><strong>Multimedia: video</strong></p>\n<p>Video is a sequence of images, displayed at a constant rate. Digital image is represented as array of pixels. Using Coding, use redundancy within (<strong>spatial</strong>) and between images (<strong>temporal</strong>) to decrease number of bits used to encode image.</p>\n<ul>\n<li><strong>CBR</strong> constant bit rate: video encoding rate is fixed</li>\n<li><strong>VBR</strong> variable bit rate: video encoding rate changes as amount of spatial, temporal coding changes</li>\n</ul>\n<h3>DASH</h3>\n<p><strong>DASH</strong> stands for <strong>D</strong>ynamic, <strong>A</strong>daptive <strong>S</strong>treaming over <strong>H</strong>TTP.</p>\n<ul>\n<li>Server divides video into multiple chunks and each chunk is stored, each chunk is also encoded at different rates. <em>Manifest file</em> provides URLs for different chunks.</li>\n<li>Client periodically measures server-to-client bandwidth, consults manifest, requests one chunk at a time. Client chooses maximum coding rate sustainable given current bandwidth. Client can also choose different coding rates at different points in time (depending on available bandwidth at time).</li>\n</ul>\n<h3>CDN</h3>\n<p>How to stream content to hundreds of thousands of simultaneous users? The solution is to <strong>store multiple copies of videos at multiple geographically distributed sites</strong> - CDN. So, CDN servers are pushed closer to users.</p>","frontmatter":{"title":"Application Layer","date":"2019-01-21","description":"Chapter 2"},"fields":{"slug":"/cpsc441/lec2-application-layer","category":"cpsc441"}}},{"node":{"id":"c9ced158-54a0-55c7-8b0f-5cf4a1531ca6","html":"<h2>What is the Internet?</h2>\n<p>The Internet is a computer network that interconnects millions of devices throughout the world. All of these devices are called <strong>hosts</strong> or <strong>end systems</strong>.</p>\n<p>End systems are connected together by a network of <strong>communication links</strong> and <strong>packet switches</strong>. Different links can transmit data at different rates, with the <strong>transmission rate</strong> of a link measured in bps (bits/second). When one host sends data to another, the sending host segments the data and adds header bytes to each segment. The resulting packages of information, called <strong>packets</strong>, are then sent through the network to the destination host, where they are reassembled into the original data.</p>\n<p>A packet switch takes a packet arriving on one of its incoming communication links and forwards packeton one of its outgoing communication links. <strong>Routers</strong> and <strong>link-layer switches</strong> are used the most for forwarding packets toward their ultimate destinations.</p>\n<h3>A Services Description</h3>\n<p>The Internet can be described as an infrastructure that <em>provides services to applications</em>. End systems attached to the Internet provide <strong>API</strong> that specifies how a program running on one end of the system asks the Internet to deliver data to a specific destination program running on another end system.</p>\n<h3>Network Protocols</h3>\n<p>A <strong>protocol</strong> defines the <em>format and the order of messages</em> exchanged between two or more communicating entities, as well as the actions taken on the transmission and/or receipt of a message or other event. The <strong>Transmission Control Protocol</strong> and the <strong>Internet Protocol</strong> are two of the most important protocols in the Internet.</p>\n<h2>The Network Edge</h2>\n<p>Network edge contains hosts, clients and servers. Servers often located in data centers. At the edge, networks organized as small <strong>access networks</strong>. Edge is connected to the core through <strong>edge routers</strong>.</p>\n<h3>Access networks</h3>\n<p><strong>Access network</strong> is the network that physically connects an end system to the first router (known as <strong>edge router</strong>) on a path from the end system to any other end system.</p>\n<h4>Home access to the Internet</h4>\n<p><strong>Digital Subscriber Line (DSL)</strong></p>\n<p>A residence typically obtains DSL Internet access from the same telephone company that provides its wired local phone. Each customer's DSL modem uses the same telephone cable. DSL connection therefore is dedicated to the user (e.g. not shared like cable).</p>\n<p><strong>Cable network</strong></p>\n<p>The Internet is obtained through existing television (<em>coaxial</em>) cable. A network of cable (or fiber) attaches houses to ISP, however the connection is <strong>shared</strong> between the users, unlike DSL, which provides dedicated access.</p>\n<h4>Wireless access networks</h4>\n<p>Shared wireless access network connects end system to router via \"access point\" station.</p>\n<h2>The Network Core</h2>\n<p>The core is a mesh of interconnected routers. <strong>Packet-switching</strong>: hosts break down data in packages. The goal of packet switching is to forward packets from one router to the next, across links on path from source to destination. Each packet transmitted at <em>full link capacity</em>.</p>\n<p>Key network core functions:</p>\n<ul>\n<li><strong>Routing</strong>: determines source-destination route taken by packets.</li>\n<li><strong>Forwarding</strong>: move packets from router's input to appropriate router output.</li>\n</ul>\n<h3>Packet-switching</h3>\n<p>In a network application, end systems exchange <strong>messages</strong> with each other. To send a message from a source end system to destination end system, the source breaks long messages into smaller chunks of data known as <strong>packets</strong>. Between source and destination, each packet travels through communication links and <strong>packet switches</strong>.</p>\n<p><strong>Store-and-forward</strong></p>\n<p>Most packet switches use <strong>store and forward</strong> transmission at the inputs, which means a packet switch must receive the entire packet before it can begin to transmit the first bit of the packet onto the outbound link.</p>\n<p>Consider the general case of sending one packet from source to destination over a path consisting of <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span></span></span></span> links each of rate <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span></span></span></span> (thus, there are <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>N</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">N - 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> routers). End-to-end (E2E) delay is calculated using the following formula:</p>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>D</mi><mrow><mi>e</mi><mi>n</mi><mi>d</mi><mo>−</mo><mi>t</mi><mi>o</mi><mo>−</mo><mi>e</mi><mi>n</mi><mi>d</mi></mrow></msub><mo>=</mo><mi>N</mi><mo>⋅</mo><mfrac><mi>L</mi><mi>R</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">D_{end-to-end} = N \\cdot \\frac{L}{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.891661em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361079999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">e</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mord mathdefault mtight\">d</span><span class=\"mbin mtight\">−</span><span class=\"mord mathdefault mtight\">t</span><span class=\"mord mathdefault mtight\">o</span><span class=\"mbin mtight\">−</span><span class=\"mord mathdefault mtight\">e</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mord mathdefault mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">N</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.04633em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">L</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>\n<p><strong>Queueing delay, loss</strong></p>\n<p>Each packet switch has multiple links. For each attached link, the packet switch has an <strong>output buffer</strong> (also called <strong>output queue</strong>), which stores packets that the router is about to send into that link. If the link is busy, the arriving packet must wait in output buffer. In addition to the store-and-forward delays, packets suffer <strong>queueing delays</strong>. Packets can be dropped (lost) if buffer fills up, which results in <strong>packet loss</strong>.</p>\n<h3>Circuit switching</h3>\n<p>In circuit switched networks, the resources needed along the path to provide for communication between end systems, are <em>reserved</em> for the duration of the communication between end systems. There is no sharing of connection between different end systems: each end system gets its own connection.</p>\n<p>A circuit in a link is implemented with either <strong>frequency-division multiplexing (FDM)</strong> or <strong>time-division multiplexing (TDM)</strong>.</p>\n<p><strong>FDM</strong></p>\n<p>The frequency spectrum of a link is divided up among the connection established across the link. Specifically, the link dedicates a frequency band to each connection <em>for the duration of the connection</em>.</p>\n<p><strong>TDM</strong></p>\n<p>For a TDM link, time is divided into frames of fixed duration, and each frame is divided into a fixed number of slots. When the network establishes a connection across a link, the network dedicates one time slot in every frame to this connection.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/6582b40e50305295226310369babddce/7be2f/lec1-fdm-tdm.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 61.91616766467066%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACYklEQVQoz5WTS09TQRTHm/AV/ABKWKh7ows3fgCNCxcmkhij+IgLQ+ILJC50IQmPlRINUFiYKBpXCgE1BGOQkJo2FKSlLS1t772tpbbYB33duT9nesujxo3/mX9m5pybc+ec8x9HrVajUqlgWRY7UHshae2jELY/m90iGAwSCq0Tj2s0w8KRSqXwer2USqW6SQix6wRTWRo067bSdo54LCyDrlIt53H5t/BrLynOfcfUwdEcxEahsE3qp2C7CPmcPOdtFgvyhhnQtaoMWq7bfOtgpJepRDRErhFQpZTJZEin0/KjPIFIhCtDT+lwjtIxOtzEq84Rro87uTE+xjXpvzQ8hHfDsLOTw2HXR8h6xIlEwuhGkpDPzdcnh1kaOIi7v1XyEB7Fgdb66u6z6RlsY/HxAYzVGbtIwrRv+DfyqRyBnjX0bo34gxjxbpuRu2GiXRt7tp4YsdtRogtRqnKosjtUmn6/n3K53NQUIb2CmmyFvapzKB1E+63JnbKZdauoN4tdlTiUZLLZLKZpNiQi+1mr8D9QP7Cn9e+UE4kCU4sfyXk+sfA5jh6YYHlSZhKeIDoZw7U2za85N/OuJTZd7zGjjbCiEVCJOxxW2gpJSYRYdBU53d+Ofu84l0/NMj/WQt+RAC/etTB1dJrOkWOEz9znQucj/J1tWK8aRapZe7JRNcznCwizhG+tzM3nd4gMXuRhxxe+vTnB8LkfvJ05yez5OXpft+O/NUhX7zNWes9S+GDatZTTsf/J7aBSqaLpGklDR9cTJBMahpbE7XHhW/GRSBokdUNKTK2afASb9R4o/AGVKVkufXnpcQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"FDM vs TDM\"\n        title=\"\"\n        src=\"/notes/static/6582b40e50305295226310369babddce/623ee/lec1-fdm-tdm.png\"\n        srcset=\"/notes/static/6582b40e50305295226310369babddce/816c5/lec1-fdm-tdm.png 148w,\n/notes/static/6582b40e50305295226310369babddce/c766b/lec1-fdm-tdm.png 295w,\n/notes/static/6582b40e50305295226310369babddce/623ee/lec1-fdm-tdm.png 590w,\n/notes/static/6582b40e50305295226310369babddce/7be2f/lec1-fdm-tdm.png 835w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<h3>Packet switching vs. Circuit switching</h3>\n<p>For example, consider:</p>\n<ul>\n<li>\n<p>1 Mb/s link</p>\n</li>\n<li>\n<p>each user:</p>\n<ul>\n<li>uses 100 kb/s</li>\n<li>active 10% of the time</li>\n</ul>\n</li>\n<li>\n<p>Circuit switching</p>\n<ul>\n<li>10 users (1Mbps/100kbps)</li>\n</ul>\n</li>\n<li>\n<p>Packet switching</p>\n<ul>\n<li>with 35 users, the probability that there are 11 or more active users is approximately 0.0004.</li>\n</ul>\n</li>\n</ul>\n<p>In this example, packet switching provides same performance as circuit switching but allows more users.</p>\n<p>Packet switching is more suitable for bursty data: resource sharing, simpler setup.</p>\n<h3>Network of networks</h3>\n<p>End systems connect to the Internet via <strong>access ISPs</strong>. Access ISPs must be interconnected, so that any two hosts can talk to each other. Evolution of resulting network of networks was driven by economics and national policies.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/2cebc041149d9ec4860e369a624a03db/f1ae9/lec1-isp-struct.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 45.833333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAAB0klEQVQoz22SW2/TQBSE8///BbwiBCp9aBFFqqC0VL2QpkmcpGntOE7ixPH9fvs46wh4oCsdW57ZMzuzxz1eWVVVURSFvEuapqapD1XXB1xV0zSvtdLL8oL5wuJ+qPE4fcaw1pTSUItAFCdMdZPbx7Fwcza7fYcrMcUNtCm3g1FXc8OkbVt6fhjzczDm+Ms5Z5c3zEQ8y7LO5d4PueqPOu6r4owlnufhuS6rjc3p+QUfT8949+lERMc0SvCPVXXiXjaOtUnnsMgz4jDAF4EkTVmt1wyHI8HzjiuLnKosCYIQ3VhgSHWR1UNFUCJRFKFNppi2w5O1Zb1zSeSgVAQdx2H2NMcNIsydj+3H5NKTxDGWZaHrxj/BSu5FxVSCap31n3hzcsHldEma5R2nmktx1Nc3vD39wfH1CC/JCYOAWgwpU+3fyG3TxagkhnxIxIwwTkUs+2+KasKKU1eUpwmtTL6TkD+icxiVDVfPNtsoQ7MDhisXNy25Wzj4mTgy9xheih0X3Bi7A7Z0Wboxs43Lg+URFg3X+pZdUtLbphXvfxmYcc235x3fXxwWkWD3Opus5bO24m4VMHFSjgYm2wKOHhZo+4z+JuJkZGHLvg99gxc/5zfnMaVZ5NjvrQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"ISP Structure\"\n        title=\"\"\n        src=\"/notes/static/2cebc041149d9ec4860e369a624a03db/623ee/lec1-isp-struct.png\"\n        srcset=\"/notes/static/2cebc041149d9ec4860e369a624a03db/816c5/lec1-isp-struct.png 148w,\n/notes/static/2cebc041149d9ec4860e369a624a03db/c766b/lec1-isp-struct.png 295w,\n/notes/static/2cebc041149d9ec4860e369a624a03db/623ee/lec1-isp-struct.png 590w,\n/notes/static/2cebc041149d9ec4860e369a624a03db/f1ae9/lec1-isp-struct.png 624w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<h2>Delay, Loss, and Throughput in Packet-Switched Networks</h2>\n<p>As a packet travels from one node to the subsequent node in the network, the packet suffers from several types of delays at <em>each</em> node:</p>\n<ul>\n<li><strong>Processing delay</strong></li>\n<li><strong>Queueing delay</strong></li>\n<li><strong>Transmission delay</strong></li>\n<li><strong>Propagation delay</strong></li>\n</ul>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/8510cb77ea7cad3b035b539e849c1710/76473/lec1-delay.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 493px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 41.58215010141988%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABa0lEQVQoz42SS2/UQBCE/f+PkBUccgF+AlzCBaQQDqBATATarGMnrL1GJOvH+DVe2+OPHkdxskhItFQaq6amu7rbjut+48XLV9xmOXcxMo4PYGbZ4/8F5/Sry2LxjOPzJZ8STTuMcwIbuSpYBwGYnv8JJ0kzjt4dc7HyKBtNnJX0XUc/DBhjyOX+8NTnbaSoe4PuhJe74RGsbh1tKKsKZ2pLsDMjlQGlO7bbLTe/b6YziiJenwe8+fET/zYnLSrapkFrTSNn27Zs4l8cvT/B/b7EMTahGYirlg+bjK0q59nZyqooaEuFzlNJVDMKVwiXZRlpmtLUNbvdbnpj9c7ZmcuTpwvCdThPzlatRdhJ67Yl24pFI64qOcMwJPD9yb3V7s1w5V1y8PyQ1aU/k1Z4sVySJAlKqenb8zziOCaXv8G6ywXWGX9t37GVP37+wsoP5latUMt8rMuyLPHFzfXVFYFsu+/3t33/5j7hH2ntYbht6eyTAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Delay\"\n        title=\"\"\n        src=\"/notes/static/8510cb77ea7cad3b035b539e849c1710/76473/lec1-delay.png\"\n        srcset=\"/notes/static/8510cb77ea7cad3b035b539e849c1710/c3590/lec1-delay.png 148w,\n/notes/static/8510cb77ea7cad3b035b539e849c1710/766ec/lec1-delay.png 295w,\n/notes/static/8510cb77ea7cad3b035b539e849c1710/76473/lec1-delay.png 493w\"\n        sizes=\"(max-width: 493px) 100vw, 493px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p><strong>Processing delay</strong></p>\n<p>The time required to examine the packet's header and determine where to direct the packet is part of the <mark><b>processing delay</b></mark>.</p>\n<p><strong>Queueing delay</strong></p>\n<p>At the queue, the packet experiences a <mark><b>queueing delay</b></mark> as it waits to be transmitted onto the link. The length of the queueing delay of a specific packet will depend on the number of earlier-arriving packets that are queued and waiting for transmission onto the link.</p>\n<p><strong>Transmission delay</strong></p>\n<p><mark><b>Transmission delay</b></mark> is the amount of time required to push (transmit) all of the packet's bits into the link.</p>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>d</mi><mrow><mi>t</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>s</mi></mrow></msub><mo>=</mo><mfrac><mi>L</mi><mi>R</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">d_{trans} = \\frac{L}{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">t</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault mtight\">a</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mord mathdefault mtight\">s</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.04633em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">L</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>\n<p>Where, <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">L</span></span></span></span> is packet length in bits, and <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span></span></span></span> is the link capacity in bps.</p>\n<p><strong>Propagation delay</strong></p>\n<p>The time required to propagate from beginning of the link to router B is the <mark><b>propagation delay</b></mark>. The bit propagates at the propagation speed of the link, usually <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>2</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>8</mn></msup><mi>m</mi><mi mathvariant=\"normal\">/</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">2 \\cdot 10^8 m/s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">8</span></span></span></span></span></span></span></span><span class=\"mord mathdefault\">m</span><span class=\"mord\">/</span><span class=\"mord mathdefault\">s</span></span></span></span> to <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mn>3</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>8</mn></msup><mi>m</mi><mi mathvariant=\"normal\">/</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">3 \\cdot 10^8 m/s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">8</span></span></span></span></span></span></span></span><span class=\"mord mathdefault\">m</span><span class=\"mord\">/</span><span class=\"mord mathdefault\">s</span></span></span></span>.</p>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>d</mi><mrow><mi>p</mi><mi>r</mi><mi>o</mi><mi>p</mi></mrow></msub><mo>=</mo><mfrac><mi>d</mi><mi>s</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">d_{prop} = \\frac{d}{s}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.980548em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15139200000000003em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">p</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault mtight\">o</span><span class=\"mord mathdefault mtight\">p</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.05744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.37144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">s</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>\n<p>Where, <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">s</span></span></span></span> is propagation speed, and <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">d</span></span></span></span> is distance between two end systems.</p>\n<hr>\n<p>Total <strong>nodal delay</strong></p>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>d</mi><mrow><mi>n</mi><mi>o</mi><mi>d</mi><mi>a</mi><mi>l</mi></mrow></msub><mo>=</mo><msub><mi>d</mi><mrow><mi>p</mi><mi>r</mi><mi>o</mi><mi>c</mi></mrow></msub><mo>+</mo><msub><mi>d</mi><mrow><mi>q</mi><mi>u</mi><mi>e</mi><mi>u</mi><mi>e</mi></mrow></msub><mo>+</mo><msub><mi>d</mi><mrow><mi>t</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>s</mi></mrow></msub><mo>+</mo><msub><mi>d</mi><mrow><mi>p</mi><mi>r</mi><mi>o</mi><mi>p</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">d_{nodal} = d_{proc} + d_{queue} + d_{trans} + d_{prop}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mord mathdefault mtight\">o</span><span class=\"mord mathdefault mtight\">d</span><span class=\"mord mathdefault mtight\">a</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.01968em;\">l</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.980548em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15139200000000003em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">p</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault mtight\">o</span><span class=\"mord mathdefault mtight\">c</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.980548em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15139200000000003em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">q</span><span class=\"mord mathdefault mtight\">u</span><span class=\"mord mathdefault mtight\">e</span><span class=\"mord mathdefault mtight\">u</span><span class=\"mord mathdefault mtight\">e</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">t</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault mtight\">a</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mord mathdefault mtight\">s</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.980548em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15139200000000003em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">p</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault mtight\">o</span><span class=\"mord mathdefault mtight\">p</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span></span>\n<ol>\n<li>Delay calculation:</li>\n</ol>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>d</mi><mrow><mi>p</mi><mi>r</mi><mi>o</mi><mi>p</mi></mrow></msub><mo>=</mo><mi>d</mi><mi mathvariant=\"normal\">/</mi><mi>S</mi><mspace linebreak=\"newline\"></mspace><msub><mi>d</mi><mrow><mi>p</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi></mrow></msub><mo>=</mo><mi>L</mi><mi mathvariant=\"normal\">/</mi><mi>R</mi><mspace linebreak=\"newline\"></mspace><mi>d</mi><mo>=</mo><msub><mi>d</mi><mrow><mi>p</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi></mrow></msub><mo>+</mo><msub><mi>d</mi><mrow><mi>p</mi><mi>r</mi><mi>o</mi><mi>p</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">d_{prop} = d/S \\\\\nd_{packet} = L/R \\\\\nd = d_{packet} + d_{prop}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.980548em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15139200000000003em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">p</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault mtight\">o</span><span class=\"mord mathdefault mtight\">p</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mord\">/</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.980548em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361079999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">p</span><span class=\"mord mathdefault mtight\">a</span><span class=\"mord mathdefault mtight\">c</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathdefault mtight\">e</span><span class=\"mord mathdefault mtight\">t</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">L</span><span class=\"mord\">/</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.980548em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361079999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">p</span><span class=\"mord mathdefault mtight\">a</span><span class=\"mord mathdefault mtight\">c</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathdefault mtight\">e</span><span class=\"mord mathdefault mtight\">t</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.980548em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15139200000000003em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">p</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault mtight\">o</span><span class=\"mord mathdefault mtight\">p</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span></span>\n<h3>Queueing delay</h3>\n<p>Router with a lot of load will have queueing delay.</p>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span></span></span></span>: Link bandwidth (bps)</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">L</span></span></span></span>: Packet length (bits)</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>λ</mi></mrow><annotation encoding=\"application/x-tex\">\\lambda</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">λ</span></span></span></span>: average packet arrival</li>\n</ul>\n<p><mark><b>Traffic intensity</b></mark> = <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mfrac><mrow><mi>L</mi><mi>λ</mi></mrow><mi>R</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{L\\lambda}{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2251079999999999em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801079999999999em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.00773em;\">R</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">L</span><span class=\"mord mathdefault mtight\">λ</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></p>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mfrac><mrow><mi>L</mi><mi>λ</mi></mrow><mi>R</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{L\\lambda}{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2251079999999999em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801079999999999em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.00773em;\">R</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">L</span><span class=\"mord mathdefault mtight\">λ</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> ~ 0: average queueing delay small</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mfrac><mrow><mi>L</mi><mi>λ</mi></mrow><mi>R</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{L\\lambda}{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2251079999999999em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801079999999999em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.00773em;\">R</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">L</span><span class=\"mord mathdefault mtight\">λ</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> >= 1: average queueing delay large</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mfrac><mrow><mi>L</mi><mi>λ</mi></mrow><mi>R</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{L\\lambda}{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2251079999999999em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801079999999999em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.00773em;\">R</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">L</span><span class=\"mord mathdefault mtight\">λ</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> > 1: more \"work\" arriving, than can be serviced, average delay infinite.</li>\n</ul>\n<p><strong>Packet loss</strong></p>\n<p>Queue preceding link in buffer has finite capacity. Packet arriving to full queue is dropped (or lost). Lost packet may be retransmitted by previous node, by source end system, or not at all.</p>\n<h3>Throughput</h3>\n<p><strong>Throughput</strong> rate (bits/time) at which bits transferred between sender/receiver. There are two different \"types\" of throughput:</p>\n<ul>\n<li><strong>Instantaneous</strong>: rate at given point in time</li>\n<li><strong>Average</strong>: rate over longer period of time</li>\n</ul>\n<p>Throughput: what is the maximum data you can send? you want to see how fast you can send, while sending as much as you can.</p>\n<ul>\n<li>\n<p>Scenario 1:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[A] ----- [B]\n    R</code></pre></div>\n<ul>\n<li>You can send bits at <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>T</mi><mi>p</mi><mi>u</mi><mi>t</mi><mo>=</mo><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">Tput = R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span></span></span></span></li>\n</ul>\n</li>\n<li>\n<p>Scenario 2:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[A] --- (x) --- [B]\n   R1      R2</code></pre></div>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>T</mi><mi>p</mi><mi>u</mi><mi>t</mi><mo>=</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo>(</mo><msub><mi>R</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>R</mi><mn>2</mn></msub><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">Tput = min(R_1, R_2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">t</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">n</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></li>\n</ul>\n</li>\n</ul>\n<hr>\n<h2>Protocol Layers, Service Models</h2>\n<p>Networks are complex. There are many pieces to it:</p>\n<ul>\n<li>hosts</li>\n<li>routers</li>\n<li>links of various media</li>\n<li>applications</li>\n<li>protocols</li>\n<li>hardware, software</li>\n</ul>\n<h3>Protocol Layers</h3>\n<p>Network components are organized into \"layers\". Each of these layers are stored in specific order. Also called <em>protocol stack</em>. Each layer implements some service:</p>\n<ul>\n<li>via its own internal-layer actions</li>\n<li>relying on service provided on layer below</li>\n</ul>\n<p>Layering helps dealing with complex systems. Explicit structure allows identification, relationship of complex system's pieces.</p>\n<h4>Internet protocol stack</h4>\n<ul>\n<li>\n<p>Application: supporting network applications</p>\n<ul>\n<li>FTP, SMTP, HTTP(S)</li>\n</ul>\n</li>\n<li>\n<p>Transport: process-process data transfer</p>\n<ul>\n<li>TCP, UDP</li>\n</ul>\n</li>\n<li>\n<p>Network: routing of datagrams from source to destination</p>\n<ul>\n<li>IP, routing protocols</li>\n</ul>\n</li>\n<li>\n<p>Link: data transfer between neighbouring network elements</p>\n<ul>\n<li>Ethernet, 802.11 (wifi), PPP</li>\n</ul>\n</li>\n<li>Physical: bits on the wire</li>\n</ul>\n<h4>ISO/OSI Reference model</h4>\n<p>The ISO proposed computer network organization called <strong>Open Systems Interconnection (OSI)</strong>, that's organized around seven layers:</p>\n<ul>\n<li>application</li>\n<li><strong>presentation</strong></li>\n<li><strong>session</strong></li>\n<li>transport</li>\n<li>network</li>\n<li>link</li>\n<li>physical</li>\n</ul>\n<p><strong>Presentation</strong></p>\n<p>Allow applications to interpret meaning of data, e,g, encryption, compression</p>\n<p><strong>Session</strong></p>\n<p>Synchronization checkpointing, recovery of data exchange.</p>\n<p>Internet stack missing these layers, however, they can be implemented in application layer, if needed.</p>\n<h3>Encapsulation</h3>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/notes/static/b33a23c82b1fff53c70fb00c70bec49f/56433/lec1-encapsulation.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 71.23595505617978%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACsUlEQVQ4y21TaVPaUBTNn++HfupM+6nTxbrRxmpLS8eiIshSlyqbgAFBwmKFAiGEkJCX7fQmCFXGN3PJ48575517z7mc67p4arXbGirlEZSxuch1ulNIIwuq7kCZ2OhJJiTZwlCxwezZGc77cXQdrNEAGw6hTiZote4QWI0g8DaMna+5BeDlaRPJL1ns81nsbmZwtJNDhM8gyqfRzNY8JHCOYcAoC2DNJlqiiFa7jbpYRzgURHx3G5uBY8RiNYxVzb8Ay4DLKEzD3/thU9B/13HBsVYLeuES1asrpLNZiPU6/nQ6OEmkcHq4j2/fBayth1GuCD5L07IftcamljHLwrxxnKNpsKZTjFQVQyp5SvtOt4vTZBIXiRiicQETjT0CUcdTKAMVcl+FbTuLvKcH95Qgpm1DIpa962vo6pgSJhzGqFQGpmtIBCP4+GYLq6+CWHudx9RkxNyaMfRQl2PxoqLAIebWaASbwhmPYUgSxFIRpesSKrkSnr3Yw8ZhFKVKxReUm1Odfx3HCweOB+7l5uBLe98d1C6mjmDYFkQStFqt/gf0gJaXp5r/2JJXvaNe51yDPKpNfGHmi3tY5nBoIJftI5Ppod/XH7B20Ov1MKBy240WDraj+LkdQWg9BvlOWdBeiOJdkOQhynkBG+9+4BMfw+etc8rPzkoEVCwWcUNllXI5pI/iODlLYOV5EKFAHqo6IAIDUtwm29Ct29tb1G5uUCM/HpChj08OsfI+iVAoD0Ym9nDte/QBGf8iHsfFZRYpPoIPgRReBnfQuevMSm7ShBQKBYg0euKVgF/RI5ynz8DzOawHdtH/SwfJLqYsg/X7MMmr7r1FoE8gKzLKBCYIAhqEwek0xxrJbRHdLk3N7/Ae8qkEjsNnmHYHZB2yjGcfGtFFD+57+1Aqr1yLHvoHXJAUd7pO3PMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Encapsulation\"\n        title=\"\"\n        src=\"/notes/static/b33a23c82b1fff53c70fb00c70bec49f/623ee/lec1-encapsulation.png\"\n        srcset=\"/notes/static/b33a23c82b1fff53c70fb00c70bec49f/816c5/lec1-encapsulation.png 148w,\n/notes/static/b33a23c82b1fff53c70fb00c70bec49f/c766b/lec1-encapsulation.png 295w,\n/notes/static/b33a23c82b1fff53c70fb00c70bec49f/623ee/lec1-encapsulation.png 590w,\n/notes/static/b33a23c82b1fff53c70fb00c70bec49f/e5345/lec1-encapsulation.png 885w,\n/notes/static/b33a23c82b1fff53c70fb00c70bec49f/7a439/lec1-encapsulation.png 1180w,\n/notes/static/b33a23c82b1fff53c70fb00c70bec49f/84fe0/lec1-encapsulation.png 1770w,\n/notes/static/b33a23c82b1fff53c70fb00c70bec49f/56433/lec1-encapsulation.png 1780w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>What if an application wants to send a message to the destination application running on another end system. They are separated by a number of switches &#x26; routers.</p>\n<ul>\n<li>\n<p>have to break it down to packets</p>\n<ul>\n<li>packets at the application layer called: <strong>layer packet</strong></li>\n<li>packets at the transport layer called: <strong>segments</strong></li>\n<li>network layer: <strong>IP datagram</strong></li>\n<li>link: <strong>frames</strong></li>\n<li>physical: no notion of packets, just <strong>signals</strong></li>\n</ul>\n</li>\n</ul>\n<p>Every layer encapsulates layer from above by adding headers. Then we de-encapsulate it.</p>","frontmatter":{"title":"Computer Networks and the Internet","date":"2019-01-14","description":"Chapter 1"},"fields":{"slug":"/cpsc441/lec1-introduction","category":"cpsc441"}}}]}},"pageContext":{"tag":"cpsc441"}}