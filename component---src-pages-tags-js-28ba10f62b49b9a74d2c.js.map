{"version":3,"sources":["webpack:///./src/pages/tags.js","webpack:///./src/utils/utils.js"],"names":["__webpack_require__","r","__webpack_exports__","d","pageQuery","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","gatsby__WEBPACK_IMPORTED_MODULE_1__","react_helmet__WEBPACK_IMPORTED_MODULE_2__","styled_components__WEBPACK_IMPORTED_MODULE_3__","_utils_utils__WEBPACK_IMPORTED_MODULE_4__","Tag","styled","li","withConfig","displayName","componentId","TagsPage","_ref","_ref$data","data","group","allMarkdownRemark","title","site","siteMetadata","a","createElement","style","listStyle","margin","padding","map","tag","key","fieldValue","to","leKebab","totalCount","countWords","html","match","replace","count","i","length","charCodeAt","countImages","module","exports","str","getReadingTime","_contentCount","wordCount","imageCount","contentCount","readingTime","readingTimeSeconds","Math","max","round","estimatedReadingTime","flatten","arr","concat","apply","unique","filter","el","array","indexOf"],"mappings":"0FAAAA,EAAAC,EAAAC,GAAAF,EAAAG,EAAAD,EAAA,8BAAAE,IAAA,IAAAC,EAAAL,EAAA,GAAAM,EAAAN,EAAAO,EAAAF,GAAAG,EAAAR,EAAA,IAAAS,EAAAT,EAAA,IAAAU,EAAAV,EAAA,GAAAW,EAAAX,EAAA,KAMMY,EAAMC,IAAOC,GAAVC,WAAA,CAAAC,YAAA,YAAAC,YAAA,eAAGJ,CAAH,+CAgCIT,EAAS,aAgBPc,UA3CE,SAAAC,GAOX,IAAAC,EAAAD,EANJE,KACuBC,EAKnBF,EALFG,kBAAqBD,MAEHE,EAGhBJ,EAJFK,KACEC,aAAgBF,MAIpB,OACElB,EAAAqB,EAAAC,cAAA,WACEtB,EAAAqB,EAAAC,cAACnB,EAAA,OAAD,CAAQe,MAAOA,IACflB,EAAAqB,EAAAC,cAAA,WACEtB,EAAAqB,EAAAC,cAAA,kBACAtB,EAAAqB,EAAAC,cAAA,MAAIC,MAAO,CAAEC,UAAW,OAAQC,OAAQ,EAAGC,QAAS,IACjDV,EAAMW,IAAI,SAAAC,GAAG,OACZ5B,EAAAqB,EAAAC,cAAChB,EAAD,CAAKuB,IAAKD,EAAIE,YACZ9B,EAAAqB,EAAAC,cAACpB,EAAA,KAAD,CAAM6B,GAAE,SAAWC,kBAAQJ,EAAIE,YAAvB,KACLF,EAAIE,WADP,KACqBF,EAAIK,WADzB,6CCnBd,IAUMC,EAAa,SAAAC,GACjB,IAGMC,EAHOD,EAAKE,QAAQ,cAAe,KAGtBD,MADH,oHAEZE,EAAQ,EAEZ,GAAc,OAAVF,EACF,OAAOE,EAGT,IAAK,IAAIC,EAAI,EAAGA,EAAIH,EAAMI,OAAQD,IAC5BH,EAAMG,GAAGE,WAAW,IAAM,MAC5BH,GAASF,EAAMG,GAAGC,OAElBF,GAAS,EAIb,OAAOA,GAWHI,EAAc,SAAAP,GAAI,OAAKA,EAAKC,MAAM,mBAAqB,IAAII,QAyCjEG,EAAOC,QAAU,CACfZ,QAlFc,SAAAa,GAAG,OAAIA,EAAIR,QAAQ,mBAAoB,IAAIA,QAAQ,MAAO,MAmFxES,eAbqB,SAAAX,GAAQ,IAAAY,EA5BV,SAAAZ,GAAI,MAAK,CAC5Ba,UAAWd,EAAWC,GACtBc,WAAYP,EAAYP,IA2BUe,CAAaf,GACzCgB,EAlBqB,SAACH,EAAWC,GACvC,IAEIG,EAAqBJ,GAFF,IACiB,IAGxC,GAAIC,EACF,IAAK,IAAIV,EAAI,GAAIA,EAAI,GAAKU,EAAYV,IACpCa,GAAsBC,KAAKC,IAAIf,EAAG,GAMtC,OAF2Bc,KAAKE,MAAMH,EAAqB,IAOvCI,CAFST,EACrBC,UADqBD,EACVE,YAGnB,OAAOE,GAAe,EAAI,aAAkBA,EAArC,aAUPM,QAPc,SAAAC,GAAG,MAAI,GAAGC,OAAOC,MAAM,GAAIF,IAQzCG,OANa,SAAAH,GAAG,OAAIA,EAAII,OAAO,SAACC,EAAIxB,EAAGyB,GAAR,OAAkBA,EAAMC,QAAQF,KAAQxB","file":"component---src-pages-tags-js-28ba10f62b49b9a74d2c.js","sourcesContent":["import React from 'react';\r\nimport { Link, graphql } from 'gatsby';\r\nimport { Helmet } from 'react-helmet';\r\nimport styled from 'styled-components';\r\nimport { leKebab } from '../utils/utils';\r\n\r\nconst Tag = styled.li`\r\n  margin: 1rem 0;\r\n  font-family: Hack, monospace;\r\n`;\r\n\r\nconst TagsPage = ({\r\n  data: {\r\n    allMarkdownRemark: { group },\r\n    site: {\r\n      siteMetadata: { title },\r\n    },\r\n  },\r\n}) => {\r\n  return (\r\n    <div>\r\n      <Helmet title={title} />\r\n      <div>\r\n        <h3>Tags</h3>\r\n        <ul style={{ listStyle: 'none', margin: 0, padding: 0 }}>\r\n          {group.map(tag => (\r\n            <Tag key={tag.fieldValue}>\r\n              <Link to={`/tags/${leKebab(tag.fieldValue)}/`}>\r\n                {tag.fieldValue} ({tag.totalCount})\r\n              </Link>\r\n            </Tag>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const pageQuery = graphql`\r\n  query {\r\n    site {\r\n      siteMetadata {\r\n        title\r\n      }\r\n    }\r\n    allMarkdownRemark(limit: 2000) {\r\n      group(field: frontmatter___tags) {\r\n        fieldValue\r\n        totalCount\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport default TagsPage;\r\n","/**\r\n * Format string to-kebab-format\r\n *\r\n * @param {string} str\r\n * @returns {integer} word count\r\n * @description Takes a html string and returns the number of images\r\n * Note: This code is taken from @tryghost/helpers package\r\n **/\r\nconst leKebab = str => str.replace(/[^A-Za-z0-9\\s]+/g, '').replace(/\\s/g, '-');\r\n\r\n/**\r\n * Word count utility\r\n *\r\n * @param {string} html string\r\n * @returns {integer} word count\r\n * @description Takes a html string and returns the number of words after sanitizing any html\r\n * Note: This code is taken from @tryghost/helpers package\r\n **/\r\nconst countWords = html => {\r\n  const text = html.replace(/<(.|\\n)*?>/g, ' '); // strip any HTML tags\r\n\r\n  const pattern = /[a-zA-ZÀ-ÿ0-9_\\u0392-\\u03c9\\u0410-\\u04F9]+|[\\u4E00-\\u9FFF\\u3400-\\u4dbf\\uf900-\\ufaff\\u3040-\\u309f\\uac00-\\ud7af]+/g;\r\n  const match = text.match(pattern);\r\n  let count = 0;\r\n\r\n  if (match === null) {\r\n    return count;\r\n  }\r\n\r\n  for (let i = 0; i < match.length; i++) {\r\n    if (match[i].charCodeAt(0) >= 0x4e00) {\r\n      count += match[i].length;\r\n    } else {\r\n      count += 1;\r\n    }\r\n  }\r\n\r\n  return count;\r\n};\r\n\r\n/**\r\n * Image count utility\r\n *\r\n * @param {string} html string\r\n * @returns {integer} word count\r\n * @description Takes a html string and returns the number of images\r\n * Note: This code is taken from @tryghost/helpers package\r\n **/\r\nconst countImages = html => (html.match(/<img(.|\\n)*?>/g) || []).length;\r\n\r\nconst contentCount = html => ({\r\n  wordCount: countWords(html),\r\n  imageCount: countImages(html),\r\n});\r\n\r\n/**\r\n * Estimated reading time (based on medium https://blog.medium.com/read-time-and-you-bc2048ab620c)\r\n *\r\n * @param {integer} wordCount\r\n * @param {integer} imageCount\r\n * @returns {integer} estimated reading time in seconds\r\n **/\r\nconst estimatedReadingTime = (wordCount, imageCount) => {\r\n  const wordsPerMinute = 275;\r\n  const wordsPerSecond = wordsPerMinute / 60;\r\n  let readingTimeSeconds = wordCount / wordsPerSecond;\r\n\r\n  if (imageCount) {\r\n    for (let i = 12; i > 12 - imageCount; i--) {\r\n      readingTimeSeconds += Math.max(i, 3);\r\n    }\r\n  }\r\n\r\n  const readingTimeMinutes = Math.round(readingTimeSeconds / 60);\r\n\r\n  return readingTimeMinutes;\r\n};\r\n\r\nconst getReadingTime = html => {\r\n  const { wordCount, imageCount } = contentCount(html);\r\n  const readingTime = estimatedReadingTime(wordCount, imageCount);\r\n\r\n  return readingTime <= 1 ? '1 min read' : `${readingTime} min read`;\r\n};\r\n\r\nconst flatten = arr => [].concat.apply([], arr);\r\n\r\nconst unique = arr => arr.filter((el, i, array) => array.indexOf(el) === i);\r\n\r\nmodule.exports = {\r\n  leKebab,\r\n  getReadingTime,\r\n  flatten,\r\n  unique,\r\n};\r\n"],"sourceRoot":""}